function C0(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function ep(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tp={exports:{}},ll={},np={exports:{}},$={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wo=Symbol.for("react.element"),N0=Symbol.for("react.portal"),E0=Symbol.for("react.fragment"),M0=Symbol.for("react.strict_mode"),T0=Symbol.for("react.profiler"),O0=Symbol.for("react.provider"),A0=Symbol.for("react.context"),R0=Symbol.for("react.forward_ref"),P0=Symbol.for("react.suspense"),D0=Symbol.for("react.memo"),I0=Symbol.for("react.lazy"),vd=Symbol.iterator;function z0(t){return t===null||typeof t!="object"?null:(t=vd&&t[vd]||t["@@iterator"],typeof t=="function"?t:null)}var rp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ip=Object.assign,op={};function ui(t,e,n){this.props=t,this.context=e,this.refs=op,this.updater=n||rp}ui.prototype.isReactComponent={};ui.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ui.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sp(){}sp.prototype=ui.prototype;function Zu(t,e,n){this.props=t,this.context=e,this.refs=op,this.updater=n||rp}var ec=Zu.prototype=new sp;ec.constructor=Zu;ip(ec,ui.prototype);ec.isPureReactComponent=!0;var xd=Array.isArray,lp=Object.prototype.hasOwnProperty,tc={current:null},ap={key:!0,ref:!0,__self:!0,__source:!0};function up(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)lp.call(e,r)&&!ap.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:wo,type:t,key:o,ref:s,props:i,_owner:tc.current}}function j0(t,e){return{$$typeof:wo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nc(t){return typeof t=="object"&&t!==null&&t.$$typeof===wo}function L0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kd=/\/+/g;function Vl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?L0(""+t.key):e.toString(36)}function ns(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case wo:case N0:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Vl(s,0):r,xd(i)?(n="",t!=null&&(n=t.replace(kd,"$&/")+"/"),ns(i,e,n,"",function(u){return u})):i!=null&&(nc(i)&&(i=j0(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(kd,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",xd(t))for(var l=0;l<t.length;l++){o=t[l];var a=r+Vl(o,l);s+=ns(o,e,n,a,i)}else if(a=z0(t),typeof a=="function")for(t=a.call(t),l=0;!(o=t.next()).done;)o=o.value,a=r+Vl(o,l++),s+=ns(o,e,n,a,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Po(t,e,n){if(t==null)return t;var r=[],i=0;return ns(t,r,"","",function(o){return e.call(n,o,i++)}),r}function B0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _e={current:null},rs={transition:null},F0={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:rs,ReactCurrentOwner:tc};function cp(){throw Error("act(...) is not supported in production builds of React.")}$.Children={map:Po,forEach:function(t,e,n){Po(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Po(t,function(){e++}),e},toArray:function(t){return Po(t,function(e){return e})||[]},only:function(t){if(!nc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$.Component=ui;$.Fragment=E0;$.Profiler=T0;$.PureComponent=Zu;$.StrictMode=M0;$.Suspense=P0;$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F0;$.act=cp;$.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ip({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=tc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)lp.call(e,a)&&!ap.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:wo,type:t.type,key:i,ref:o,props:r,_owner:s}};$.createContext=function(t){return t={$$typeof:A0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:O0,_context:t},t.Consumer=t};$.createElement=up;$.createFactory=function(t){var e=up.bind(null,t);return e.type=t,e};$.createRef=function(){return{current:null}};$.forwardRef=function(t){return{$$typeof:R0,render:t}};$.isValidElement=nc;$.lazy=function(t){return{$$typeof:I0,_payload:{_status:-1,_result:t},_init:B0}};$.memo=function(t,e){return{$$typeof:D0,type:t,compare:e===void 0?null:e}};$.startTransition=function(t){var e=rs.transition;rs.transition={};try{t()}finally{rs.transition=e}};$.unstable_act=cp;$.useCallback=function(t,e){return _e.current.useCallback(t,e)};$.useContext=function(t){return _e.current.useContext(t)};$.useDebugValue=function(){};$.useDeferredValue=function(t){return _e.current.useDeferredValue(t)};$.useEffect=function(t,e){return _e.current.useEffect(t,e)};$.useId=function(){return _e.current.useId()};$.useImperativeHandle=function(t,e,n){return _e.current.useImperativeHandle(t,e,n)};$.useInsertionEffect=function(t,e){return _e.current.useInsertionEffect(t,e)};$.useLayoutEffect=function(t,e){return _e.current.useLayoutEffect(t,e)};$.useMemo=function(t,e){return _e.current.useMemo(t,e)};$.useReducer=function(t,e,n){return _e.current.useReducer(t,e,n)};$.useRef=function(t){return _e.current.useRef(t)};$.useState=function(t){return _e.current.useState(t)};$.useSyncExternalStore=function(t,e,n){return _e.current.useSyncExternalStore(t,e,n)};$.useTransition=function(){return _e.current.useTransition()};$.version="18.3.1";np.exports=$;var M=np.exports;const J=ep(M),_0=C0({__proto__:null,default:J},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0=M,$0=Symbol.for("react.element"),H0=Symbol.for("react.fragment"),W0=Object.prototype.hasOwnProperty,U0=V0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K0={key:!0,ref:!0,__self:!0,__source:!0};function dp(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)W0.call(e,r)&&!K0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:$0,type:t,key:o,ref:s,props:i,_owner:U0.current}}ll.Fragment=H0;ll.jsx=dp;ll.jsxs=dp;tp.exports=ll;var x=tp.exports,fp={exports:{}},nt={},hp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,j){var B=A.length;A.push(j);e:for(;0<B;){var U=B-1>>>1,he=A[U];if(0<i(he,j))A[U]=j,A[B]=he,B=U;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var j=A[0],B=A.pop();if(B!==j){A[0]=B;e:for(var U=0,he=A.length,Ao=he>>>1;U<Ao;){var _n=2*(U+1)-1,_l=A[_n],Vn=_n+1,Ro=A[Vn];if(0>i(_l,B))Vn<he&&0>i(Ro,_l)?(A[U]=Ro,A[Vn]=B,U=Vn):(A[U]=_l,A[_n]=B,U=_n);else if(Vn<he&&0>i(Ro,B))A[U]=Ro,A[Vn]=B,U=Vn;else break e}}return j}function i(A,j){var B=A.sortIndex-j.sortIndex;return B!==0?B:A.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var a=[],u=[],c=1,d=null,f=3,p=!1,h=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(A){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=A)r(u),j.sortIndex=j.expirationTime,e(a,j);else break;j=n(u)}}function w(A){if(m=!1,k(A),!h)if(n(a)!==null)h=!0,Qt(S);else{var j=n(u);j!==null&&vr(w,j.startTime-A)}}function S(A,j){h=!1,m&&(m=!1,g(T),T=-1),p=!0;var B=f;try{for(k(j),d=n(a);d!==null&&(!(d.expirationTime>j)||A&&!se());){var U=d.callback;if(typeof U=="function"){d.callback=null,f=d.priorityLevel;var he=U(d.expirationTime<=j);j=t.unstable_now(),typeof he=="function"?d.callback=he:d===n(a)&&r(a),k(j)}else r(a);d=n(a)}if(d!==null)var Ao=!0;else{var _n=n(u);_n!==null&&vr(w,_n.startTime-j),Ao=!1}return Ao}finally{d=null,f=B,p=!1}}var C=!1,E=null,T=-1,D=5,z=-1;function se(){return!(t.unstable_now()-z<D)}function W(){if(E!==null){var A=t.unstable_now();z=A;var j=!0;try{j=E(!0,A)}finally{j?Gt():(C=!1,E=null)}}else C=!1}var Gt;if(typeof y=="function")Gt=function(){y(W)};else if(typeof MessageChannel<"u"){var Fn=new MessageChannel,Oo=Fn.port2;Fn.port1.onmessage=W,Gt=function(){Oo.postMessage(null)}}else Gt=function(){v(W,0)};function Qt(A){E=A,C||(C=!0,Gt())}function vr(A,j){T=v(function(){A(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){h||p||(h=!0,Qt(S))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var B=f;f=j;try{return A()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,j){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var B=f;f=A;try{return j()}finally{f=B}},t.unstable_scheduleCallback=function(A,j,B){var U=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?U+B:U):B=U,A){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=B+he,A={id:c++,callback:j,priorityLevel:A,startTime:B,expirationTime:he,sortIndex:-1},B>U?(A.sortIndex=B,e(u,A),n(a)===null&&A===n(u)&&(m?(g(T),T=-1):m=!0,vr(w,B-U))):(A.sortIndex=he,e(a,A),h||p||(h=!0,Qt(S))),A},t.unstable_shouldYield=se,t.unstable_wrapCallback=function(A){var j=f;return function(){var B=f;f=j;try{return A.apply(this,arguments)}finally{f=B}}}})(pp);hp.exports=pp;var q0=hp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0=M,tt=q0;function N(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mp=new Set,qi={};function pr(t,e){Qr(t,e),Qr(t+"Capture",e)}function Qr(t,e){for(qi[t]=e,t=0;t<e.length;t++)mp.add(e[t])}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=Object.prototype.hasOwnProperty,G0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wd={},Sd={};function Q0(t){return Ba.call(Sd,t)?!0:Ba.call(wd,t)?!1:G0.test(t)?Sd[t]=!0:(wd[t]=!0,!1)}function Y0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function X0(t,e,n,r){if(e===null||typeof e>"u"||Y0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ve(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ne[t]=new Ve(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ne[e]=new Ve(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ne[t]=new Ve(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ne[t]=new Ve(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ne[t]=new Ve(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ne[t]=new Ve(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ne[t]=new Ve(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ne[t]=new Ve(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ne[t]=new Ve(t,5,!1,t.toLowerCase(),null,!1,!1)});var rc=/[\-:]([a-z])/g;function ic(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rc,ic);Ne[e]=new Ve(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rc,ic);Ne[e]=new Ve(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rc,ic);Ne[e]=new Ve(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ne[t]=new Ve(t,1,!1,t.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ne[t]=new Ve(t,1,!1,t.toLowerCase(),null,!0,!0)});function oc(t,e,n,r){var i=Ne.hasOwnProperty(e)?Ne[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(X0(e,n,i,r)&&(n=null),r||i===null?Q0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jt=J0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Do=Symbol.for("react.element"),Cr=Symbol.for("react.portal"),Nr=Symbol.for("react.fragment"),sc=Symbol.for("react.strict_mode"),Fa=Symbol.for("react.profiler"),gp=Symbol.for("react.provider"),yp=Symbol.for("react.context"),lc=Symbol.for("react.forward_ref"),_a=Symbol.for("react.suspense"),Va=Symbol.for("react.suspense_list"),ac=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),vp=Symbol.for("react.offscreen"),bd=Symbol.iterator;function mi(t){return t===null||typeof t!="object"?null:(t=bd&&t[bd]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,$l;function Ei(t){if($l===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$l=e&&e[1]||""}return`
`+$l+t}var Hl=!1;function Wl(t,e){if(!t||Hl)return"";Hl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=s&&0<=l);break}}}finally{Hl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ei(t):""}function Z0(t){switch(t.tag){case 5:return Ei(t.type);case 16:return Ei("Lazy");case 13:return Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 2:case 15:return t=Wl(t.type,!1),t;case 11:return t=Wl(t.type.render,!1),t;case 1:return t=Wl(t.type,!0),t;default:return""}}function $a(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Nr:return"Fragment";case Cr:return"Portal";case Fa:return"Profiler";case sc:return"StrictMode";case _a:return"Suspense";case Va:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yp:return(t.displayName||"Context")+".Consumer";case gp:return(t._context.displayName||"Context")+".Provider";case lc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ac:return e=t.displayName||null,e!==null?e:$a(t.type)||"Memo";case tn:e=t._payload,t=t._init;try{return $a(t(e))}catch{}}return null}function e1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $a(e);case 8:return e===sc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function On(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function t1(t){var e=xp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Io(t){t._valueTracker||(t._valueTracker=t1(t))}function kp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ha(t,e){var n=e.checked;return ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=On(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wp(t,e){e=e.checked,e!=null&&oc(t,"checked",e,!1)}function Wa(t,e){wp(t,e);var n=On(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ua(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ua(t,e.type,On(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Nd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ua(t,e,n){(e!=="number"||xs(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mi=Array.isArray;function Fr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+On(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ka(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ed(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(N(92));if(Mi(n)){if(1<n.length)throw Error(N(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:On(n)}}function Sp(t,e){var n=On(e.value),r=On(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Md(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zo,Cp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zo=zo||document.createElement("div"),zo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ji(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ii={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n1=["Webkit","ms","Moz","O"];Object.keys(Ii).forEach(function(t){n1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ii[e]=Ii[t]})});function Np(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ii.hasOwnProperty(t)&&Ii[t]?(""+e).trim():e+"px"}function Ep(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Np(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var r1=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ja(t,e){if(e){if(r1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function Ga(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qa=null;function uc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ya=null,_r=null,Vr=null;function Td(t){if(t=Co(t)){if(typeof Ya!="function")throw Error(N(280));var e=t.stateNode;e&&(e=fl(e),Ya(t.stateNode,t.type,e))}}function Mp(t){_r?Vr?Vr.push(t):Vr=[t]:_r=t}function Tp(){if(_r){var t=_r,e=Vr;if(Vr=_r=null,Td(t),e)for(t=0;t<e.length;t++)Td(e[t])}}function Op(t,e){return t(e)}function Ap(){}var Ul=!1;function Rp(t,e,n){if(Ul)return t(e,n);Ul=!0;try{return Op(t,e,n)}finally{Ul=!1,(_r!==null||Vr!==null)&&(Ap(),Tp())}}function Gi(t,e){var n=t.stateNode;if(n===null)return null;var r=fl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(N(231,e,typeof n));return n}var Xa=!1;if(Wt)try{var gi={};Object.defineProperty(gi,"passive",{get:function(){Xa=!0}}),window.addEventListener("test",gi,gi),window.removeEventListener("test",gi,gi)}catch{Xa=!1}function i1(t,e,n,r,i,o,s,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var zi=!1,ks=null,ws=!1,Za=null,o1={onError:function(t){zi=!0,ks=t}};function s1(t,e,n,r,i,o,s,l,a){zi=!1,ks=null,i1.apply(o1,arguments)}function l1(t,e,n,r,i,o,s,l,a){if(s1.apply(this,arguments),zi){if(zi){var u=ks;zi=!1,ks=null}else throw Error(N(198));ws||(ws=!0,Za=u)}}function mr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Pp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Od(t){if(mr(t)!==t)throw Error(N(188))}function a1(t){var e=t.alternate;if(!e){if(e=mr(t),e===null)throw Error(N(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Od(i),t;if(o===r)return Od(i),e;o=o.sibling}throw Error(N(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(N(189))}}if(n.alternate!==r)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?t:e}function Dp(t){return t=a1(t),t!==null?Ip(t):null}function Ip(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ip(t);if(e!==null)return e;t=t.sibling}return null}var zp=tt.unstable_scheduleCallback,Ad=tt.unstable_cancelCallback,u1=tt.unstable_shouldYield,c1=tt.unstable_requestPaint,oe=tt.unstable_now,d1=tt.unstable_getCurrentPriorityLevel,cc=tt.unstable_ImmediatePriority,jp=tt.unstable_UserBlockingPriority,Ss=tt.unstable_NormalPriority,f1=tt.unstable_LowPriority,Lp=tt.unstable_IdlePriority,al=null,At=null;function h1(t){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(al,t,void 0,(t.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:g1,p1=Math.log,m1=Math.LN2;function g1(t){return t>>>=0,t===0?32:31-(p1(t)/m1|0)|0}var jo=64,Lo=4194304;function Ti(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Ti(l):(o&=s,o!==0&&(r=Ti(o)))}else s=n&~i,s!==0?r=Ti(s):o!==0&&(r=Ti(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-kt(e),i=1<<n,r|=t[n],e&=~i;return r}function y1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function v1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-kt(o),l=1<<s,a=i[s];a===-1?(!(l&n)||l&r)&&(i[s]=y1(l,e)):a<=e&&(t.expiredLanes|=l),o&=~l}}function eu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Bp(){var t=jo;return jo<<=1,!(jo&4194240)&&(jo=64),t}function Kl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function So(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kt(e),t[e]=n}function x1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-kt(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function dc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-kt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var K=0;function Fp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _p,fc,Vp,$p,Hp,tu=!1,Bo=[],mn=null,gn=null,yn=null,Qi=new Map,Yi=new Map,sn=[],k1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rd(t,e){switch(t){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":gn=null;break;case"mouseover":case"mouseout":yn=null;break;case"pointerover":case"pointerout":Qi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yi.delete(e.pointerId)}}function yi(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Co(e),e!==null&&fc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function w1(t,e,n,r,i){switch(e){case"focusin":return mn=yi(mn,t,e,n,r,i),!0;case"dragenter":return gn=yi(gn,t,e,n,r,i),!0;case"mouseover":return yn=yi(yn,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Qi.set(o,yi(Qi.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Yi.set(o,yi(Yi.get(o)||null,t,e,n,r,i)),!0}return!1}function Wp(t){var e=Kn(t.target);if(e!==null){var n=mr(e);if(n!==null){if(e=n.tag,e===13){if(e=Pp(n),e!==null){t.blockedOn=e,Hp(t.priority,function(){Vp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function is(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Qa=r,n.target.dispatchEvent(r),Qa=null}else return e=Co(n),e!==null&&fc(e),t.blockedOn=n,!1;e.shift()}return!0}function Pd(t,e,n){is(t)&&n.delete(e)}function S1(){tu=!1,mn!==null&&is(mn)&&(mn=null),gn!==null&&is(gn)&&(gn=null),yn!==null&&is(yn)&&(yn=null),Qi.forEach(Pd),Yi.forEach(Pd)}function vi(t,e){t.blockedOn===e&&(t.blockedOn=null,tu||(tu=!0,tt.unstable_scheduleCallback(tt.unstable_NormalPriority,S1)))}function Xi(t){function e(i){return vi(i,t)}if(0<Bo.length){vi(Bo[0],t);for(var n=1;n<Bo.length;n++){var r=Bo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(mn!==null&&vi(mn,t),gn!==null&&vi(gn,t),yn!==null&&vi(yn,t),Qi.forEach(e),Yi.forEach(e),n=0;n<sn.length;n++)r=sn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<sn.length&&(n=sn[0],n.blockedOn===null);)Wp(n),n.blockedOn===null&&sn.shift()}var $r=Jt.ReactCurrentBatchConfig,Cs=!0;function b1(t,e,n,r){var i=K,o=$r.transition;$r.transition=null;try{K=1,hc(t,e,n,r)}finally{K=i,$r.transition=o}}function C1(t,e,n,r){var i=K,o=$r.transition;$r.transition=null;try{K=4,hc(t,e,n,r)}finally{K=i,$r.transition=o}}function hc(t,e,n,r){if(Cs){var i=nu(t,e,n,r);if(i===null)na(t,e,r,Ns,n),Rd(t,r);else if(w1(i,t,e,n,r))r.stopPropagation();else if(Rd(t,r),e&4&&-1<k1.indexOf(t)){for(;i!==null;){var o=Co(i);if(o!==null&&_p(o),o=nu(t,e,n,r),o===null&&na(t,e,r,Ns,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else na(t,e,r,null,n)}}var Ns=null;function nu(t,e,n,r){if(Ns=null,t=uc(r),t=Kn(t),t!==null)if(e=mr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Pp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ns=t,null}function Up(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(d1()){case cc:return 1;case jp:return 4;case Ss:case f1:return 16;case Lp:return 536870912;default:return 16}default:return 16}}var un=null,pc=null,ss=null;function Kp(){if(ss)return ss;var t,e=pc,n=e.length,r,i="value"in un?un.value:un.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return ss=i.slice(t,1<r?1-r:void 0)}function ls(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fo(){return!0}function Dd(){return!1}function rt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Fo:Dd,this.isPropagationStopped=Dd,this}return ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),e}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mc=rt(ci),bo=ne({},ci,{view:0,detail:0}),N1=rt(bo),ql,Jl,xi,ul=ne({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xi&&(xi&&t.type==="mousemove"?(ql=t.screenX-xi.screenX,Jl=t.screenY-xi.screenY):Jl=ql=0,xi=t),ql)},movementY:function(t){return"movementY"in t?t.movementY:Jl}}),Id=rt(ul),E1=ne({},ul,{dataTransfer:0}),M1=rt(E1),T1=ne({},bo,{relatedTarget:0}),Gl=rt(T1),O1=ne({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),A1=rt(O1),R1=ne({},ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),P1=rt(R1),D1=ne({},ci,{data:0}),zd=rt(D1),I1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=j1[t])?!!e[t]:!1}function gc(){return L1}var B1=ne({},bo,{key:function(t){if(t.key){var e=I1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ls(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?z1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gc,charCode:function(t){return t.type==="keypress"?ls(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ls(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),F1=rt(B1),_1=ne({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jd=rt(_1),V1=ne({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gc}),$1=rt(V1),H1=ne({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),W1=rt(H1),U1=ne({},ul,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K1=rt(U1),q1=[9,13,27,32],yc=Wt&&"CompositionEvent"in window,ji=null;Wt&&"documentMode"in document&&(ji=document.documentMode);var J1=Wt&&"TextEvent"in window&&!ji,qp=Wt&&(!yc||ji&&8<ji&&11>=ji),Ld=" ",Bd=!1;function Jp(t,e){switch(t){case"keyup":return q1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Er=!1;function G1(t,e){switch(t){case"compositionend":return Gp(e);case"keypress":return e.which!==32?null:(Bd=!0,Ld);case"textInput":return t=e.data,t===Ld&&Bd?null:t;default:return null}}function Q1(t,e){if(Er)return t==="compositionend"||!yc&&Jp(t,e)?(t=Kp(),ss=pc=un=null,Er=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qp&&e.locale!=="ko"?null:e.data;default:return null}}var Y1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Y1[t.type]:e==="textarea"}function Qp(t,e,n,r){Mp(r),e=Es(e,"onChange"),0<e.length&&(n=new mc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Li=null,Zi=null;function X1(t){lm(t,0)}function cl(t){var e=Or(t);if(kp(e))return t}function Z1(t,e){if(t==="change")return e}var Yp=!1;if(Wt){var Ql;if(Wt){var Yl="oninput"in document;if(!Yl){var _d=document.createElement("div");_d.setAttribute("oninput","return;"),Yl=typeof _d.oninput=="function"}Ql=Yl}else Ql=!1;Yp=Ql&&(!document.documentMode||9<document.documentMode)}function Vd(){Li&&(Li.detachEvent("onpropertychange",Xp),Zi=Li=null)}function Xp(t){if(t.propertyName==="value"&&cl(Zi)){var e=[];Qp(e,Zi,t,uc(t)),Rp(X1,e)}}function ev(t,e,n){t==="focusin"?(Vd(),Li=e,Zi=n,Li.attachEvent("onpropertychange",Xp)):t==="focusout"&&Vd()}function tv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cl(Zi)}function nv(t,e){if(t==="click")return cl(e)}function rv(t,e){if(t==="input"||t==="change")return cl(e)}function iv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bt=typeof Object.is=="function"?Object.is:iv;function eo(t,e){if(bt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ba.call(e,i)||!bt(t[i],e[i]))return!1}return!0}function $d(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hd(t,e){var n=$d(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$d(n)}}function Zp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function em(){for(var t=window,e=xs();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xs(t.document)}return e}function vc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ov(t){var e=em(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Zp(n.ownerDocument.documentElement,n)){if(r!==null&&vc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Hd(n,o);var s=Hd(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sv=Wt&&"documentMode"in document&&11>=document.documentMode,Mr=null,ru=null,Bi=null,iu=!1;function Wd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;iu||Mr==null||Mr!==xs(r)||(r=Mr,"selectionStart"in r&&vc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bi&&eo(Bi,r)||(Bi=r,r=Es(ru,"onSelect"),0<r.length&&(e=new mc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Mr)))}function _o(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Tr={animationend:_o("Animation","AnimationEnd"),animationiteration:_o("Animation","AnimationIteration"),animationstart:_o("Animation","AnimationStart"),transitionend:_o("Transition","TransitionEnd")},Xl={},tm={};Wt&&(tm=document.createElement("div").style,"AnimationEvent"in window||(delete Tr.animationend.animation,delete Tr.animationiteration.animation,delete Tr.animationstart.animation),"TransitionEvent"in window||delete Tr.transitionend.transition);function dl(t){if(Xl[t])return Xl[t];if(!Tr[t])return t;var e=Tr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tm)return Xl[t]=e[n];return t}var nm=dl("animationend"),rm=dl("animationiteration"),im=dl("animationstart"),om=dl("transitionend"),sm=new Map,Ud="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(t,e){sm.set(t,e),pr(e,[t])}for(var Zl=0;Zl<Ud.length;Zl++){var ea=Ud[Zl],lv=ea.toLowerCase(),av=ea[0].toUpperCase()+ea.slice(1);Dn(lv,"on"+av)}Dn(nm,"onAnimationEnd");Dn(rm,"onAnimationIteration");Dn(im,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(om,"onTransitionEnd");Qr("onMouseEnter",["mouseout","mouseover"]);Qr("onMouseLeave",["mouseout","mouseover"]);Qr("onPointerEnter",["pointerout","pointerover"]);Qr("onPointerLeave",["pointerout","pointerover"]);pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function Kd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,l1(r,e,void 0,t),t.currentTarget=null}function lm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;Kd(i,l,u),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,u=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;Kd(i,l,u),o=a}}}if(ws)throw t=Za,ws=!1,Za=null,t}function Y(t,e){var n=e[uu];n===void 0&&(n=e[uu]=new Set);var r=t+"__bubble";n.has(r)||(am(e,t,2,!1),n.add(r))}function ta(t,e,n){var r=0;e&&(r|=4),am(n,t,r,e)}var Vo="_reactListening"+Math.random().toString(36).slice(2);function to(t){if(!t[Vo]){t[Vo]=!0,mp.forEach(function(n){n!=="selectionchange"&&(uv.has(n)||ta(n,!1,t),ta(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vo]||(e[Vo]=!0,ta("selectionchange",!1,e))}}function am(t,e,n,r){switch(Up(e)){case 1:var i=b1;break;case 4:i=C1;break;default:i=hc}n=i.bind(null,e,n,t),i=void 0,!Xa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function na(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Kn(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Rp(function(){var u=o,c=uc(n),d=[];e:{var f=sm.get(t);if(f!==void 0){var p=mc,h=t;switch(t){case"keypress":if(ls(n)===0)break e;case"keydown":case"keyup":p=F1;break;case"focusin":h="focus",p=Gl;break;case"focusout":h="blur",p=Gl;break;case"beforeblur":case"afterblur":p=Gl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Id;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=M1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=$1;break;case nm:case rm:case im:p=A1;break;case om:p=W1;break;case"scroll":p=N1;break;case"wheel":p=K1;break;case"copy":case"cut":case"paste":p=P1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=jd}var m=(e&4)!==0,v=!m&&t==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var y=u,k;y!==null;){k=y;var w=k.stateNode;if(k.tag===5&&w!==null&&(k=w,g!==null&&(w=Gi(y,g),w!=null&&m.push(no(y,w,k)))),v)break;y=y.return}0<m.length&&(f=new p(f,h,null,n,c),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Qa&&(h=n.relatedTarget||n.fromElement)&&(Kn(h)||h[Ut]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(h=n.relatedTarget||n.toElement,p=u,h=h?Kn(h):null,h!==null&&(v=mr(h),h!==v||h.tag!==5&&h.tag!==6)&&(h=null)):(p=null,h=u),p!==h)){if(m=Id,w="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=jd,w="onPointerLeave",g="onPointerEnter",y="pointer"),v=p==null?f:Or(p),k=h==null?f:Or(h),f=new m(w,y+"leave",p,n,c),f.target=v,f.relatedTarget=k,w=null,Kn(c)===u&&(m=new m(g,y+"enter",h,n,c),m.target=k,m.relatedTarget=v,w=m),v=w,p&&h)t:{for(m=p,g=h,y=0,k=m;k;k=xr(k))y++;for(k=0,w=g;w;w=xr(w))k++;for(;0<y-k;)m=xr(m),y--;for(;0<k-y;)g=xr(g),k--;for(;y--;){if(m===g||g!==null&&m===g.alternate)break t;m=xr(m),g=xr(g)}m=null}else m=null;p!==null&&qd(d,f,p,m,!1),h!==null&&v!==null&&qd(d,v,h,m,!0)}}e:{if(f=u?Or(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=Z1;else if(Fd(f))if(Yp)S=rv;else{S=tv;var C=ev}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=nv);if(S&&(S=S(t,u))){Qp(d,S,n,c);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Ua(f,"number",f.value)}switch(C=u?Or(u):window,t){case"focusin":(Fd(C)||C.contentEditable==="true")&&(Mr=C,ru=u,Bi=null);break;case"focusout":Bi=ru=Mr=null;break;case"mousedown":iu=!0;break;case"contextmenu":case"mouseup":case"dragend":iu=!1,Wd(d,n,c);break;case"selectionchange":if(sv)break;case"keydown":case"keyup":Wd(d,n,c)}var E;if(yc)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Er?Jp(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(qp&&n.locale!=="ko"&&(Er||T!=="onCompositionStart"?T==="onCompositionEnd"&&Er&&(E=Kp()):(un=c,pc="value"in un?un.value:un.textContent,Er=!0)),C=Es(u,T),0<C.length&&(T=new zd(T,t,null,n,c),d.push({event:T,listeners:C}),E?T.data=E:(E=Gp(n),E!==null&&(T.data=E)))),(E=J1?G1(t,n):Q1(t,n))&&(u=Es(u,"onBeforeInput"),0<u.length&&(c=new zd("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=E))}lm(d,e)})}function no(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Es(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Gi(t,n),o!=null&&r.unshift(no(t,o,i)),o=Gi(t,e),o!=null&&r.push(no(t,o,i))),t=t.return}return r}function xr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qd(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=Gi(n,o),a!=null&&s.unshift(no(n,a,l))):i||(a=Gi(n,o),a!=null&&s.push(no(n,a,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var cv=/\r\n?/g,dv=/\u0000|\uFFFD/g;function Jd(t){return(typeof t=="string"?t:""+t).replace(cv,`
`).replace(dv,"")}function $o(t,e,n){if(e=Jd(e),Jd(t)!==e&&n)throw Error(N(425))}function Ms(){}var ou=null,su=null;function lu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var au=typeof setTimeout=="function"?setTimeout:void 0,fv=typeof clearTimeout=="function"?clearTimeout:void 0,Gd=typeof Promise=="function"?Promise:void 0,hv=typeof queueMicrotask=="function"?queueMicrotask:typeof Gd<"u"?function(t){return Gd.resolve(null).then(t).catch(pv)}:au;function pv(t){setTimeout(function(){throw t})}function ra(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Xi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Xi(e)}function vn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var di=Math.random().toString(36).slice(2),Tt="__reactFiber$"+di,ro="__reactProps$"+di,Ut="__reactContainer$"+di,uu="__reactEvents$"+di,mv="__reactListeners$"+di,gv="__reactHandles$"+di;function Kn(t){var e=t[Tt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ut]||n[Tt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Qd(t);t!==null;){if(n=t[Tt])return n;t=Qd(t)}return e}t=n,n=t.parentNode}return null}function Co(t){return t=t[Tt]||t[Ut],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Or(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(N(33))}function fl(t){return t[ro]||null}var cu=[],Ar=-1;function In(t){return{current:t}}function X(t){0>Ar||(t.current=cu[Ar],cu[Ar]=null,Ar--)}function G(t,e){Ar++,cu[Ar]=t.current,t.current=e}var An={},Re=In(An),We=In(!1),sr=An;function Yr(t,e){var n=t.type.contextTypes;if(!n)return An;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ue(t){return t=t.childContextTypes,t!=null}function Ts(){X(We),X(Re)}function Yd(t,e,n){if(Re.current!==An)throw Error(N(168));G(Re,e),G(We,n)}function um(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(N(108,e1(t)||"Unknown",i));return ne({},n,r)}function Os(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||An,sr=Re.current,G(Re,t),G(We,We.current),!0}function Xd(t,e,n){var r=t.stateNode;if(!r)throw Error(N(169));n?(t=um(t,e,sr),r.__reactInternalMemoizedMergedChildContext=t,X(We),X(Re),G(Re,t)):X(We),G(We,n)}var Ft=null,hl=!1,ia=!1;function cm(t){Ft===null?Ft=[t]:Ft.push(t)}function yv(t){hl=!0,cm(t)}function zn(){if(!ia&&Ft!==null){ia=!0;var t=0,e=K;try{var n=Ft;for(K=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ft=null,hl=!1}catch(i){throw Ft!==null&&(Ft=Ft.slice(t+1)),zp(cc,zn),i}finally{K=e,ia=!1}}return null}var Rr=[],Pr=0,As=null,Rs=0,ot=[],st=0,lr=null,_t=1,Vt="";function $n(t,e){Rr[Pr++]=Rs,Rr[Pr++]=As,As=t,Rs=e}function dm(t,e,n){ot[st++]=_t,ot[st++]=Vt,ot[st++]=lr,lr=t;var r=_t;t=Vt;var i=32-kt(r)-1;r&=~(1<<i),n+=1;var o=32-kt(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,_t=1<<32-kt(e)+i|n<<i|r,Vt=o+t}else _t=1<<o|n<<i|r,Vt=t}function xc(t){t.return!==null&&($n(t,1),dm(t,1,0))}function kc(t){for(;t===As;)As=Rr[--Pr],Rr[Pr]=null,Rs=Rr[--Pr],Rr[Pr]=null;for(;t===lr;)lr=ot[--st],ot[st]=null,Vt=ot[--st],ot[st]=null,_t=ot[--st],ot[st]=null}var et=null,Ze=null,Z=!1,yt=null;function fm(t,e){var n=at(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,et=t,Ze=vn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,et=t,Ze=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=lr!==null?{id:_t,overflow:Vt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=at(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,et=t,Ze=null,!0):!1;default:return!1}}function du(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fu(t){if(Z){var e=Ze;if(e){var n=e;if(!Zd(t,e)){if(du(t))throw Error(N(418));e=vn(n.nextSibling);var r=et;e&&Zd(t,e)?fm(r,n):(t.flags=t.flags&-4097|2,Z=!1,et=t)}}else{if(du(t))throw Error(N(418));t.flags=t.flags&-4097|2,Z=!1,et=t}}}function ef(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;et=t}function Ho(t){if(t!==et)return!1;if(!Z)return ef(t),Z=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lu(t.type,t.memoizedProps)),e&&(e=Ze)){if(du(t))throw hm(),Error(N(418));for(;e;)fm(t,e),e=vn(e.nextSibling)}if(ef(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ze=vn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ze=null}}else Ze=et?vn(t.stateNode.nextSibling):null;return!0}function hm(){for(var t=Ze;t;)t=vn(t.nextSibling)}function Xr(){Ze=et=null,Z=!1}function wc(t){yt===null?yt=[t]:yt.push(t)}var vv=Jt.ReactCurrentBatchConfig;function ki(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var r=n.stateNode}if(!r)throw Error(N(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,t))}return t}function Wo(t,e){throw t=Object.prototype.toString.call(e),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tf(t){var e=t._init;return e(t._payload)}function pm(t){function e(g,y){if(t){var k=g.deletions;k===null?(g.deletions=[y],g.flags|=16):k.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=Sn(g,y),g.index=0,g.sibling=null,g}function o(g,y,k){return g.index=k,t?(k=g.alternate,k!==null?(k=k.index,k<y?(g.flags|=2,y):k):(g.flags|=2,y)):(g.flags|=1048576,y)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,y,k,w){return y===null||y.tag!==6?(y=da(k,g.mode,w),y.return=g,y):(y=i(y,k),y.return=g,y)}function a(g,y,k,w){var S=k.type;return S===Nr?c(g,y,k.props.children,w,k.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===tn&&tf(S)===y.type)?(w=i(y,k.props),w.ref=ki(g,y,k),w.return=g,w):(w=ps(k.type,k.key,k.props,null,g.mode,w),w.ref=ki(g,y,k),w.return=g,w)}function u(g,y,k,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==k.containerInfo||y.stateNode.implementation!==k.implementation?(y=fa(k,g.mode,w),y.return=g,y):(y=i(y,k.children||[]),y.return=g,y)}function c(g,y,k,w,S){return y===null||y.tag!==7?(y=Zn(k,g.mode,w,S),y.return=g,y):(y=i(y,k),y.return=g,y)}function d(g,y,k){if(typeof y=="string"&&y!==""||typeof y=="number")return y=da(""+y,g.mode,k),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Do:return k=ps(y.type,y.key,y.props,null,g.mode,k),k.ref=ki(g,null,y),k.return=g,k;case Cr:return y=fa(y,g.mode,k),y.return=g,y;case tn:var w=y._init;return d(g,w(y._payload),k)}if(Mi(y)||mi(y))return y=Zn(y,g.mode,k,null),y.return=g,y;Wo(g,y)}return null}function f(g,y,k,w){var S=y!==null?y.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return S!==null?null:l(g,y,""+k,w);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Do:return k.key===S?a(g,y,k,w):null;case Cr:return k.key===S?u(g,y,k,w):null;case tn:return S=k._init,f(g,y,S(k._payload),w)}if(Mi(k)||mi(k))return S!==null?null:c(g,y,k,w,null);Wo(g,k)}return null}function p(g,y,k,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(k)||null,l(y,g,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Do:return g=g.get(w.key===null?k:w.key)||null,a(y,g,w,S);case Cr:return g=g.get(w.key===null?k:w.key)||null,u(y,g,w,S);case tn:var C=w._init;return p(g,y,k,C(w._payload),S)}if(Mi(w)||mi(w))return g=g.get(k)||null,c(y,g,w,S,null);Wo(y,w)}return null}function h(g,y,k,w){for(var S=null,C=null,E=y,T=y=0,D=null;E!==null&&T<k.length;T++){E.index>T?(D=E,E=null):D=E.sibling;var z=f(g,E,k[T],w);if(z===null){E===null&&(E=D);break}t&&E&&z.alternate===null&&e(g,E),y=o(z,y,T),C===null?S=z:C.sibling=z,C=z,E=D}if(T===k.length)return n(g,E),Z&&$n(g,T),S;if(E===null){for(;T<k.length;T++)E=d(g,k[T],w),E!==null&&(y=o(E,y,T),C===null?S=E:C.sibling=E,C=E);return Z&&$n(g,T),S}for(E=r(g,E);T<k.length;T++)D=p(E,g,T,k[T],w),D!==null&&(t&&D.alternate!==null&&E.delete(D.key===null?T:D.key),y=o(D,y,T),C===null?S=D:C.sibling=D,C=D);return t&&E.forEach(function(se){return e(g,se)}),Z&&$n(g,T),S}function m(g,y,k,w){var S=mi(k);if(typeof S!="function")throw Error(N(150));if(k=S.call(k),k==null)throw Error(N(151));for(var C=S=null,E=y,T=y=0,D=null,z=k.next();E!==null&&!z.done;T++,z=k.next()){E.index>T?(D=E,E=null):D=E.sibling;var se=f(g,E,z.value,w);if(se===null){E===null&&(E=D);break}t&&E&&se.alternate===null&&e(g,E),y=o(se,y,T),C===null?S=se:C.sibling=se,C=se,E=D}if(z.done)return n(g,E),Z&&$n(g,T),S;if(E===null){for(;!z.done;T++,z=k.next())z=d(g,z.value,w),z!==null&&(y=o(z,y,T),C===null?S=z:C.sibling=z,C=z);return Z&&$n(g,T),S}for(E=r(g,E);!z.done;T++,z=k.next())z=p(E,g,T,z.value,w),z!==null&&(t&&z.alternate!==null&&E.delete(z.key===null?T:z.key),y=o(z,y,T),C===null?S=z:C.sibling=z,C=z);return t&&E.forEach(function(W){return e(g,W)}),Z&&$n(g,T),S}function v(g,y,k,w){if(typeof k=="object"&&k!==null&&k.type===Nr&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Do:e:{for(var S=k.key,C=y;C!==null;){if(C.key===S){if(S=k.type,S===Nr){if(C.tag===7){n(g,C.sibling),y=i(C,k.props.children),y.return=g,g=y;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===tn&&tf(S)===C.type){n(g,C.sibling),y=i(C,k.props),y.ref=ki(g,C,k),y.return=g,g=y;break e}n(g,C);break}else e(g,C);C=C.sibling}k.type===Nr?(y=Zn(k.props.children,g.mode,w,k.key),y.return=g,g=y):(w=ps(k.type,k.key,k.props,null,g.mode,w),w.ref=ki(g,y,k),w.return=g,g=w)}return s(g);case Cr:e:{for(C=k.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===k.containerInfo&&y.stateNode.implementation===k.implementation){n(g,y.sibling),y=i(y,k.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=fa(k,g.mode,w),y.return=g,g=y}return s(g);case tn:return C=k._init,v(g,y,C(k._payload),w)}if(Mi(k))return h(g,y,k,w);if(mi(k))return m(g,y,k,w);Wo(g,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,k),y.return=g,g=y):(n(g,y),y=da(k,g.mode,w),y.return=g,g=y),s(g)):n(g,y)}return v}var Zr=pm(!0),mm=pm(!1),Ps=In(null),Ds=null,Dr=null,Sc=null;function bc(){Sc=Dr=Ds=null}function Cc(t){var e=Ps.current;X(Ps),t._currentValue=e}function hu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hr(t,e){Ds=t,Sc=Dr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(He=!0),t.firstContext=null)}function ft(t){var e=t._currentValue;if(Sc!==t)if(t={context:t,memoizedValue:e,next:null},Dr===null){if(Ds===null)throw Error(N(308));Dr=t,Ds.dependencies={lanes:0,firstContext:t}}else Dr=Dr.next=t;return e}var qn=null;function Nc(t){qn===null?qn=[t]:qn.push(t)}function gm(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Nc(e)):(n.next=i.next,i.next=n),e.interleaved=n,Kt(t,r)}function Kt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var nn=!1;function Ec(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ym(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $t(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,H&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Kt(t,n)}return i=r.interleaved,i===null?(e.next=e,Nc(r)):(e.next=i.next,i.next=e),r.interleaved=e,Kt(t,n)}function as(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dc(t,n)}}function nf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Is(t,e,n,r){var i=t.updateQueue;nn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,s===null?o=u:s.next=u,s=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==s&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(o!==null){var d=i.baseState;s=0,c=u=a=null,l=o;do{var f=l.lane,p=l.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=t,m=l;switch(f=e,p=n,m.tag){case 1:if(h=m.payload,typeof h=="function"){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=m.payload,f=typeof h=="function"?h.call(p,d,f):h,f==null)break e;d=ne({},d,f);break e;case 2:nn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=p,a=d):c=c.next=p,s|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ur|=s,t.lanes=s,t.memoizedState=d}}function rf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(N(191,i));i.call(r)}}}var No={},Rt=In(No),io=In(No),oo=In(No);function Jn(t){if(t===No)throw Error(N(174));return t}function Mc(t,e){switch(G(oo,e),G(io,t),G(Rt,No),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qa(e,t)}X(Rt),G(Rt,e)}function ei(){X(Rt),X(io),X(oo)}function vm(t){Jn(oo.current);var e=Jn(Rt.current),n=qa(e,t.type);e!==n&&(G(io,t),G(Rt,n))}function Tc(t){io.current===t&&(X(Rt),X(io))}var ee=In(0);function zs(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var oa=[];function Oc(){for(var t=0;t<oa.length;t++)oa[t]._workInProgressVersionPrimary=null;oa.length=0}var us=Jt.ReactCurrentDispatcher,sa=Jt.ReactCurrentBatchConfig,ar=0,te=null,ue=null,pe=null,js=!1,Fi=!1,so=0,xv=0;function Ee(){throw Error(N(321))}function Ac(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bt(t[n],e[n]))return!1;return!0}function Rc(t,e,n,r,i,o){if(ar=o,te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,us.current=t===null||t.memoizedState===null?bv:Cv,t=n(r,i),Fi){o=0;do{if(Fi=!1,so=0,25<=o)throw Error(N(301));o+=1,pe=ue=null,e.updateQueue=null,us.current=Nv,t=n(r,i)}while(Fi)}if(us.current=Ls,e=ue!==null&&ue.next!==null,ar=0,pe=ue=te=null,js=!1,e)throw Error(N(300));return t}function Pc(){var t=so!==0;return so=0,t}function Et(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?te.memoizedState=pe=t:pe=pe.next=t,pe}function ht(){if(ue===null){var t=te.alternate;t=t!==null?t.memoizedState:null}else t=ue.next;var e=pe===null?te.memoizedState:pe.next;if(e!==null)pe=e,ue=t;else{if(t===null)throw Error(N(310));ue=t,t={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},pe===null?te.memoizedState=pe=t:pe=pe.next=t}return pe}function lo(t,e){return typeof e=="function"?e(t):e}function la(t){var e=ht(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var r=ue,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,u=o;do{var c=u.lane;if((ar&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,s=r):a=a.next=d,te.lanes|=c,ur|=c}u=u.next}while(u!==null&&u!==o);a===null?s=r:a.next=l,bt(r,e.memoizedState)||(He=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,te.lanes|=o,ur|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function aa(t){var e=ht(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);bt(o,e.memoizedState)||(He=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function xm(){}function km(t,e){var n=te,r=ht(),i=e(),o=!bt(r.memoizedState,i);if(o&&(r.memoizedState=i,He=!0),r=r.queue,Dc(bm.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||pe!==null&&pe.memoizedState.tag&1){if(n.flags|=2048,ao(9,Sm.bind(null,n,r,i,e),void 0,null),ge===null)throw Error(N(349));ar&30||wm(n,e,i)}return i}function wm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sm(t,e,n,r){e.value=n,e.getSnapshot=r,Cm(e)&&Nm(t)}function bm(t,e,n){return n(function(){Cm(e)&&Nm(t)})}function Cm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bt(t,n)}catch{return!0}}function Nm(t){var e=Kt(t,1);e!==null&&wt(e,t,1,-1)}function of(t){var e=Et();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:t},e.queue=t,t=t.dispatch=Sv.bind(null,te,t),[e.memoizedState,t]}function ao(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Em(){return ht().memoizedState}function cs(t,e,n,r){var i=Et();te.flags|=t,i.memoizedState=ao(1|e,n,void 0,r===void 0?null:r)}function pl(t,e,n,r){var i=ht();r=r===void 0?null:r;var o=void 0;if(ue!==null){var s=ue.memoizedState;if(o=s.destroy,r!==null&&Ac(r,s.deps)){i.memoizedState=ao(e,n,o,r);return}}te.flags|=t,i.memoizedState=ao(1|e,n,o,r)}function sf(t,e){return cs(8390656,8,t,e)}function Dc(t,e){return pl(2048,8,t,e)}function Mm(t,e){return pl(4,2,t,e)}function Tm(t,e){return pl(4,4,t,e)}function Om(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Am(t,e,n){return n=n!=null?n.concat([t]):null,pl(4,4,Om.bind(null,e,t),n)}function Ic(){}function Rm(t,e){var n=ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ac(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Pm(t,e){var n=ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ac(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Dm(t,e,n){return ar&21?(bt(n,e)||(n=Bp(),te.lanes|=n,ur|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,He=!0),t.memoizedState=n)}function kv(t,e){var n=K;K=n!==0&&4>n?n:4,t(!0);var r=sa.transition;sa.transition={};try{t(!1),e()}finally{K=n,sa.transition=r}}function Im(){return ht().memoizedState}function wv(t,e,n){var r=wn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zm(t))jm(e,n);else if(n=gm(t,e,n,r),n!==null){var i=Ie();wt(n,t,r,i),Lm(n,e,r)}}function Sv(t,e,n){var r=wn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zm(t))jm(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,bt(l,s)){var a=e.interleaved;a===null?(i.next=i,Nc(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=gm(t,e,i,r),n!==null&&(i=Ie(),wt(n,t,r,i),Lm(n,e,r))}}function zm(t){var e=t.alternate;return t===te||e!==null&&e===te}function jm(t,e){Fi=js=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Lm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dc(t,n)}}var Ls={readContext:ft,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useInsertionEffect:Ee,useLayoutEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useMutableSource:Ee,useSyncExternalStore:Ee,useId:Ee,unstable_isNewReconciler:!1},bv={readContext:ft,useCallback:function(t,e){return Et().memoizedState=[t,e===void 0?null:e],t},useContext:ft,useEffect:sf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cs(4194308,4,Om.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cs(4194308,4,t,e)},useInsertionEffect:function(t,e){return cs(4,2,t,e)},useMemo:function(t,e){var n=Et();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Et();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wv.bind(null,te,t),[r.memoizedState,t]},useRef:function(t){var e=Et();return t={current:t},e.memoizedState=t},useState:of,useDebugValue:Ic,useDeferredValue:function(t){return Et().memoizedState=t},useTransition:function(){var t=of(!1),e=t[0];return t=kv.bind(null,t[1]),Et().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=te,i=Et();if(Z){if(n===void 0)throw Error(N(407));n=n()}else{if(n=e(),ge===null)throw Error(N(349));ar&30||wm(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,sf(bm.bind(null,r,o,t),[t]),r.flags|=2048,ao(9,Sm.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Et(),e=ge.identifierPrefix;if(Z){var n=Vt,r=_t;n=(r&~(1<<32-kt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=so++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Cv={readContext:ft,useCallback:Rm,useContext:ft,useEffect:Dc,useImperativeHandle:Am,useInsertionEffect:Mm,useLayoutEffect:Tm,useMemo:Pm,useReducer:la,useRef:Em,useState:function(){return la(lo)},useDebugValue:Ic,useDeferredValue:function(t){var e=ht();return Dm(e,ue.memoizedState,t)},useTransition:function(){var t=la(lo)[0],e=ht().memoizedState;return[t,e]},useMutableSource:xm,useSyncExternalStore:km,useId:Im,unstable_isNewReconciler:!1},Nv={readContext:ft,useCallback:Rm,useContext:ft,useEffect:Dc,useImperativeHandle:Am,useInsertionEffect:Mm,useLayoutEffect:Tm,useMemo:Pm,useReducer:aa,useRef:Em,useState:function(){return aa(lo)},useDebugValue:Ic,useDeferredValue:function(t){var e=ht();return ue===null?e.memoizedState=t:Dm(e,ue.memoizedState,t)},useTransition:function(){var t=aa(lo)[0],e=ht().memoizedState;return[t,e]},useMutableSource:xm,useSyncExternalStore:km,useId:Im,unstable_isNewReconciler:!1};function mt(t,e){if(t&&t.defaultProps){e=ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ml={isMounted:function(t){return(t=t._reactInternals)?mr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ie(),i=wn(t),o=$t(r,i);o.payload=e,n!=null&&(o.callback=n),e=xn(t,o,i),e!==null&&(wt(e,t,i,r),as(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ie(),i=wn(t),o=$t(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=xn(t,o,i),e!==null&&(wt(e,t,i,r),as(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ie(),r=wn(t),i=$t(n,r);i.tag=2,e!=null&&(i.callback=e),e=xn(t,i,r),e!==null&&(wt(e,t,r,n),as(e,t,r))}};function lf(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!eo(n,r)||!eo(i,o):!0}function Bm(t,e,n){var r=!1,i=An,o=e.contextType;return typeof o=="object"&&o!==null?o=ft(o):(i=Ue(e)?sr:Re.current,r=e.contextTypes,o=(r=r!=null)?Yr(t,i):An),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ml,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function af(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ml.enqueueReplaceState(e,e.state,null)}function mu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ec(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ft(o):(o=Ue(e)?sr:Re.current,i.context=Yr(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(pu(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ml.enqueueReplaceState(i,i.state,null),Is(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ti(t,e){try{var n="",r=e;do n+=Z0(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function ua(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ev=typeof WeakMap=="function"?WeakMap:Map;function Fm(t,e,n){n=$t(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fs||(Fs=!0,Eu=r),gu(t,e)},n}function _m(t,e,n){n=$t(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){gu(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){gu(t,e),typeof r!="function"&&(kn===null?kn=new Set([this]):kn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function uf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ev;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_v.bind(null,t,e,n),e.then(t,t))}function cf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function df(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$t(-1,1),e.tag=2,xn(n,e,1))),n.lanes|=1),t)}var Mv=Jt.ReactCurrentOwner,He=!1;function De(t,e,n,r){e.child=t===null?mm(e,null,n,r):Zr(e,t.child,n,r)}function ff(t,e,n,r,i){n=n.render;var o=e.ref;return Hr(e,i),r=Rc(t,e,n,r,o,i),n=Pc(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qt(t,e,i)):(Z&&n&&xc(e),e.flags|=1,De(t,e,r,i),e.child)}function hf(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!$c(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Vm(t,e,o,r,i)):(t=ps(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:eo,n(s,r)&&t.ref===e.ref)return qt(t,e,i)}return e.flags|=1,t=Sn(o,r),t.ref=e.ref,t.return=e,e.child=t}function Vm(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(eo(o,r)&&t.ref===e.ref)if(He=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(He=!0);else return e.lanes=t.lanes,qt(t,e,i)}return yu(t,e,n,r,i)}function $m(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(zr,Ye),Ye|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,G(zr,Ye),Ye|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,G(zr,Ye),Ye|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,G(zr,Ye),Ye|=r;return De(t,e,i,n),e.child}function Hm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yu(t,e,n,r,i){var o=Ue(n)?sr:Re.current;return o=Yr(e,o),Hr(e,i),n=Rc(t,e,n,r,o,i),r=Pc(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qt(t,e,i)):(Z&&r&&xc(e),e.flags|=1,De(t,e,n,i),e.child)}function pf(t,e,n,r,i){if(Ue(n)){var o=!0;Os(e)}else o=!1;if(Hr(e,i),e.stateNode===null)ds(t,e),Bm(e,n,r),mu(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=ft(u):(u=Ue(n)?sr:Re.current,u=Yr(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==u)&&af(e,s,r,u),nn=!1;var f=e.memoizedState;s.state=f,Is(e,r,s,i),a=e.memoizedState,l!==r||f!==a||We.current||nn?(typeof c=="function"&&(pu(e,n,c,r),a=e.memoizedState),(l=nn||lf(e,n,l,r,f,a,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=u,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,ym(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:mt(e.type,l),s.props=u,d=e.pendingProps,f=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=ft(a):(a=Ue(n)?sr:Re.current,a=Yr(e,a));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==d||f!==a)&&af(e,s,r,a),nn=!1,f=e.memoizedState,s.state=f,Is(e,r,s,i);var h=e.memoizedState;l!==d||f!==h||We.current||nn?(typeof p=="function"&&(pu(e,n,p,r),h=e.memoizedState),(u=nn||lf(e,n,u,r,f,h,a)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,h,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,h,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),s.props=r,s.state=h,s.context=a,r=u):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return vu(t,e,n,r,o,i)}function vu(t,e,n,r,i,o){Hm(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Xd(e,n,!1),qt(t,e,o);r=e.stateNode,Mv.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Zr(e,t.child,null,o),e.child=Zr(e,null,l,o)):De(t,e,l,o),e.memoizedState=r.state,i&&Xd(e,n,!0),e.child}function Wm(t){var e=t.stateNode;e.pendingContext?Yd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yd(t,e.context,!1),Mc(t,e.containerInfo)}function mf(t,e,n,r,i){return Xr(),wc(i),e.flags|=256,De(t,e,n,r),e.child}var xu={dehydrated:null,treeContext:null,retryLane:0};function ku(t){return{baseLanes:t,cachePool:null,transitions:null}}function Um(t,e,n){var r=e.pendingProps,i=ee.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),G(ee,i&1),t===null)return fu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=vl(s,r,0,null),t=Zn(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ku(n),e.memoizedState=xu,t):zc(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Tv(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Sn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Sn(l,o):(o=Zn(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?ku(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=xu,r}return o=t.child,t=o.sibling,r=Sn(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zc(t,e){return e=vl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uo(t,e,n,r){return r!==null&&wc(r),Zr(e,t.child,null,n),t=zc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Tv(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=ua(Error(N(422))),Uo(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=vl({mode:"visible",children:r.children},i,0,null),o=Zn(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Zr(e,t.child,null,s),e.child.memoizedState=ku(s),e.memoizedState=xu,o);if(!(e.mode&1))return Uo(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(N(419)),r=ua(o,r,void 0),Uo(t,e,s,r)}if(l=(s&t.childLanes)!==0,He||l){if(r=ge,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Kt(t,i),wt(r,t,i,-1))}return Vc(),r=ua(Error(N(421))),Uo(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Vv.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ze=vn(i.nextSibling),et=e,Z=!0,yt=null,t!==null&&(ot[st++]=_t,ot[st++]=Vt,ot[st++]=lr,_t=t.id,Vt=t.overflow,lr=e),e=zc(e,r.children),e.flags|=4096,e)}function gf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),hu(t.return,e,n)}function ca(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Km(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(De(t,e,r.children,n),r=ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gf(t,n,e);else if(t.tag===19)gf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(G(ee,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&zs(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ca(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&zs(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ca(e,!0,n,null,o);break;case"together":ca(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ds(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ur|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(N(153));if(e.child!==null){for(t=e.child,n=Sn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Sn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ov(t,e,n){switch(e.tag){case 3:Wm(e),Xr();break;case 5:vm(e);break;case 1:Ue(e.type)&&Os(e);break;case 4:Mc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;G(Ps,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(G(ee,ee.current&1),e.flags|=128,null):n&e.child.childLanes?Um(t,e,n):(G(ee,ee.current&1),t=qt(t,e,n),t!==null?t.sibling:null);G(ee,ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Km(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),G(ee,ee.current),r)break;return null;case 22:case 23:return e.lanes=0,$m(t,e,n)}return qt(t,e,n)}var qm,wu,Jm,Gm;qm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wu=function(){};Jm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Jn(Rt.current);var o=null;switch(n){case"input":i=Ha(t,i),r=Ha(t,r),o=[];break;case"select":i=ne({},i,{value:void 0}),r=ne({},r,{value:void 0}),o=[];break;case"textarea":i=Ka(t,i),r=Ka(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ms)}Ja(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(qi.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(o||(o=[]),o.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(qi.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Y("scroll",t),o||l===a||(o=[])):(o=o||[]).push(u,a))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};Gm=function(t,e,n,r){n!==r&&(e.flags|=4)};function wi(t,e){if(!Z)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Me(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Av(t,e,n){var r=e.pendingProps;switch(kc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(e),null;case 1:return Ue(e.type)&&Ts(),Me(e),null;case 3:return r=e.stateNode,ei(),X(We),X(Re),Oc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ho(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yt!==null&&(Ou(yt),yt=null))),wu(t,e),Me(e),null;case 5:Tc(e);var i=Jn(oo.current);if(n=e.type,t!==null&&e.stateNode!=null)Jm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(N(166));return Me(e),null}if(t=Jn(Rt.current),Ho(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Tt]=e,r[ro]=o,t=(e.mode&1)!==0,n){case"dialog":Y("cancel",r),Y("close",r);break;case"iframe":case"object":case"embed":Y("load",r);break;case"video":case"audio":for(i=0;i<Oi.length;i++)Y(Oi[i],r);break;case"source":Y("error",r);break;case"img":case"image":case"link":Y("error",r),Y("load",r);break;case"details":Y("toggle",r);break;case"input":Cd(r,o),Y("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Y("invalid",r);break;case"textarea":Ed(r,o),Y("invalid",r)}Ja(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&$o(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&$o(r.textContent,l,t),i=["children",""+l]):qi.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Y("scroll",r)}switch(n){case"input":Io(r),Nd(r,o,!0);break;case"textarea":Io(r),Md(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ms)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Tt]=e,t[ro]=r,qm(t,e,!1,!1),e.stateNode=t;e:{switch(s=Ga(n,r),n){case"dialog":Y("cancel",t),Y("close",t),i=r;break;case"iframe":case"object":case"embed":Y("load",t),i=r;break;case"video":case"audio":for(i=0;i<Oi.length;i++)Y(Oi[i],t);i=r;break;case"source":Y("error",t),i=r;break;case"img":case"image":case"link":Y("error",t),Y("load",t),i=r;break;case"details":Y("toggle",t),i=r;break;case"input":Cd(t,r),i=Ha(t,r),Y("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ne({},r,{value:void 0}),Y("invalid",t);break;case"textarea":Ed(t,r),i=Ka(t,r),Y("invalid",t);break;default:i=r}Ja(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?Ep(t,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Cp(t,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Ji(t,a):typeof a=="number"&&Ji(t,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(qi.hasOwnProperty(o)?a!=null&&o==="onScroll"&&Y("scroll",t):a!=null&&oc(t,o,a,s))}switch(n){case"input":Io(t),Nd(t,r,!1);break;case"textarea":Io(t),Md(t);break;case"option":r.value!=null&&t.setAttribute("value",""+On(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Fr(t,!!r.multiple,o,!1):r.defaultValue!=null&&Fr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ms)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Me(e),null;case 6:if(t&&e.stateNode!=null)Gm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(N(166));if(n=Jn(oo.current),Jn(Rt.current),Ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tt]=e,(o=r.nodeValue!==n)&&(t=et,t!==null))switch(t.tag){case 3:$o(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$o(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tt]=e,e.stateNode=r}return Me(e),null;case 13:if(X(ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Z&&Ze!==null&&e.mode&1&&!(e.flags&128))hm(),Xr(),e.flags|=98560,o=!1;else if(o=Ho(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(N(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(N(317));o[Tt]=e}else Xr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Me(e),o=!1}else yt!==null&&(Ou(yt),yt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ee.current&1?de===0&&(de=3):Vc())),e.updateQueue!==null&&(e.flags|=4),Me(e),null);case 4:return ei(),wu(t,e),t===null&&to(e.stateNode.containerInfo),Me(e),null;case 10:return Cc(e.type._context),Me(e),null;case 17:return Ue(e.type)&&Ts(),Me(e),null;case 19:if(X(ee),o=e.memoizedState,o===null)return Me(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)wi(o,!1);else{if(de!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=zs(t),s!==null){for(e.flags|=128,wi(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return G(ee,ee.current&1|2),e.child}t=t.sibling}o.tail!==null&&oe()>ni&&(e.flags|=128,r=!0,wi(o,!1),e.lanes=4194304)}else{if(!r)if(t=zs(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Z)return Me(e),null}else 2*oe()-o.renderingStartTime>ni&&n!==1073741824&&(e.flags|=128,r=!0,wi(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=oe(),e.sibling=null,n=ee.current,G(ee,r?n&1|2:n&1),e):(Me(e),null);case 22:case 23:return _c(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ye&1073741824&&(Me(e),e.subtreeFlags&6&&(e.flags|=8192)):Me(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function Rv(t,e){switch(kc(e),e.tag){case 1:return Ue(e.type)&&Ts(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ei(),X(We),X(Re),Oc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tc(e),null;case 13:if(X(ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(N(340));Xr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return X(ee),null;case 4:return ei(),null;case 10:return Cc(e.type._context),null;case 22:case 23:return _c(),null;case 24:return null;default:return null}}var Ko=!1,Oe=!1,Pv=typeof WeakSet=="function"?WeakSet:Set,R=null;function Ir(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){re(t,e,r)}else n.current=null}function Su(t,e,n){try{n()}catch(r){re(t,e,r)}}var yf=!1;function Dv(t,e){if(ou=Cs,t=em(),vc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,a=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(l=s+i),d!==o||r!==0&&d.nodeType!==3||(a=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++u===i&&(l=s),f===o&&++c===r&&(a=s),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(su={focusedElem:t,selectionRange:n},Cs=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var m=h.memoizedProps,v=h.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:mt(e.type,m),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(w){re(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return h=yf,yf=!1,h}function _i(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Su(e,n,o)}i=i.next}while(i!==r)}}function gl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Qm(t){var e=t.alternate;e!==null&&(t.alternate=null,Qm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tt],delete e[ro],delete e[uu],delete e[mv],delete e[gv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ym(t){return t.tag===5||t.tag===3||t.tag===4}function vf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ym(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ms));else if(r!==4&&(t=t.child,t!==null))for(Cu(t,e,n),t=t.sibling;t!==null;)Cu(t,e,n),t=t.sibling}function Nu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Nu(t,e,n),t=t.sibling;t!==null;)Nu(t,e,n),t=t.sibling}var ke=null,gt=!1;function Yt(t,e,n){for(n=n.child;n!==null;)Xm(t,e,n),n=n.sibling}function Xm(t,e,n){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(al,n)}catch{}switch(n.tag){case 5:Oe||Ir(n,e);case 6:var r=ke,i=gt;ke=null,Yt(t,e,n),ke=r,gt=i,ke!==null&&(gt?(t=ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ke.removeChild(n.stateNode));break;case 18:ke!==null&&(gt?(t=ke,n=n.stateNode,t.nodeType===8?ra(t.parentNode,n):t.nodeType===1&&ra(t,n),Xi(t)):ra(ke,n.stateNode));break;case 4:r=ke,i=gt,ke=n.stateNode.containerInfo,gt=!0,Yt(t,e,n),ke=r,gt=i;break;case 0:case 11:case 14:case 15:if(!Oe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Su(n,e,s),i=i.next}while(i!==r)}Yt(t,e,n);break;case 1:if(!Oe&&(Ir(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){re(n,e,l)}Yt(t,e,n);break;case 21:Yt(t,e,n);break;case 22:n.mode&1?(Oe=(r=Oe)||n.memoizedState!==null,Yt(t,e,n),Oe=r):Yt(t,e,n);break;default:Yt(t,e,n)}}function xf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Pv),e.forEach(function(r){var i=$v.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function pt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:ke=l.stateNode,gt=!1;break e;case 3:ke=l.stateNode.containerInfo,gt=!0;break e;case 4:ke=l.stateNode.containerInfo,gt=!0;break e}l=l.return}if(ke===null)throw Error(N(160));Xm(o,s,i),ke=null,gt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){re(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zm(e,t),e=e.sibling}function Zm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pt(e,t),Nt(t),r&4){try{_i(3,t,t.return),gl(3,t)}catch(m){re(t,t.return,m)}try{_i(5,t,t.return)}catch(m){re(t,t.return,m)}}break;case 1:pt(e,t),Nt(t),r&512&&n!==null&&Ir(n,n.return);break;case 5:if(pt(e,t),Nt(t),r&512&&n!==null&&Ir(n,n.return),t.flags&32){var i=t.stateNode;try{Ji(i,"")}catch(m){re(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&wp(i,o),Ga(l,s);var u=Ga(l,o);for(s=0;s<a.length;s+=2){var c=a[s],d=a[s+1];c==="style"?Ep(i,d):c==="dangerouslySetInnerHTML"?Cp(i,d):c==="children"?Ji(i,d):oc(i,c,d,u)}switch(l){case"input":Wa(i,o);break;case"textarea":Sp(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Fr(i,!!o.multiple,p,!1):f!==!!o.multiple&&(o.defaultValue!=null?Fr(i,!!o.multiple,o.defaultValue,!0):Fr(i,!!o.multiple,o.multiple?[]:"",!1))}i[ro]=o}catch(m){re(t,t.return,m)}}break;case 6:if(pt(e,t),Nt(t),r&4){if(t.stateNode===null)throw Error(N(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(m){re(t,t.return,m)}}break;case 3:if(pt(e,t),Nt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xi(e.containerInfo)}catch(m){re(t,t.return,m)}break;case 4:pt(e,t),Nt(t);break;case 13:pt(e,t),Nt(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Bc=oe())),r&4&&xf(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Oe=(u=Oe)||c,pt(e,t),Oe=u):pt(e,t),Nt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(R=t,c=t.child;c!==null;){for(d=R=c;R!==null;){switch(f=R,p=f.child,f.tag){case 0:case 11:case 14:case 15:_i(4,f,f.return);break;case 1:Ir(f,f.return);var h=f.stateNode;if(typeof h.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(m){re(r,n,m)}}break;case 5:Ir(f,f.return);break;case 22:if(f.memoizedState!==null){wf(d);continue}}p!==null?(p.return=f,R=p):wf(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,a=d.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Np("display",s))}catch(m){re(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){re(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:pt(e,t),Nt(t),r&4&&xf(t);break;case 21:break;default:pt(e,t),Nt(t)}}function Nt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ym(n)){var r=n;break e}n=n.return}throw Error(N(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ji(i,""),r.flags&=-33);var o=vf(t);Nu(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=vf(t);Cu(t,l,s);break;default:throw Error(N(161))}}catch(a){re(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Iv(t,e,n){R=t,eg(t)}function eg(t,e,n){for(var r=(t.mode&1)!==0;R!==null;){var i=R,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Ko;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Oe;l=Ko;var u=Oe;if(Ko=s,(Oe=a)&&!u)for(R=i;R!==null;)s=R,a=s.child,s.tag===22&&s.memoizedState!==null?Sf(i):a!==null?(a.return=s,R=a):Sf(i);for(;o!==null;)R=o,eg(o),o=o.sibling;R=i,Ko=l,Oe=u}kf(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,R=o):kf(t)}}function kf(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Oe||gl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Oe)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:mt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&rf(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rf(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Xi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Oe||e.flags&512&&bu(e)}catch(f){re(e,e.return,f)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function wf(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function Sf(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gl(4,e)}catch(a){re(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){re(e,i,a)}}var o=e.return;try{bu(e)}catch(a){re(e,o,a)}break;case 5:var s=e.return;try{bu(e)}catch(a){re(e,s,a)}}}catch(a){re(e,e.return,a)}if(e===t){R=null;break}var l=e.sibling;if(l!==null){l.return=e.return,R=l;break}R=e.return}}var zv=Math.ceil,Bs=Jt.ReactCurrentDispatcher,jc=Jt.ReactCurrentOwner,ct=Jt.ReactCurrentBatchConfig,H=0,ge=null,le=null,Ce=0,Ye=0,zr=In(0),de=0,uo=null,ur=0,yl=0,Lc=0,Vi=null,$e=null,Bc=0,ni=1/0,Lt=null,Fs=!1,Eu=null,kn=null,qo=!1,cn=null,_s=0,$i=0,Mu=null,fs=-1,hs=0;function Ie(){return H&6?oe():fs!==-1?fs:fs=oe()}function wn(t){return t.mode&1?H&2&&Ce!==0?Ce&-Ce:vv.transition!==null?(hs===0&&(hs=Bp()),hs):(t=K,t!==0||(t=window.event,t=t===void 0?16:Up(t.type)),t):1}function wt(t,e,n,r){if(50<$i)throw $i=0,Mu=null,Error(N(185));So(t,n,r),(!(H&2)||t!==ge)&&(t===ge&&(!(H&2)&&(yl|=n),de===4&&ln(t,Ce)),Ke(t,r),n===1&&H===0&&!(e.mode&1)&&(ni=oe()+500,hl&&zn()))}function Ke(t,e){var n=t.callbackNode;v1(t,e);var r=bs(t,t===ge?Ce:0);if(r===0)n!==null&&Ad(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ad(n),e===1)t.tag===0?yv(bf.bind(null,t)):cm(bf.bind(null,t)),hv(function(){!(H&6)&&zn()}),n=null;else{switch(Fp(r)){case 1:n=cc;break;case 4:n=jp;break;case 16:n=Ss;break;case 536870912:n=Lp;break;default:n=Ss}n=ag(n,tg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tg(t,e){if(fs=-1,hs=0,H&6)throw Error(N(327));var n=t.callbackNode;if(Wr()&&t.callbackNode!==n)return null;var r=bs(t,t===ge?Ce:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Vs(t,r);else{e=r;var i=H;H|=2;var o=rg();(ge!==t||Ce!==e)&&(Lt=null,ni=oe()+500,Xn(t,e));do try{Bv();break}catch(l){ng(t,l)}while(!0);bc(),Bs.current=o,H=i,le!==null?e=0:(ge=null,Ce=0,e=de)}if(e!==0){if(e===2&&(i=eu(t),i!==0&&(r=i,e=Tu(t,i))),e===1)throw n=uo,Xn(t,0),ln(t,r),Ke(t,oe()),n;if(e===6)ln(t,r);else{if(i=t.current.alternate,!(r&30)&&!jv(i)&&(e=Vs(t,r),e===2&&(o=eu(t),o!==0&&(r=o,e=Tu(t,o))),e===1))throw n=uo,Xn(t,0),ln(t,r),Ke(t,oe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(N(345));case 2:Hn(t,$e,Lt);break;case 3:if(ln(t,r),(r&130023424)===r&&(e=Bc+500-oe(),10<e)){if(bs(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ie(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=au(Hn.bind(null,t,$e,Lt),e);break}Hn(t,$e,Lt);break;case 4:if(ln(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-kt(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zv(r/1960))-r,10<r){t.timeoutHandle=au(Hn.bind(null,t,$e,Lt),r);break}Hn(t,$e,Lt);break;case 5:Hn(t,$e,Lt);break;default:throw Error(N(329))}}}return Ke(t,oe()),t.callbackNode===n?tg.bind(null,t):null}function Tu(t,e){var n=Vi;return t.current.memoizedState.isDehydrated&&(Xn(t,e).flags|=256),t=Vs(t,e),t!==2&&(e=$e,$e=n,e!==null&&Ou(e)),t}function Ou(t){$e===null?$e=t:$e.push.apply($e,t)}function jv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!bt(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ln(t,e){for(e&=~Lc,e&=~yl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kt(e),r=1<<n;t[n]=-1,e&=~r}}function bf(t){if(H&6)throw Error(N(327));Wr();var e=bs(t,0);if(!(e&1))return Ke(t,oe()),null;var n=Vs(t,e);if(t.tag!==0&&n===2){var r=eu(t);r!==0&&(e=r,n=Tu(t,r))}if(n===1)throw n=uo,Xn(t,0),ln(t,e),Ke(t,oe()),n;if(n===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hn(t,$e,Lt),Ke(t,oe()),null}function Fc(t,e){var n=H;H|=1;try{return t(e)}finally{H=n,H===0&&(ni=oe()+500,hl&&zn())}}function cr(t){cn!==null&&cn.tag===0&&!(H&6)&&Wr();var e=H;H|=1;var n=ct.transition,r=K;try{if(ct.transition=null,K=1,t)return t()}finally{K=r,ct.transition=n,H=e,!(H&6)&&zn()}}function _c(){Ye=zr.current,X(zr)}function Xn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,fv(n)),le!==null)for(n=le.return;n!==null;){var r=n;switch(kc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ts();break;case 3:ei(),X(We),X(Re),Oc();break;case 5:Tc(r);break;case 4:ei();break;case 13:X(ee);break;case 19:X(ee);break;case 10:Cc(r.type._context);break;case 22:case 23:_c()}n=n.return}if(ge=t,le=t=Sn(t.current,null),Ce=Ye=e,de=0,uo=null,Lc=yl=ur=0,$e=Vi=null,qn!==null){for(e=0;e<qn.length;e++)if(n=qn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}qn=null}return t}function ng(t,e){do{var n=le;try{if(bc(),us.current=Ls,js){for(var r=te.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}js=!1}if(ar=0,pe=ue=te=null,Fi=!1,so=0,jc.current=null,n===null||n.return===null){de=1,uo=e,le=null;break}e:{var o=t,s=n.return,l=n,a=e;if(e=Ce,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=cf(s);if(p!==null){p.flags&=-257,df(p,s,l,o,e),p.mode&1&&uf(o,u,e),e=p,a=u;var h=e.updateQueue;if(h===null){var m=new Set;m.add(a),e.updateQueue=m}else h.add(a);break e}else{if(!(e&1)){uf(o,u,e),Vc();break e}a=Error(N(426))}}else if(Z&&l.mode&1){var v=cf(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),df(v,s,l,o,e),wc(ti(a,l));break e}}o=a=ti(a,l),de!==4&&(de=2),Vi===null?Vi=[o]:Vi.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=Fm(o,a,e);nf(o,g);break e;case 1:l=a;var y=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(kn===null||!kn.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var w=_m(o,l,e);nf(o,w);break e}}o=o.return}while(o!==null)}og(n)}catch(S){e=S,le===n&&n!==null&&(le=n=n.return);continue}break}while(!0)}function rg(){var t=Bs.current;return Bs.current=Ls,t===null?Ls:t}function Vc(){(de===0||de===3||de===2)&&(de=4),ge===null||!(ur&268435455)&&!(yl&268435455)||ln(ge,Ce)}function Vs(t,e){var n=H;H|=2;var r=rg();(ge!==t||Ce!==e)&&(Lt=null,Xn(t,e));do try{Lv();break}catch(i){ng(t,i)}while(!0);if(bc(),H=n,Bs.current=r,le!==null)throw Error(N(261));return ge=null,Ce=0,de}function Lv(){for(;le!==null;)ig(le)}function Bv(){for(;le!==null&&!u1();)ig(le)}function ig(t){var e=lg(t.alternate,t,Ye);t.memoizedProps=t.pendingProps,e===null?og(t):le=e,jc.current=null}function og(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Rv(n,e),n!==null){n.flags&=32767,le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{de=6,le=null;return}}else if(n=Av(n,e,Ye),n!==null){le=n;return}if(e=e.sibling,e!==null){le=e;return}le=e=t}while(e!==null);de===0&&(de=5)}function Hn(t,e,n){var r=K,i=ct.transition;try{ct.transition=null,K=1,Fv(t,e,n,r)}finally{ct.transition=i,K=r}return null}function Fv(t,e,n,r){do Wr();while(cn!==null);if(H&6)throw Error(N(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(x1(t,o),t===ge&&(le=ge=null,Ce=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qo||(qo=!0,ag(Ss,function(){return Wr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ct.transition,ct.transition=null;var s=K;K=1;var l=H;H|=4,jc.current=null,Dv(t,n),Zm(n,t),ov(su),Cs=!!ou,su=ou=null,t.current=n,Iv(n),c1(),H=l,K=s,ct.transition=o}else t.current=n;if(qo&&(qo=!1,cn=t,_s=i),o=t.pendingLanes,o===0&&(kn=null),h1(n.stateNode),Ke(t,oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Fs)throw Fs=!1,t=Eu,Eu=null,t;return _s&1&&t.tag!==0&&Wr(),o=t.pendingLanes,o&1?t===Mu?$i++:($i=0,Mu=t):$i=0,zn(),null}function Wr(){if(cn!==null){var t=Fp(_s),e=ct.transition,n=K;try{if(ct.transition=null,K=16>t?16:t,cn===null)var r=!1;else{if(t=cn,cn=null,_s=0,H&6)throw Error(N(331));var i=H;for(H|=4,R=t.current;R!==null;){var o=R,s=o.child;if(R.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(R=u;R!==null;){var c=R;switch(c.tag){case 0:case 11:case 15:_i(8,c,o)}var d=c.child;if(d!==null)d.return=c,R=d;else for(;R!==null;){c=R;var f=c.sibling,p=c.return;if(Qm(c),c===u){R=null;break}if(f!==null){f.return=p,R=f;break}R=p}}}var h=o.alternate;if(h!==null){var m=h.child;if(m!==null){h.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}R=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,R=s;else e:for(;R!==null;){if(o=R,o.flags&2048)switch(o.tag){case 0:case 11:case 15:_i(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,R=g;break e}R=o.return}}var y=t.current;for(R=y;R!==null;){s=R;var k=s.child;if(s.subtreeFlags&2064&&k!==null)k.return=s,R=k;else e:for(s=y;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:gl(9,l)}}catch(S){re(l,l.return,S)}if(l===s){R=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,R=w;break e}R=l.return}}if(H=i,zn(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(al,t)}catch{}r=!0}return r}finally{K=n,ct.transition=e}}return!1}function Cf(t,e,n){e=ti(n,e),e=Fm(t,e,1),t=xn(t,e,1),e=Ie(),t!==null&&(So(t,1,e),Ke(t,e))}function re(t,e,n){if(t.tag===3)Cf(t,t,n);else for(;e!==null;){if(e.tag===3){Cf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(kn===null||!kn.has(r))){t=ti(n,t),t=_m(e,t,1),e=xn(e,t,1),t=Ie(),e!==null&&(So(e,1,t),Ke(e,t));break}}e=e.return}}function _v(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ie(),t.pingedLanes|=t.suspendedLanes&n,ge===t&&(Ce&n)===n&&(de===4||de===3&&(Ce&130023424)===Ce&&500>oe()-Bc?Xn(t,0):Lc|=n),Ke(t,e)}function sg(t,e){e===0&&(t.mode&1?(e=Lo,Lo<<=1,!(Lo&130023424)&&(Lo=4194304)):e=1);var n=Ie();t=Kt(t,e),t!==null&&(So(t,e,n),Ke(t,n))}function Vv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sg(t,n)}function $v(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(N(314))}r!==null&&r.delete(e),sg(t,n)}var lg;lg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||We.current)He=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return He=!1,Ov(t,e,n);He=!!(t.flags&131072)}else He=!1,Z&&e.flags&1048576&&dm(e,Rs,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ds(t,e),t=e.pendingProps;var i=Yr(e,Re.current);Hr(e,n),i=Rc(null,e,r,t,i,n);var o=Pc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ue(r)?(o=!0,Os(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ec(e),i.updater=ml,e.stateNode=i,i._reactInternals=e,mu(e,r,t,n),e=vu(null,e,r,!0,o,n)):(e.tag=0,Z&&o&&xc(e),De(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ds(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Wv(r),t=mt(r,t),i){case 0:e=yu(null,e,r,t,n);break e;case 1:e=pf(null,e,r,t,n);break e;case 11:e=ff(null,e,r,t,n);break e;case 14:e=hf(null,e,r,mt(r.type,t),n);break e}throw Error(N(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mt(r,i),yu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mt(r,i),pf(t,e,r,i,n);case 3:e:{if(Wm(e),t===null)throw Error(N(387));r=e.pendingProps,o=e.memoizedState,i=o.element,ym(t,e),Is(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ti(Error(N(423)),e),e=mf(t,e,r,n,i);break e}else if(r!==i){i=ti(Error(N(424)),e),e=mf(t,e,r,n,i);break e}else for(Ze=vn(e.stateNode.containerInfo.firstChild),et=e,Z=!0,yt=null,n=mm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xr(),r===i){e=qt(t,e,n);break e}De(t,e,r,n)}e=e.child}return e;case 5:return vm(e),t===null&&fu(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,lu(r,i)?s=null:o!==null&&lu(r,o)&&(e.flags|=32),Hm(t,e),De(t,e,s,n),e.child;case 6:return t===null&&fu(e),null;case 13:return Um(t,e,n);case 4:return Mc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zr(e,null,r,n):De(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mt(r,i),ff(t,e,r,i,n);case 7:return De(t,e,e.pendingProps,n),e.child;case 8:return De(t,e,e.pendingProps.children,n),e.child;case 12:return De(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,G(Ps,r._currentValue),r._currentValue=s,o!==null)if(bt(o.value,s)){if(o.children===i.children&&!We.current){e=qt(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=$t(-1,n&-n),a.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),hu(o.return,n,e),l.lanes|=n;break}a=a.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(N(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),hu(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}De(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Hr(e,n),i=ft(i),r=r(i),e.flags|=1,De(t,e,r,n),e.child;case 14:return r=e.type,i=mt(r,e.pendingProps),i=mt(r.type,i),hf(t,e,r,i,n);case 15:return Vm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mt(r,i),ds(t,e),e.tag=1,Ue(r)?(t=!0,Os(e)):t=!1,Hr(e,n),Bm(e,r,i),mu(e,r,i,n),vu(null,e,r,!0,t,n);case 19:return Km(t,e,n);case 22:return $m(t,e,n)}throw Error(N(156,e.tag))};function ag(t,e){return zp(t,e)}function Hv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function at(t,e,n,r){return new Hv(t,e,n,r)}function $c(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wv(t){if(typeof t=="function")return $c(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lc)return 11;if(t===ac)return 14}return 2}function Sn(t,e){var n=t.alternate;return n===null?(n=at(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ps(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")$c(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Nr:return Zn(n.children,i,o,e);case sc:s=8,i|=8;break;case Fa:return t=at(12,n,e,i|2),t.elementType=Fa,t.lanes=o,t;case _a:return t=at(13,n,e,i),t.elementType=_a,t.lanes=o,t;case Va:return t=at(19,n,e,i),t.elementType=Va,t.lanes=o,t;case vp:return vl(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gp:s=10;break e;case yp:s=9;break e;case lc:s=11;break e;case ac:s=14;break e;case tn:s=16,r=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return e=at(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Zn(t,e,n,r){return t=at(7,t,r,e),t.lanes=n,t}function vl(t,e,n,r){return t=at(22,t,r,e),t.elementType=vp,t.lanes=n,t.stateNode={isHidden:!1},t}function da(t,e,n){return t=at(6,t,null,e),t.lanes=n,t}function fa(t,e,n){return e=at(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Uv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kl(0),this.expirationTimes=Kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hc(t,e,n,r,i,o,s,l,a){return t=new Uv(t,e,n,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=at(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ec(o),t}function Kv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ug(t){if(!t)return An;t=t._reactInternals;e:{if(mr(t)!==t||t.tag!==1)throw Error(N(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ue(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(t.tag===1){var n=t.type;if(Ue(n))return um(t,n,e)}return e}function cg(t,e,n,r,i,o,s,l,a){return t=Hc(n,r,!0,t,i,o,s,l,a),t.context=ug(null),n=t.current,r=Ie(),i=wn(n),o=$t(r,i),o.callback=e??null,xn(n,o,i),t.current.lanes=i,So(t,i,r),Ke(t,r),t}function xl(t,e,n,r){var i=e.current,o=Ie(),s=wn(i);return n=ug(n),e.context===null?e.context=n:e.pendingContext=n,e=$t(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xn(i,e,s),t!==null&&(wt(t,i,s,o),as(t,i,s)),s}function $s(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wc(t,e){Nf(t,e),(t=t.alternate)&&Nf(t,e)}function qv(){return null}var dg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uc(t){this._internalRoot=t}kl.prototype.render=Uc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(N(409));xl(t,e,null,null)};kl.prototype.unmount=Uc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cr(function(){xl(null,t,null,null)}),e[Ut]=null}};function kl(t){this._internalRoot=t}kl.prototype.unstable_scheduleHydration=function(t){if(t){var e=$p();t={blockedOn:null,target:t,priority:e};for(var n=0;n<sn.length&&e!==0&&e<sn[n].priority;n++);sn.splice(n,0,t),n===0&&Wp(t)}};function Kc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ef(){}function Jv(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=$s(s);o.call(u)}}var s=cg(e,r,t,0,null,!1,!1,"",Ef);return t._reactRootContainer=s,t[Ut]=s.current,to(t.nodeType===8?t.parentNode:t),cr(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=$s(a);l.call(u)}}var a=Hc(t,0,!1,null,null,!1,!1,"",Ef);return t._reactRootContainer=a,t[Ut]=a.current,to(t.nodeType===8?t.parentNode:t),cr(function(){xl(e,a,n,r)}),a}function Sl(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=$s(s);l.call(a)}}xl(e,s,t,i)}else s=Jv(n,e,t,i,r);return $s(s)}_p=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ti(e.pendingLanes);n!==0&&(dc(e,n|1),Ke(e,oe()),!(H&6)&&(ni=oe()+500,zn()))}break;case 13:cr(function(){var r=Kt(t,1);if(r!==null){var i=Ie();wt(r,t,1,i)}}),Wc(t,1)}};fc=function(t){if(t.tag===13){var e=Kt(t,134217728);if(e!==null){var n=Ie();wt(e,t,134217728,n)}Wc(t,134217728)}};Vp=function(t){if(t.tag===13){var e=wn(t),n=Kt(t,e);if(n!==null){var r=Ie();wt(n,t,e,r)}Wc(t,e)}};$p=function(){return K};Hp=function(t,e){var n=K;try{return K=t,e()}finally{K=n}};Ya=function(t,e,n){switch(e){case"input":if(Wa(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=fl(r);if(!i)throw Error(N(90));kp(r),Wa(r,i)}}}break;case"textarea":Sp(t,n);break;case"select":e=n.value,e!=null&&Fr(t,!!n.multiple,e,!1)}};Op=Fc;Ap=cr;var Gv={usingClientEntryPoint:!1,Events:[Co,Or,fl,Mp,Tp,Fc]},Si={findFiberByHostInstance:Kn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qv={bundleType:Si.bundleType,version:Si.version,rendererPackageName:Si.rendererPackageName,rendererConfig:Si.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dp(t),t===null?null:t.stateNode},findFiberByHostInstance:Si.findFiberByHostInstance||qv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jo.isDisabled&&Jo.supportsFiber)try{al=Jo.inject(Qv),At=Jo}catch{}}nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gv;nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kc(e))throw Error(N(200));return Kv(t,e,null,n)};nt.createRoot=function(t,e){if(!Kc(t))throw Error(N(299));var n=!1,r="",i=dg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Hc(t,1,!1,null,null,n,!1,r,i),t[Ut]=e.current,to(t.nodeType===8?t.parentNode:t),new Uc(e)};nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=Dp(e),t=t===null?null:t.stateNode,t};nt.flushSync=function(t){return cr(t)};nt.hydrate=function(t,e,n){if(!wl(e))throw Error(N(200));return Sl(null,t,e,!0,n)};nt.hydrateRoot=function(t,e,n){if(!Kc(t))throw Error(N(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=dg;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=cg(e,null,t,1,n??null,i,!1,o,s),t[Ut]=e.current,to(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new kl(e)};nt.render=function(t,e,n){if(!wl(e))throw Error(N(200));return Sl(null,t,e,!1,n)};nt.unmountComponentAtNode=function(t){if(!wl(t))throw Error(N(40));return t._reactRootContainer?(cr(function(){Sl(null,null,t,!1,function(){t._reactRootContainer=null,t[Ut]=null})}),!0):!1};nt.unstable_batchedUpdates=Fc;nt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wl(n))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return Sl(t,e,n,!1,r)};nt.version="18.3.1-next-f1338f8080-20240426";function fg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fg)}catch(t){console.error(t)}}fg(),fp.exports=nt;var hg=fp.exports;const Yv=ep(hg);var pg,Mf=hg;pg=Mf.createRoot,Mf.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function co(){return co=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},co.apply(this,arguments)}var dn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dn||(dn={}));const Tf="popstate";function Xv(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:l}=r.location;return Au("",{pathname:o,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:gg(i)}return ex(e,n,null,t)}function fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Zv(){return Math.random().toString(36).substr(2,8)}function Of(t,e){return{usr:t.state,key:t.key,idx:e}}function Au(t,e,n,r){return n===void 0&&(n=null),co({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fi(e):e,{state:n,key:e&&e.key||r||Zv()})}function gg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function fi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ex(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l=dn.Pop,a=null,u=c();u==null&&(u=0,s.replaceState(co({},s.state,{idx:u}),""));function c(){return(s.state||{idx:null}).idx}function d(){l=dn.Pop;let v=c(),g=v==null?null:v-u;u=v,a&&a({action:l,location:m.location,delta:g})}function f(v,g){l=dn.Push;let y=Au(m.location,v,g);u=c()+1;let k=Of(y,u),w=m.createHref(y);try{s.pushState(k,"",w)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(w)}o&&a&&a({action:l,location:m.location,delta:1})}function p(v,g){l=dn.Replace;let y=Au(m.location,v,g);u=c();let k=Of(y,u),w=m.createHref(y);s.replaceState(k,"",w),o&&a&&a({action:l,location:m.location,delta:0})}function h(v){let g=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof v=="string"?v:gg(v);return y=y.replace(/ $/,"%20"),fe(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let m={get action(){return l},get location(){return t(i,s)},listen(v){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(Tf,d),a=v,()=>{i.removeEventListener(Tf,d),a=null}},createHref(v){return e(i,v)},createURL:h,encodeLocation(v){let g=h(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(v){return s.go(v)}};return m}var Af;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Af||(Af={}));function tx(t,e,n){return n===void 0&&(n="/"),nx(t,e,n,!1)}function nx(t,e,n,r){let i=typeof e=="string"?fi(e):e,o=xg(i.pathname||"/",n);if(o==null)return null;let s=yg(t);rx(s);let l=null;for(let a=0;l==null&&a<s.length;++a){let u=px(o);l=fx(s[a],u,r)}return l}function yg(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,l)=>{let a={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};a.relativePath.startsWith("/")&&(fe(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=er([r,a.relativePath]),c=n.concat(a);o.children&&o.children.length>0&&(fe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),yg(o.children,e,c,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:cx(u,o.index),routesMeta:c})};return t.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,s);else for(let a of vg(o.path))i(o,s,a)}),e}function vg(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=vg(r.join("/")),l=[];return l.push(...s.map(a=>a===""?o:[o,a].join("/"))),i&&l.push(...s),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function rx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:dx(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ix=/^:[\w-]+$/,ox=3,sx=2,lx=1,ax=10,ux=-2,Rf=t=>t==="*";function cx(t,e){let n=t.split("/"),r=n.length;return n.some(Rf)&&(r+=ux),e&&(r+=sx),n.filter(i=>!Rf(i)).reduce((i,o)=>i+(ix.test(o)?ox:o===""?lx:ax),r)}function dx(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function fx(t,e,n){let{routesMeta:r}=t,i={},o="/",s=[];for(let l=0;l<r.length;++l){let a=r[l],u=l===r.length-1,c=o==="/"?e:e.slice(o.length)||"/",d=Pf({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},c),f=a.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Pf({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:er([o,d.pathname]),pathnameBase:kx(er([o,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(o=er([o,d.pathnameBase]))}return s}function Pf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=hx(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:p}=c;if(f==="*"){let m=l[d]||"";s=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const h=l[d];return p&&!h?u[f]=void 0:u[f]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:t}}function hx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),mg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function px(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function xg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function mx(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?fi(t):t;return{pathname:n?n.startsWith("/")?n:gx(n,e):e,search:wx(r),hash:Sx(i)}}function gx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ha(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vx(t,e){let n=yx(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function xx(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=fi(t):(i=co({},t),fe(!i.pathname||!i.pathname.includes("?"),ha("?","pathname","search",i)),fe(!i.pathname||!i.pathname.includes("#"),ha("#","pathname","hash",i)),fe(!i.search||!i.search.includes("#"),ha("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,l;if(s==null)l=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}l=d>=0?e[d]:"/"}let a=mx(i,l),u=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||c)&&(a.pathname+="/"),a}const er=t=>t.join("/").replace(/\/\/+/g,"/"),kx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Sx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function bx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kg=["post","put","patch","delete"];new Set(kg);const Cx=["get",...kg];new Set(Cx);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fo(){return fo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fo.apply(this,arguments)}const qc=M.createContext(null),Nx=M.createContext(null),bl=M.createContext(null),Cl=M.createContext(null),gr=M.createContext({outlet:null,matches:[],isDataRoute:!1}),wg=M.createContext(null);function Nl(){return M.useContext(Cl)!=null}function Sg(){return Nl()||fe(!1),M.useContext(Cl).location}function bg(t){M.useContext(bl).static||M.useLayoutEffect(t)}function El(){let{isDataRoute:t}=M.useContext(gr);return t?Bx():Ex()}function Ex(){Nl()||fe(!1);let t=M.useContext(qc),{basename:e,future:n,navigator:r}=M.useContext(bl),{matches:i}=M.useContext(gr),{pathname:o}=Sg(),s=JSON.stringify(vx(i,n.v7_relativeSplatPath)),l=M.useRef(!1);return bg(()=>{l.current=!0}),M.useCallback(function(u,c){if(c===void 0&&(c={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let d=xx(u,JSON.parse(s),o,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:er([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,s,o,t])}function Cg(){let{matches:t}=M.useContext(gr),e=t[t.length-1];return e?e.params:{}}function Mx(t,e){return Tx(t,e)}function Tx(t,e,n,r){Nl()||fe(!1);let{navigator:i}=M.useContext(bl),{matches:o}=M.useContext(gr),s=o[o.length-1],l=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let u=Sg(),c;if(e){var d;let v=typeof e=="string"?fi(e):e;a==="/"||(d=v.pathname)!=null&&d.startsWith(a)||fe(!1),c=v}else c=u;let f=c.pathname||"/",p=f;if(a!=="/"){let v=a.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let h=tx(t,{pathname:p}),m=Dx(h&&h.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:er([a,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:er([a,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return e&&m?M.createElement(Cl.Provider,{value:{location:fo({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:dn.Pop}},m):m}function Ox(){let t=Lx(),e=bx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,null)}const Ax=M.createElement(Ox,null);class Rx extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(gr.Provider,{value:this.props.routeContext},M.createElement(wg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Px(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(qc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(gr.Provider,{value:e},r)}function Dx(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let c=s.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);c>=0||fe(!1),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:p}=n,h=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||h){a=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,d,f)=>{let p,h=!1,m=null,v=null;n&&(p=l&&d.route.id?l[d.route.id]:void 0,m=d.route.errorElement||Ax,a&&(u<0&&f===0?(h=!0,v=null):u===f&&(h=!0,v=d.route.hydrateFallbackElement||null)));let g=e.concat(s.slice(0,f+1)),y=()=>{let k;return p?k=m:h?k=v:d.route.Component?k=M.createElement(d.route.Component,null):d.route.element?k=d.route.element:k=c,M.createElement(Px,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:k})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?M.createElement(Rx,{location:n.location,revalidation:n.revalidation,component:m,error:p,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var Ng=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Ng||{}),Hs=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Hs||{});function Ix(t){let e=M.useContext(qc);return e||fe(!1),e}function zx(t){let e=M.useContext(Nx);return e||fe(!1),e}function jx(t){let e=M.useContext(gr);return e||fe(!1),e}function Eg(t){let e=jx(),n=e.matches[e.matches.length-1];return n.route.id||fe(!1),n.route.id}function Lx(){var t;let e=M.useContext(wg),n=zx(Hs.UseRouteError),r=Eg(Hs.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Bx(){let{router:t}=Ix(Ng.UseNavigateStable),e=Eg(Hs.UseNavigateStable),n=M.useRef(!1);return bg(()=>{n.current=!0}),M.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,fo({fromRouteId:e},o)))},[t,e])}const Df={};function Fx(t,e){Df[e]||(Df[e]=!0,console.warn(e))}const If=(t,e,n)=>Fx(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function _x(t,e){t!=null&&t.v7_startTransition||If("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&If("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Ai(t){fe(!1)}function Vx(t){let{basename:e="/",children:n=null,location:r,navigationType:i=dn.Pop,navigator:o,static:s=!1,future:l}=t;Nl()&&fe(!1);let a=e.replace(/^\/*/,"/"),u=M.useMemo(()=>({basename:a,navigator:o,static:s,future:fo({v7_relativeSplatPath:!1},l)}),[a,l,o,s]);typeof r=="string"&&(r=fi(r));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:h="default"}=r,m=M.useMemo(()=>{let v=xg(c,a);return v==null?null:{location:{pathname:v,search:d,hash:f,state:p,key:h},navigationType:i}},[a,c,d,f,p,h,i]);return m==null?null:M.createElement(bl.Provider,{value:u},M.createElement(Cl.Provider,{children:n,value:m}))}function $x(t){let{children:e,location:n}=t;return Mx(Ru(e),n)}new Promise(()=>{});function Ru(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let o=[...e,i];if(r.type===M.Fragment){n.push.apply(n,Ru(r.props.children,o));return}r.type!==Ai&&fe(!1),!r.props.index||!r.props.children||fe(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Ru(r.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Hx="6";try{window.__reactRouterVersion=Hx}catch{}const Wx="startTransition",zf=_0[Wx];function Ux(t){let{basename:e,children:n,future:r,window:i}=t,o=M.useRef();o.current==null&&(o.current=Xv({window:i,v5Compat:!0}));let s=o.current,[l,a]=M.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},c=M.useCallback(d=>{u&&zf?zf(()=>a(d)):a(d)},[a,u]);return M.useLayoutEffect(()=>s.listen(c),[s,c]),M.useEffect(()=>_x(r),[r]),M.createElement(Vx,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:s,future:r})}var jf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jf||(jf={}));var Lf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Lf||(Lf={}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ge=(t,e)=>{const n=M.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:l="",children:a,...u},c)=>M.createElement("svg",{ref:c,...Kx,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:["lucide",`lucide-${qx(t)}`,l].join(" "),...u},[...e.map(([d,f])=>M.createElement(d,f)),...Array.isArray(a)?a:[a]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=Ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=Ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=Ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=Ge("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=Ge("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=Ge("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=Ge("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=Ge("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=Ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=Ge("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=Ge("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=Ge("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=Ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=Ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Ig({isOpen:t,onClose:e}){const[n,r]=J.useState("login"),[i,o]=J.useState({name:"",email:"",password:""});if(!t)return null;const s=l=>{l.preventDefault(),console.log("Form submitted:",{mode:n,formData:i})};return x.jsx("div",{className:"fixed inset-0 bg-background/95 flex items-center justify-center z-50 animate-fade",children:x.jsxs("div",{className:"bg-primary rounded-xl p-8 max-w-md w-full relative",children:[x.jsx("button",{onClick:e,className:"absolute right-4 top-4 text-text-secondary hover:text-text transition-colors",children:x.jsx(Dg,{className:"w-5 h-5"})}),x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold mb-2",children:n==="login"?"Welcome Back!":"Create Account"}),x.jsx("p",{className:"text-text-secondary",children:n==="login"?"Sign in to continue your movie journey":"Join our community of movie enthusiasts"})]}),x.jsxs("form",{onSubmit:s,className:"space-y-4",children:[n==="register"&&x.jsxs("div",{children:[x.jsx("label",{htmlFor:"name",className:"block text-sm font-medium mb-2",children:"Name"}),x.jsx("input",{type:"text",id:"name",value:i.name,onChange:l=>o({...i,name:l.target.value}),className:"w-full bg-background/50 border border-white/10 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-accent/50",required:n==="register"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:"Email"}),x.jsx("input",{type:"email",id:"email",value:i.email,onChange:l=>o({...i,email:l.target.value}),className:"w-full bg-background/50 border border-white/10 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-accent/50",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",children:"Password"}),x.jsx("input",{type:"password",id:"password",value:i.password,onChange:l=>o({...i,password:l.target.value}),className:"w-full bg-background/50 border border-white/10 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-accent/50",required:!0})]}),x.jsx("button",{type:"submit",className:"w-full btn-accent py-3",children:n==="login"?"Sign In":"Create Account"})]}),x.jsxs("div",{className:"mt-6 text-center text-sm",children:[x.jsx("span",{className:"text-text-secondary",children:n==="login"?"Don't have an account? ":"Already have an account? "}),x.jsx("button",{onClick:()=>r(n==="login"?"register":"login"),className:"text-accent hover:text-accent-hover font-medium",children:n==="login"?"Sign Up":"Sign In"})]})]})})}function tk(){const[t,e]=J.useState(!1);return x.jsxs(x.Fragment,{children:[x.jsx("nav",{className:"sticky top-0 z-50 bg-primary/95 backdrop-blur-sm border-b border-white/10",children:x.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:x.jsxs("div",{className:"flex items-center justify-between h-16",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx(Qx,{className:"w-8 h-8 text-accent"}),x.jsx("span",{className:"text-2xl font-bold",children:"CineCritique"})]}),x.jsx("div",{className:"flex-1 max-w-2xl mx-8",children:x.jsxs("div",{className:"relative",children:[x.jsx(Xx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-text-secondary"}),x.jsx("input",{type:"text",placeholder:"Search movies, reviews, users...",className:"w-full bg-background/50 border border-white/10 rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-accent/50"})]})}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsx("button",{className:"btn-accent",onClick:()=>e(!0),children:"Sign In"}),x.jsx("button",{onClick:()=>e(!0),className:"text-text-secondary hover:text-text transition-colors",children:x.jsx(ek,{className:"w-6 h-6"})})]})]})})}),x.jsx(Ig,{isOpen:t,onClose:()=>e(!1)})]})}function nk(){return x.jsxs("div",{className:"relative h-[70vh] min-h-[600px] overflow-hidden",children:[x.jsx("img",{src:"https://images.unsplash.com/photo-1536440136628-849c177e76a1?auto=format&fit=crop&q=80",alt:"Hero background",className:"absolute inset-0 w-full h-full object-cover"}),x.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),x.jsx("div",{className:"relative h-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:x.jsx("div",{className:"flex flex-col justify-end h-full pb-20",children:x.jsxs("div",{className:"max-w-2xl",children:[x.jsx("h1",{className:"text-5xl font-bold mb-4",children:"Discover & Share Your Movie Experience"}),x.jsx("p",{className:"text-xl text-text-secondary mb-8",children:"Join our community of movie enthusiasts. Rate, review, and explore the world of cinema."}),x.jsxs("div",{className:"flex space-x-4",children:[x.jsxs("button",{className:"btn-accent flex items-center",children:[x.jsx(Ag,{className:"w-5 h-5 mr-2"}),"Get Started"]}),x.jsx("button",{className:"btn-primary",children:"Browse Movies"})]})]})})})]})}function rk({id:t,title:e,year:n,rating:r,poster:i,genres:o}){const s=El();return x.jsxs("div",{className:"card group cursor-pointer",onClick:()=>s(`/movie/${t}`),children:[x.jsxs("div",{className:"relative aspect-[2/3] overflow-hidden rounded-lg mb-3",children:[x.jsx("img",{src:i,alt:e,className:"object-cover w-full h-full transform group-hover:scale-105 transition-transform duration-300"}),x.jsxs("div",{className:"absolute top-2 right-2 flex items-center bg-background/90 rounded-full px-2 py-1",children:[x.jsx(Pg,{className:"w-4 h-4 text-accent mr-1",fill:"currentColor"}),x.jsx("span",{className:"text-sm font-medium",children:r.toFixed(1)})]})]}),x.jsx("h3",{className:"font-semibold text-lg leading-tight mb-1",children:e}),x.jsxs("div",{className:"flex items-center justify-between text-text-secondary text-sm",children:[x.jsx("span",{children:n}),x.jsx("div",{className:"flex flex-wrap gap-2",children:o.slice(0,2).map(l=>x.jsx("span",{className:"bg-accent/10 text-accent px-2 py-0.5 rounded-full",children:l},l))})]})]})}function Ws({movies:t,view:e="grid"}){return x.jsx("div",{className:e==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6":"flex flex-col space-y-4",children:t.map(n=>x.jsx(rk,{...n,layout:e},n.id))})}function zg(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=zg(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ik(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=zg(t))&&(r&&(r+=" "),r+=e);return r}const Jc="-",ok=t=>{const e=lk(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const l=s.split(Jc);return l[0]===""&&l.length!==1&&l.shift(),jg(l,e)||sk(s)},getConflictingClassGroupIds:(s,l)=>{const a=n[s]||[];return l&&r[s]?[...a,...r[s]]:a}}},jg=(t,e)=>{var s;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?jg(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(Jc);return(s=e.validators.find(({validator:l})=>l(o)))==null?void 0:s.classGroupId},Bf=/^\[(.+)\]$/,sk=t=>{if(Bf.test(t)){const e=Bf.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},lk=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return uk(Object.entries(t.classGroups),n).forEach(([o,s])=>{Pu(s,r,o,e)}),r},Pu=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:Ff(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(ak(i)){Pu(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,s])=>{Pu(s,Ff(e,o),n,r)})})},Ff=(t,e)=>{let n=t;return e.split(Jc).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},ak=t=>t.isThemeGetter,uk=(t,e)=>e?t.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([s,l])=>[e+s,l])):o);return[n,i]}):t,ck=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(o,s)=>{n.set(o,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let s=n.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){n.has(o)?n.set(o,s):i(o,s)}}},Lg="!",dk=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,s=l=>{const a=[];let u=0,c=0,d;for(let v=0;v<l.length;v++){let g=l[v];if(u===0){if(g===i&&(r||l.slice(v,v+o)===e)){a.push(l.slice(c,v)),c=v+o;continue}if(g==="/"){d=v;continue}}g==="["?u++:g==="]"&&u--}const f=a.length===0?l:l.substring(c),p=f.startsWith(Lg),h=p?f.substring(1):f,m=d&&d>c?d-c:void 0;return{modifiers:a,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:m}};return n?l=>n({className:l,parseClassName:s}):s},fk=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},hk=t=>({cache:ck(t.cacheSize),parseClassName:dk(t),...ok(t)}),pk=/\s+/,mk=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],s=t.trim().split(pk);let l="";for(let a=s.length-1;a>=0;a-=1){const u=s[a],{modifiers:c,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:p}=n(u);let h=!!p,m=r(h?f.substring(0,p):f);if(!m){if(!h){l=u+(l.length>0?" "+l:l);continue}if(m=r(f),!m){l=u+(l.length>0?" "+l:l);continue}h=!1}const v=fk(c).join(":"),g=d?v+Lg:v,y=g+m;if(o.includes(y))continue;o.push(y);const k=i(m,h);for(let w=0;w<k.length;++w){const S=k[w];o.push(g+S)}l=u+(l.length>0?" "+l:l)}return l};function gk(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Bg(e))&&(r&&(r+=" "),r+=n);return r}const Bg=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Bg(t[r]))&&(n&&(n+=" "),n+=e);return n};function yk(t,...e){let n,r,i,o=s;function s(a){const u=e.reduce((c,d)=>d(c),t());return n=hk(u),r=n.cache.get,i=n.cache.set,o=l,l(a)}function l(a){const u=r(a);if(u)return u;const c=mk(a,n);return i(a,c),c}return function(){return o(gk.apply(null,arguments))}}const Q=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Fg=/^\[(?:([a-z-]+):)?(.+)\]$/i,vk=/^\d+\/\d+$/,xk=new Set(["px","full","screen"]),kk=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wk=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Sk=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,bk=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ck=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zt=t=>Ur(t)||xk.has(t)||vk.test(t),Xt=t=>hi(t,"length",Pk),Ur=t=>!!t&&!Number.isNaN(Number(t)),pa=t=>hi(t,"number",Ur),bi=t=>!!t&&Number.isInteger(Number(t)),Nk=t=>t.endsWith("%")&&Ur(t.slice(0,-1)),F=t=>Fg.test(t),Zt=t=>kk.test(t),Ek=new Set(["length","size","percentage"]),Mk=t=>hi(t,Ek,_g),Tk=t=>hi(t,"position",_g),Ok=new Set(["image","url"]),Ak=t=>hi(t,Ok,Ik),Rk=t=>hi(t,"",Dk),Ci=()=>!0,hi=(t,e,n)=>{const r=Fg.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Pk=t=>wk.test(t)&&!Sk.test(t),_g=()=>!1,Dk=t=>bk.test(t),Ik=t=>Ck.test(t),zk=()=>{const t=Q("colors"),e=Q("spacing"),n=Q("blur"),r=Q("brightness"),i=Q("borderColor"),o=Q("borderRadius"),s=Q("borderSpacing"),l=Q("borderWidth"),a=Q("contrast"),u=Q("grayscale"),c=Q("hueRotate"),d=Q("invert"),f=Q("gap"),p=Q("gradientColorStops"),h=Q("gradientColorStopPositions"),m=Q("inset"),v=Q("margin"),g=Q("opacity"),y=Q("padding"),k=Q("saturate"),w=Q("scale"),S=Q("sepia"),C=Q("skew"),E=Q("space"),T=Q("translate"),D=()=>["auto","contain","none"],z=()=>["auto","hidden","clip","visible","scroll"],se=()=>["auto",F,e],W=()=>[F,e],Gt=()=>["",zt,Xt],Fn=()=>["auto",Ur,F],Oo=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Qt=()=>["solid","dashed","dotted","double","none"],vr=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",F],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[Ur,F];return{cacheSize:500,separator:":",theme:{colors:[Ci],spacing:[zt,Xt],blur:["none","",Zt,F],brightness:U(),borderColor:[t],borderRadius:["none","","full",Zt,F],borderSpacing:W(),borderWidth:Gt(),contrast:U(),grayscale:j(),hueRotate:U(),invert:j(),gap:W(),gradientColorStops:[t],gradientColorStopPositions:[Nk,Xt],inset:se(),margin:se(),opacity:U(),padding:W(),saturate:U(),scale:U(),sepia:j(),skew:U(),space:W(),translate:W()},classGroups:{aspect:[{aspect:["auto","square","video",F]}],container:["container"],columns:[{columns:[Zt]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Oo(),F]}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",bi,F]}],basis:[{basis:se()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",F]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",bi,F]}],"grid-cols":[{"grid-cols":[Ci]}],"col-start-end":[{col:["auto",{span:["full",bi,F]},F]}],"col-start":[{"col-start":Fn()}],"col-end":[{"col-end":Fn()}],"grid-rows":[{"grid-rows":[Ci]}],"row-start-end":[{row:["auto",{span:[bi,F]},F]}],"row-start":[{"row-start":Fn()}],"row-end":[{"row-end":Fn()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",F]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",F]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",F,e]}],"min-w":[{"min-w":[F,e,"min","max","fit"]}],"max-w":[{"max-w":[F,e,"none","full","min","max","fit","prose",{screen:[Zt]},Zt]}],h:[{h:[F,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[F,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[F,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[F,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Zt,Xt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",pa]}],"font-family":[{font:[Ci]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",F]}],"line-clamp":[{"line-clamp":["none",Ur,pa]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",zt,F]}],"list-image":[{"list-image":["none",F]}],"list-style-type":[{list:["none","disc","decimal",F]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Qt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",zt,Xt]}],"underline-offset":[{"underline-offset":["auto",zt,F]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:W()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",F]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",F]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Oo(),Tk]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Mk]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Ak]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[h]}],"gradient-via-pos":[{via:[h]}],"gradient-to-pos":[{to:[h]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...Qt(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:Qt()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Qt()]}],"outline-offset":[{"outline-offset":[zt,F]}],"outline-w":[{outline:[zt,Xt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:Gt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[zt,Xt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Zt,Rk]}],"shadow-color":[{shadow:[Ci]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...vr(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":vr()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[a]}],"drop-shadow":[{"drop-shadow":["","none",Zt,F]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[k]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[a]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[k]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",F]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",F]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",F]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[bi,F]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",F]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",F]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":W()}],"scroll-mx":[{"scroll-mx":W()}],"scroll-my":[{"scroll-my":W()}],"scroll-ms":[{"scroll-ms":W()}],"scroll-me":[{"scroll-me":W()}],"scroll-mt":[{"scroll-mt":W()}],"scroll-mr":[{"scroll-mr":W()}],"scroll-mb":[{"scroll-mb":W()}],"scroll-ml":[{"scroll-ml":W()}],"scroll-p":[{"scroll-p":W()}],"scroll-px":[{"scroll-px":W()}],"scroll-py":[{"scroll-py":W()}],"scroll-ps":[{"scroll-ps":W()}],"scroll-pe":[{"scroll-pe":W()}],"scroll-pt":[{"scroll-pt":W()}],"scroll-pr":[{"scroll-pr":W()}],"scroll-pb":[{"scroll-pb":W()}],"scroll-pl":[{"scroll-pl":W()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",F]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[zt,Xt,pa]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},jk=yk(zk);function bn(...t){return jk(ik(t))}function Gc({genres:t,selectedGenres:e,onGenreSelect:n}){return x.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(r=>x.jsx("button",{onClick:()=>n(r),className:bn("px-4 py-2 rounded-full transition-colors",e.includes(r)?"bg-accent text-text":"bg-primary text-text-secondary hover:bg-primary-hover"),children:r},r))})}const jr=[{id:"1",title:"Dune: Part Two",year:2024,rating:8.8,poster:"https://images.unsplash.com/photo-1534809027769-b00d750a6bac?auto=format&fit=crop&q=80",backdrop:"https://images.unsplash.com/photo-1536440136628-849c177e76a1?auto=format&fit=crop&q=80",genres:["Sci-Fi","Adventure"],runtime:166,plot:"Paul Atreides unites with Chani and the Fremen while seeking revenge against the conspirators who destroyed his family.",trailer:"https://www.youtube.com/embed/Way3EIv9jI4",cast:[{id:"1",name:"Timothée Chalamet",role:"Paul Atreides",photo:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&q=80"},{id:"2",name:"Zendaya",role:"Chani",photo:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&q=80"}],crew:[{id:"1",name:"Denis Villeneuve",role:"Director",photo:"https://images.unsplash.com/photo-1537511446984-935f663eb1f4?auto=format&fit=crop&q=80"}],reviews:[{id:"1",userId:"user1",userName:"Sarah Johnson",userAvatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&q=80",rating:4.5,content:"An absolutely stunning continuation of the epic saga. The visuals are breathtaking, and the story keeps you on the edge of your seat throughout the entire film. The character development is phenomenal, and the world-building is simply unmatched.",date:"2024-03-15",likes:245,helpful:189},{id:"2",userId:"user2",userName:"Michael Chen",userAvatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&q=80",rating:5,content:"Denis Villeneuve has outdone himself with this masterpiece. The attention to detail in every frame is remarkable, and the sound design creates an immersive experience that truly transports you to Arrakis.",date:"2024-03-14",likes:178,helpful:156},{id:"3",userId:"user3",userName:"Emma Thompson",userAvatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?auto=format&fit=crop&q=80",rating:4,content:"While the pacing might be slow for some, the payoff is absolutely worth it. The performances are stellar, particularly Timothée Chalamet and Zendaya's chemistry on screen.",date:"2024-03-13",likes:134,helpful:98}]},{id:"2",title:"Oppenheimer",year:2023,rating:9.2,poster:"https://images.unsplash.com/photo-1518676590629-3dcbd9c5a5c9?auto=format&fit=crop&q=80",backdrop:"https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&q=80",genres:["Biography","Drama","History"],runtime:180,plot:"The story of American scientist J. Robert Oppenheimer and his role in the development of the atomic bomb.",trailer:"https://www.youtube.com/embed/uYPbbksJxIg",cast:[{id:"4",name:"Cillian Murphy",role:"J. Robert Oppenheimer",photo:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?auto=format&fit=crop&q=80"}],crew:[],reviews:[{id:"4",userId:"user4",userName:"David Miller",userAvatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?auto=format&fit=crop&q=80",rating:5,content:"Christopher Nolan delivers another masterpiece. The tension throughout the film is palpable, and Cillian Murphy's performance is Oscar-worthy.",date:"2024-03-16",likes:312,helpful:278}]},{id:"3",title:"Poor Things",year:2023,rating:8.9,poster:"https://images.unsplash.com/photo-1533928298208-27ff66555d8d?auto=format&fit=crop&q=80",backdrop:"https://images.unsplash.com/photo-1518671645931-e1d946a64b17?auto=format&fit=crop&q=80",genres:["Comedy","Drama","Romance"],runtime:141,plot:"The incredible tale about the fantastical evolution of Bella Baxter, a young woman brought back to life by the brilliant and unorthodox scientist Dr. Godwin Baxter.",trailer:"https://www.youtube.com/embed/RlbR5N6veqw",cast:[{id:"5",name:"Emma Stone",role:"Bella Baxter",photo:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&q=80"}],crew:[],reviews:[{id:"5",userId:"user5",userName:"Rachel Adams",userAvatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&q=80",rating:4.5,content:"A bizarre and beautiful film that pushes boundaries. Emma Stone gives the performance of her career.",date:"2024-03-14",likes:198,helpful:167}]},{id:"4",title:"The Zone of Interest",year:2023,rating:8.7,poster:"https://images.unsplash.com/photo-1533928298208-27ff66555d8d?auto=format&fit=crop&q=80",backdrop:"https://images.unsplash.com/photo-1478720568477-152d9b164e26?auto=format&fit=crop&q=80",genres:["Drama","History","War"],runtime:105,plot:"The commandant of Auschwitz, Rudolf Höss, and his wife Hedwig, strive to build a dream life for their family in a house and garden next to the camp.",trailer:"https://www.youtube.com/embed/TxP8g4RIrGY",cast:[],crew:[],reviews:[{id:"6",userId:"user6",userName:"James Wilson",userAvatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?auto=format&fit=crop&q=80",rating:5,content:"A haunting masterpiece that shows the banality of evil. The innovative sound design and cinematography create an unforgettable experience.",date:"2024-03-15",likes:245,helpful:223}]},{id:"5",title:"Killers of the Flower Moon",year:2023,rating:8.6,poster:"https://images.unsplash.com/photo-1533928298208-27ff66555d8d?auto=format&fit=crop&q=80",backdrop:"https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?auto=format&fit=crop&q=80",genres:["Crime","Drama","History"],runtime:206,plot:"Members of the Osage tribe in the United States are murdered under mysterious circumstances in the 1920s, sparking a major F.B.I. investigation.",trailer:"https://www.youtube.com/embed/EP34Yoxs3FQ",cast:[],crew:[],reviews:[{id:"7",userId:"user7",userName:"Lisa Chen",userAvatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&q=80",rating:4.5,content:"Scorsese's masterful direction combined with stellar performances makes this a must-watch. A powerful story that needed to be told.",date:"2024-03-13",likes:289,helpful:256}]},{id:"6",title:"Past Lives",year:2023,rating:8.5,poster:"https://images.unsplash.com/photo-1533928298208-27ff66555d8d?auto=format&fit=crop&q=80",backdrop:"https://images.unsplash.com/photo-1485470733090-0aae1788d5af?auto=format&fit=crop&q=80",genres:["Drama","Romance"],runtime:105,plot:"Nora and Hae Sung, two deeply connected childhood friends, are wrested apart after Nora's family emigrates from South Korea. Twenty years later, they are reunited for one fateful week.",trailer:"https://www.youtube.com/embed/kA244xewjcI",cast:[],crew:[],reviews:[{id:"8",userId:"user8",userName:"Sophie Kim",userAvatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&q=80",rating:5,content:"A beautiful meditation on love, destiny, and the roads not taken. The performances are subtle yet powerful.",date:"2024-03-12",likes:234,helpful:198}]}],Lk=["Action","Drama","Comedy","Sci-Fi","Horror","Romance"];function Bk(){const t=El(),[e,n]=J.useState([]),r=s=>{n(l=>l.includes(s)?l.filter(a=>a!==s):[...l,s])},i=e.length>0?jr.filter(s=>s.genres.some(l=>e.includes(l))):jr,o=[...jr].sort((s,l)=>l.rating-s.rating).slice(0,4);return x.jsxs("div",{children:[x.jsx(nk,{}),x.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[x.jsxs("section",{className:"mb-12",children:[x.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Quick Filters"}),x.jsx(Gc,{genres:Lk,selectedGenres:e,onGenreSelect:r})]}),x.jsxs("section",{className:"mb-12",children:[x.jsxs("div",{className:"flex items-center justify-between mb-8",children:[x.jsx("h2",{className:"text-3xl font-bold",children:"Trending Now"}),x.jsx("button",{className:"btn-primary",onClick:()=>t("/movies/trending"),children:"View All"})]}),x.jsx(Ws,{movies:i.slice(0,4)})]}),x.jsxs("section",{className:"mb-12",children:[x.jsxs("div",{className:"flex items-center justify-between mb-8",children:[x.jsx("h2",{className:"text-3xl font-bold",children:"Top Rated"}),x.jsx("button",{className:"btn-primary",onClick:()=>t("/movies/top-rated"),children:"View All"})]}),x.jsx(Ws,{movies:o})]}),x.jsxs("section",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-8",children:[x.jsx("h2",{className:"text-3xl font-bold",children:"Recent Reviews"}),x.jsx("button",{className:"btn-primary",onClick:()=>t("/movies/recent"),children:"View All"})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:jr.slice(0,4).map(s=>{var l;return x.jsxs("div",{className:"bg-primary rounded-lg p-6",children:[x.jsxs("div",{className:"flex items-start space-x-4",children:[x.jsx("img",{src:((l=s.cast[0])==null?void 0:l.photo)||"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&q=80",alt:"User avatar",className:"w-12 h-12 rounded-full object-cover"}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold",children:"John Doe"}),x.jsx("p",{className:"text-text-secondary text-sm",children:"2 hours ago"})]})]}),x.jsxs("div",{className:"mt-4",children:[x.jsxs("h4",{className:"font-semibold mb-2",children:['Review for "',s.title,'"']}),x.jsx("p",{className:"text-text-secondary line-clamp-3",children:"An absolutely stunning continuation of the epic saga. The visuals are breathtaking, and the story keeps you on the edge of your seat throughout the entire film."})]})]},s.id)})})]})]})]})}const Fk=["Action","Adventure","Animation","Comedy","Crime","Documentary","Drama","Family","Fantasy","Horror","Mystery","Romance","Sci-Fi","Thriller","War","Western"];function _k(){const[t,e]=M.useState("grid"),[n,r]=M.useState([]),[i,o]=M.useState(!1),s=l=>{r(a=>a.includes(l)?a.filter(u=>u!==l):[...a,l])};return x.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[x.jsxs("div",{className:"flex items-center justify-between mb-8",children:[x.jsx("h1",{className:"text-3xl font-bold",children:"Browse Movies"}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("button",{onClick:()=>o(!i),className:"btn-primary flex items-center",children:[x.jsx(Rg,{className:"w-5 h-5 mr-2"}),"Filters"]}),x.jsxs("div",{className:"flex bg-primary rounded-lg",children:[x.jsx("button",{onClick:()=>e("grid"),className:bn("p-2 rounded-l-lg",t==="grid"?"bg-accent":"hover:bg-primary-hover"),children:x.jsx(Tg,{className:"w-5 h-5"})}),x.jsx("button",{onClick:()=>e("list"),className:bn("p-2 rounded-r-lg",t==="list"?"bg-accent":"hover:bg-primary-hover"),children:x.jsx(Og,{className:"w-5 h-5"})})]})]})]}),i&&x.jsxs("div",{className:"bg-primary rounded-lg p-6 mb-8",children:[x.jsxs("div",{className:"mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Genres"}),x.jsx(Gc,{genres:Fk,selectedGenres:n,onGenreSelect:s})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Year Range"}),x.jsxs("div",{className:"flex space-x-4",children:[x.jsx("input",{type:"number",placeholder:"From",className:"bg-background/50 border border-white/10 rounded-lg px-4 py-2 w-full"}),x.jsx("input",{type:"number",placeholder:"To",className:"bg-background/50 border border-white/10 rounded-lg px-4 py-2 w-full"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rating"}),x.jsxs("select",{className:"bg-background/50 border border-white/10 rounded-lg px-4 py-2 w-full",children:[x.jsx("option",{value:"",children:"All Ratings"}),x.jsx("option",{value:"7",children:"7+ Stars"}),x.jsx("option",{value:"8",children:"8+ Stars"}),x.jsx("option",{value:"9",children:"9+ Stars"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Runtime"}),x.jsxs("select",{className:"bg-background/50 border border-white/10 rounded-lg px-4 py-2 w-full",children:[x.jsx("option",{value:"",children:"Any Length"}),x.jsx("option",{value:"short",children:"Under 90 mins"}),x.jsx("option",{value:"medium",children:"90-120 mins"}),x.jsx("option",{value:"long",children:"Over 120 mins"})]})]})]})]}),x.jsx(Ws,{movies:[],view:t})]})}function ma({rating:t,maxRating:e=5,size:n="md",onChange:r}){const i={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return x.jsx("div",{className:"flex space-x-1",children:[...Array(e)].map((o,s)=>x.jsx(Pg,{className:bn(i[n],"cursor-pointer transition-colors",s<t?"text-accent fill-accent":"text-text-secondary"),onClick:()=>r==null?void 0:r(s+1)},s))})}function we(t){this.content=t}we.prototype={constructor:we,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new we(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new we(n)},addToStart:function(t,e){return new we([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new we(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new we(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=we.from(t),t.size?new we(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=we.from(t),t.size?new we(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=we.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};we.from=function(t){if(t instanceof we)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new we(e)};function Vg(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=Vg(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function $g(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){n-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let u=0,c=Math.min(s.text.length,l.text.length);for(;u<c&&s.text[s.text.length-u-1]==l.text[l.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let u=$g(s.content,l.content,n-1,r-1);if(u)return u}n-=a,r-=a}}class b{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,l=0;l<n;s++){let a=this.content[s],u=l+a.nodeSize;if(u>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let c=l+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,n-c),r,i+c)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(l,a)=>{let u=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(s?s=!1:o+=r),o+=u},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new b(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),r.push(l),i+=l.nodeSize),s=a}return new b(r,i)}cutByIndex(e,n){return e==n?b.empty:e==0&&n==this.content.length?this:new b(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new b(i,o)}addToStart(e){return new b([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new b(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Vg(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return $g(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Go(0,e);if(e==this.size)return Go(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?Go(r+1,s):Go(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return b.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new b(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return b.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new b(n||e,r)}static from(e){if(!e)return b.empty;if(e instanceof b)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new b([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}b.empty=new b([],0);const ga={index:0,offset:0};function Go(t,e){return ga.index=t,ga.offset=e,ga}function Us(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Us(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Us(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let q=class Du{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Us(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Du.none;if(e instanceof Du)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};q.none=[];class Ks extends Error{}class O{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Wg(this.content,e+this.openStart,n);return r&&new O(r,this.openStart,this.openEnd)}removeBetween(e,n){return new O(Hg(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return O.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new O(b.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new O(e,r,i)}}O.empty=new O(b.empty,0,0);function Hg(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:l}=t.findIndex(n);if(i==e||o.isText){if(l!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(Hg(o.content,e-i-1,n-i-1)))}function Wg(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=Wg(s.content,e-o-1,n);return l&&t.replaceChild(i,s.copy(l))}function Vk(t,e,n){if(n.openStart>t.depth)throw new Ks("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ks("Inconsistent open depths");return Ug(t,e,n,0)}function Ug(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=Ug(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,l=s.content;return nr(s,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=$k(n,t);return nr(o,qg(t,s,l,e,r))}else return nr(o,qs(t,e,r))}function Kg(t,e){if(!e.type.compatibleContent(t.type))throw new Ks("Cannot join "+e.type.name+" onto "+t.type.name)}function Iu(t,e,n){let r=t.node(n);return Kg(r,e.node(n)),r}function tr(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Hi(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(tr(t.nodeAfter,r),o++));for(let l=o;l<s;l++)tr(i.child(l),r);e&&e.depth==n&&e.textOffset&&tr(e.nodeBefore,r)}function nr(t,e){return t.type.checkContent(e),t.copy(e)}function qg(t,e,n,r,i){let o=t.depth>i&&Iu(t,e,i+1),s=r.depth>i&&Iu(n,r,i+1),l=[];return Hi(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(Kg(o,s),tr(nr(o,qg(t,e,n,r,i+1)),l)):(o&&tr(nr(o,qs(t,e,i+1)),l),Hi(e,n,i,l),s&&tr(nr(s,qs(n,r,i+1)),l)),Hi(r,null,i,l),new b(l)}function qs(t,e,n){let r=[];if(Hi(null,t,n,r),t.depth>n){let i=Iu(t,e,n+1);tr(nr(i,qs(t,e,n+1)),r)}return Hi(e,null,n,r),new b(r)}function $k(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(b.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class ho{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return q.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Js(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),u=o-a;if(r.push(s,l,i+a),!u||(s=s.child(l),s.isText))break;o=u-1,i+=a+1}return new ho(n,r,o)}static resolveCached(e,n){let r=_f.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else _f.set(e,r=new Hk);let i=r.elts[r.i]=ho.resolve(e,n);return r.i=(r.i+1)%Wk,i}}class Hk{constructor(){this.elts=[],this.i=0}}const Wk=12,_f=new WeakMap;class Js{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Uk=Object.create(null);let Cn=class zu{constructor(e,n,r,i=q.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||b.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Us(this.attrs,n||e.defaultAttrs||Uk)&&q.sameSet(this.marks,r||q.none)}copy(e=null){return e==this.content?this:new zu(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new zu(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return O.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),l=i.start(s),u=i.node(s).content.cut(i.pos-l,o.pos-l);return new O(u,i.depth-s,o.depth-s)}replace(e,n,r){return Vk(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return ho.resolveCached(this,e)}resolveNoCache(e){return ho.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Jg(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=b.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=q.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!q.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=b.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Cn.prototype.text=void 0;class Gs extends Cn{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Jg(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Gs(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Gs(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Jg(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class dr{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Kk(e,n);if(r.next==null)return dr.empty;let i=Gg(r);r.next&&r.err("Unexpected trailing text");let o=Zk(Xk(i));return ew(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!n||a.validEnd))return b.from(l.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:d}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=o(d,l.concat(c));if(f)return f}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}dr.empty=new dr(!0);class Kk{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Gg(t){let e=[];do e.push(qk(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function qk(t){let e=[];do e.push(Jk(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Jk(t){let e=Yk(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Gk(t,e);else break;return e}function Vf(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Gk(t,e){let n=Vf(t),r=n;return t.eat(",")&&(t.next!="}"?r=Vf(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Qk(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Yk(t){if(t.eat("(")){let e=Gg(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Qk(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Xk(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,l,a){let u={term:a,to:l};return e[s].push(u),u}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,u)=>a.concat(o(u,l)),[]);if(s.type=="seq")for(let a=0;;a++){let u=o(s.exprs[a],l);if(a==s.exprs.length-1)return u;i(u,l=n())}else if(s.type=="star"){let a=n();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=n();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let u=0;u<s.min;u++){let c=n();i(o(s.expr,a),c),a=c}if(s.max==-1)i(o(s.expr,a),a);else for(let u=s.min;u<s.max;u++){let c=n();r(a,c),i(o(s.expr,a),c),a=c}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Qg(t,e){return e-t}function $f(t,e){let n=[];return r(e),n.sort(Qg);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&n.indexOf(a)==-1&&r(a)}}}function Zk(t){let e=Object.create(null);return n($f(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:l,to:a})=>{if(!l)return;let u;for(let c=0;c<i.length;c++)i[c][0]==l&&(u=i[c][1]);$f(t,a).forEach(c=>{u||i.push([l,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new dr(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort(Qg);o.next.push({type:i[s][0],next:e[l.join(",")]||n(l)})}return o}}function ew(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:u}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Yg(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Xg(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Zg(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function ey(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new nw(t,r,e[r]);return n}let Hf=class ty{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=ey(e,r.attrs),this.defaultAttrs=Yg(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==dr.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Xg(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Cn(this,this.computeAttrs(e),b.from(n),q.setFrom(r))}createChecked(e=null,n,r){return n=b.from(n),this.checkContent(n),new Cn(this,this.computeAttrs(e),n,q.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=b.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(b.empty,!0);return o?new Cn(this,e,n.append(o),q.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Zg(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:q.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new ty(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function tw(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class nw{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?tw(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Ml{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=ey(e,i.attrs),this.excluded=null;let o=Yg(this.attrs);this.instance=o?new q(this,o):null}create(e=null){return!e&&this.instance?this.instance:new q(this,Xg(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new Ml(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Zg(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class ny{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=we.from(e.nodes),n.marks=we.from(e.marks||{}),this.nodes=Hf.compile(this.spec.nodes,this),this.marks=Ml.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=dr.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?Wf(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:Wf(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Hf){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Gs(r,r.defaultAttrs,e,q.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Cn.fromJSON(this,e)}markFromJSON(e){return q.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Wf(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function rw(t){return t.tag!=null}function iw(t){return t.style!=null}class Nn{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(rw(i))this.tags.push(i);else if(iw(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new Kf(this,n,!1);return r.addAll(e,q.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Kf(this,n,!0);return r.addAll(e,q.none,n.from,n.to),O.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(lw(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){let a=s.getAttrs(n);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let l=n[s];if((l.priority==null?50:l.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=qf(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=qf(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Nn(e,Nn.schemaRules(e)))}}const ry={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ow={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},iy={ol:!0,ul:!0},Qs=1,Ys=2,Wi=4;function Uf(t,e,n){return e!=null?(e?Qs:0)|(e==="full"?Ys:0):t&&t.whitespace=="pre"?Qs|Ys:n&~Wi}class Qo{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=q.none,this.match=o||(s&Wi?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(b.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Qs)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=b.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(b.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ry.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Kf{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,o,s=Uf(null,n.preserveWhitespace,0)|(r?Wi:0);i?o=new Qo(i.type,i.attrs,q.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Qo(null,null,q.none,!0,null,s):o=new Qo(e.schema.topNodeType,null,q.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top;if(i.options&Ys||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i.options&Qs)i.options&Ys?r=r.replace(/\r\n?/g,`
`):r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],s=e.previousSibling;(!o||s&&s.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=e.nodeName.toLowerCase(),o;iy.hasOwnProperty(i)&&this.parser.normalizeLists&&sw(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,r));if(s?s.ignore:ow.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let l,a=this.top,u=this.needsBlock;if(ry.hasOwnProperty(i))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),l=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);return}let c=s&&s.skip?n:this.readStyles(e,n);c&&this.addAll(e,c),l&&this.sync(a),this.needsBlock=u}else{let l=this.readStyles(e,n);l&&this.addElementByRule(e,s,l,s.consuming===!1?o:void 0)}}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(o,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(u=>!a.clearMark(u)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(s,n.attrs||null,r,n.preserveWhitespace);a&&(o=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}o&&this.sync(l)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];s!=l;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n){let r,i;for(let o=this.open;o>=0;o--){let s=this.nodes[o],l=s.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,i=s,!l.length)||s.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)n=this.enterInner(r[o],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=q.none;for(let s of r.concat(e.marks))(i.type?i.type.allowsMarkType(s.type):Jf(s.type,e.type))&&(o=s.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=Uf(e,o,s.options);s.options&Wi&&s.content.length==0&&(l|=Wi);let a=q.none;return r=r.filter(u=>(s.type?s.type.allowsMarkType(u.type):Jf(u.type,e))?(a=u.addToSet(a),!1):!0),this.nodes.push(new Qo(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let u=n[l];if(u==""){if(l==n.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let c=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;a--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function sw(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&iy.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function lw(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function qf(t){let e={};for(let n in t)e[n]=t[n];return e}function Jf(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:u,next:c}=l.edge(a);if(u==e||o.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}class yr{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=ya(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let u=s.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(o[l][0])||u.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let u=s.marks[a++],c=this.serializeMark(u,s.isInline,n);c&&(o.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=ms(ya(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&ms(ya(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return ms(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new yr(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Gf(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Gf(e.marks)}}function Gf(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function ya(t){return t.document||window.document}const Qf=new WeakMap;function aw(t){let e=Qf.get(t);return e===void 0&&Qf.set(t,e=uw(t)),e}function uw(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function ms(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=aw(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let d in u)if(u[d]!=null){let f=d.indexOf(" ");f>0?a.setAttributeNS(d.slice(0,f),d.slice(f+1),u[d]):a.setAttribute(d,u[d])}}for(let d=c;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:p,contentDOM:h}=ms(t,f,n,r);if(a.appendChild(p),h){if(l)throw new RangeError("Multiple content holes");l=h}}}return{dom:a,contentDOM:l}}const oy=65535,sy=Math.pow(2,16);function cw(t,e){return t+e*sy}function Yf(t){return t&oy}function dw(t){return(t-(t&oy))/sy}const ly=1,ay=2,gs=4,uy=8;class ju{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&uy)>0}get deletedBefore(){return(this.delInfo&(ly|gs))>0}get deletedAfter(){return(this.delInfo&(ay|gs))>0}get deletedAcross(){return(this.delInfo&gs)>0}}class Xe{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Xe.empty)return Xe.empty}recover(e){let n=0,r=Yf(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+dw(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+s],d=a+u;if(e<=d){let f=u?e==a?-1:e==d?1:n:n,p=a+i+(f<0?0:c);if(r)return p;let h=e==(n<0?a:d)?null:cw(l/3,e-a),m=e==a?ay:e==d?ly:gs;return(n<0?e!=a:e!=d)&&(m|=uy),new ju(p,m,h)}i+=c-u}return r?e+i:new ju(e+i,0,null)}touches(e,n){let r=0,i=Yf(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==i*3)return!0;r+=this.ranges[l+s]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),u=this.ranges[i+n],c=this.ranges[i+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new Xe(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Xe.empty:new Xe(e<0?[0,-e,0]:[0,0,e])}}Xe.empty=new Xe([]);class Kr{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new Kr(this.maps,this.mirror,e,n)}copy(){return new Kr(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Kr;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],l=s.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new ju(e,i,null)}}const va=Object.create(null);class Pe{getMap(){return Xe.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=va[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in va)throw new RangeError("Duplicate use of step JSON ID "+e);return va[e]=n,n.prototype.jsonID=e,n}}class ae{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new ae(e,null)}static fail(e){return new ae(null,e)}static fromReplace(e,n,r,i){try{return ae.ok(e.replace(n,r,i))}catch(o){if(o instanceof Ks)return ae.fail(o.message);throw o}}}function Qc(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(Qc(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return b.fromArray(r)}class fn extends Pe{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new O(Qc(n.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return ae.fromReplace(e,this.from,this.to,o)}invert(){return new Ot(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new fn(n.pos,r.pos,this.mark)}merge(e){return e instanceof fn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new fn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new fn(n.from,n.to,e.markFromJSON(n.mark))}}Pe.jsonID("addMark",fn);class Ot extends Pe{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new O(Qc(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return ae.fromReplace(e,this.from,this.to,r)}invert(){return new fn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ot(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ot&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ot(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ot(n.from,n.to,e.markFromJSON(n.mark))}}Pe.jsonID("removeMark",Ot);class hn extends Pe{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ae.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ae.fromReplace(e,this.pos,this.pos+1,new O(b.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new hn(this.pos,n.marks[i]);return new hn(this.pos,this.mark)}}return new ri(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new hn(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new hn(n.pos,e.markFromJSON(n.mark))}}Pe.jsonID("addNodeMark",hn);class ri extends Pe{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ae.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ae.fromReplace(e,this.pos,this.pos+1,new O(b.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new hn(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ri(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ri(n.pos,e.markFromJSON(n.mark))}}Pe.jsonID("removeNodeMark",ri);class me extends Pe{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Lu(e,this.from,this.to)?ae.fail("Structure replace would overwrite content"):ae.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Xe([this.from,this.to-this.from,this.slice.size])}invert(e){return new me(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new me(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof me)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?O.empty:new O(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new me(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?O.empty:new O(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new me(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new me(n.from,n.to,O.fromJSON(e,n.slice),!!n.structure)}}Pe.jsonID("replace",me);class ye extends Pe{constructor(e,n,r,i,o,s,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Lu(e,this.from,this.gapFrom)||Lu(e,this.gapTo,this.to)))return ae.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ae.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ae.fromReplace(e,this.from,this.to,r):ae.fail("Content does not fit in gap")}getMap(){return new Xe([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ye(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new ye(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ye(n.from,n.to,n.gapFrom,n.gapTo,O.fromJSON(e,n.slice),n.insert,!!n.structure)}}Pe.jsonID("replaceAround",ye);function Lu(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function fw(t,e,n,r){let i=[],o=[],s,l;t.doc.nodesBetween(e,n,(a,u,c)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let f=Math.max(u,e),p=Math.min(u+a.nodeSize,n),h=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(h)||(s&&s.to==f&&s.mark.eq(d[m])?s.to=p:i.push(s=new Ot(f,p,d[m])));l&&l.to==f?l.to=p:o.push(l=new fn(f,p,r))}}),i.forEach(a=>t.step(a)),o.forEach(a=>t.step(a))}function hw(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof Ml){let u=s.marks,c;for(;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let u=Math.min(l+s.nodeSize,n);for(let c=0;c<a.length;c++){let d=a[c],f;for(let p=0;p<i.length;p++){let h=i[p];h.step==o-1&&d.eq(i[p].style)&&(f=h)}f?(f.to=u,f.step=o):i.push({style:d,from:Math.max(l,e),to:u,step:o})}}}),i.forEach(s=>t.step(new Ot(s.from,s.to,s.style)))}function Yc(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<o.childCount;a++){let u=o.child(a),c=l+u.nodeSize,d=r.matchType(u.type);if(!d)s.push(new me(l,c,O.empty));else{r=d;for(let f=0;f<u.marks.length;f++)n.allowsMarkType(u.marks[f].type)||t.step(new Ot(l,c,u.marks[f]));if(i&&u.isText&&n.whitespace!="pre"){let f,p=/\r?\n|\r/g,h;for(;f=p.exec(u.text);)h||(h=new O(b.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),s.push(new me(l+f.index,l+f.index+f[0].length,h))}}l=c}if(!r.validEnd){let a=r.fillBefore(b.empty,!0);t.replace(l,l,new O(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function pw(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function pi(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!pw(i,o,s))break}return null}function mw(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,u=l,c=b.empty,d=0;for(let h=o,m=!1;h>n;h--)m||r.index(h)>0?(m=!0,c=b.from(r.node(h).copy(c)),d++):a--;let f=b.empty,p=0;for(let h=o,m=!1;h>n;h--)m||i.after(h+1)<i.end(h)?(m=!0,f=b.from(i.node(h).copy(f)),p++):u++;t.step(new ye(a,u,s,l,new O(c.append(f),d,p),c.size-d,!0))}function Xc(t,e,n=null,r=t){let i=gw(t,e),o=i&&yw(r,e);return o?i.map(Xf).concat({type:e,attrs:n}).concat(o.map(Xf)):null}function Xf(t){return{type:t,attrs:null}}function gw(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function yw(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;a&&u<i;u++)a=a.matchType(n.child(u).type);return!a||!a.validEnd?null:s}function vw(t,e,n){let r=b.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let l=n[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=b.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new ye(i,o,i,o,new O(r,0,0),n.length,!0))}function xw(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,l)=>{let a=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,a)&&kw(t.doc,t.mapping.slice(o).map(l),r)){let u=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",h=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!h?u=!1:!p&&h&&(u=!0)}u===!1&&dy(t,s,l,o),Yc(t,t.mapping.slice(o).map(l,1),r,void 0,u===null);let c=t.mapping.slice(o),d=c.map(l,1),f=c.map(l+s.nodeSize,1);return t.step(new ye(d,f,d+1,f-1,new O(b.from(r.create(a,null,s.marks)),0,0),1,!0)),u===!0&&cy(t,s,l,o),!1}})}function cy(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function dy(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function kw(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function ww(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new ye(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new O(b.from(s),0,0),1,!0))}function qr(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>o;u--,c--){let d=i.node(u),f=i.index(u);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(f,d.childCount),h=r&&r[c+1];h&&(p=p.replaceChild(0,h.type.create(h.attrs)));let m=r&&r[c]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(p))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function Sw(t,e,n=1,r){let i=t.doc.resolve(e),o=b.empty,s=b.empty;for(let l=i.depth,a=i.depth-n,u=n-1;l>a;l--,u--){o=b.from(i.node(l).copy(o));let c=r&&r[u];s=b.from(c?c.type.create(c.attrs,s):i.node(l).copy(s))}t.step(new me(e,e,new O(o.append(s),n,n),!0))}function jn(t,e){let n=t.resolve(e),r=n.index();return fy(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function bw(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function fy(t,e){return!!(t&&e&&!t.isLeaf&&bw(t,e))}function Tl(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,l=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),l++,s=r.node(i).maybeChild(l)):(o=r.node(i).maybeChild(l-1),s=r.node(i+1)),o&&!o.isTextblock&&fy(o,s)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Cw(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let c=s.whitespace=="pre",d=!!s.contentMatch.matchType(i);c&&!d?r=!1:!c&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let c=t.doc.resolve(e+n);dy(t,c.node(),c.before(),l)}s.inlineContent&&Yc(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let a=t.mapping.slice(l),u=a.map(e-n);if(t.step(new me(u,a.map(e+n,-1),O.empty,!0)),r===!0){let c=t.doc.resolve(u);cy(t,c.node(),c.before(),t.steps.length)}return t}function Nw(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function hy(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),u=r.node(s),c=!1;if(o==1)c=u.canReplace(a,a,i);else{let d=u.contentMatchAt(a).findWrapping(i.firstChild.type);c=d&&u.canReplaceWith(a,a,d[0])}if(c)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function Ol(t,e,n=e,r=O.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return py(i,o,r)?new me(e,n,r):new Ew(i,o,r).fit()}function py(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Ew{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=b.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=b.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new O(o,s,l);return e>-1?new ye(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new me(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=xa(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,d=null;if(n==1&&(s?u.matchType(s.type)||(d=u.fillBefore(b.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:d};if(n==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=xa(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new O(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=xa(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new O(Ri(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new O(Ri(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,u=0,c=[],{match:d,type:f}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)c.push(i.child(m));d=d.matchFragment(i)}let p=l.size+e-(s.content.size-s.openEnd);for(;u<l.childCount;){let m=l.child(u),v=d.matchType(m.type);if(!v)break;u++,(u>1||a==0||m.content.size)&&(d=v,c.push(my(m.mark(f.allowedMarks(m.marks)),u==1?a:0,u==l.childCount?p:-1)))}let h=u==l.childCount;h||(p=-1),this.placed=Pi(this.placed,n,b.from(c)),this.frontier[n].match=d,h&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,v=l;m<p;m++){let g=v.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),v=g.content}this.unplaced=h?e==0?O.empty:new O(Ri(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new O(Ri(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!ka(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=ka(e,n,i,r,o);if(s){for(let l=n-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=ka(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Pi(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Pi(this.placed,this.depth,b.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(b.empty,!0);n.childCount&&(this.placed=Pi(this.placed,this.frontier.length,n))}}function Ri(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Ri(t.firstChild.content,e-1,n)))}function Pi(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Pi(t.lastChild.content,e-1,n)))}function xa(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function my(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,my(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(b.empty,!0)))),t.copy(r)}function ka(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!Mw(n,o.content,s)?l:null}function Mw(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Tw(t){return t.spec.defining||t.spec.definingForContent}function Ow(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(py(i,o,r))return t.step(new me(e,n,r));let s=yy(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let f=i.depth,p=i.pos-1;f>0;f--,p--){let h=i.node(f).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;s.indexOf(f)>-1?l=f:i.before(f)==p&&s.splice(1,0,-f)}let a=s.indexOf(l),u=[],c=r.openStart;for(let f=r.content,p=0;;p++){let h=f.firstChild;if(u.push(h),p==r.openStart)break;f=h.content}for(let f=c-1;f>=0;f--){let p=u[f],h=Tw(p.type);if(h&&!p.sameMarkup(i.node(Math.abs(l)-1)))c=f;else if(h||!p.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let p=(f+c+1)%(r.openStart+1),h=u[p];if(h)for(let m=0;m<s.length;m++){let v=s[(m+a)%s.length],g=!0;v<0&&(g=!1,v=-v);let y=i.node(v-1),k=i.index(v-1);if(y.canReplaceWith(k,k,h.type,h.marks))return t.replace(i.before(v),g?o.after(v):n,new O(gy(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let f=s.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let p=s[f];p<0||(e=i.before(p),n=o.after(p))}}function gy(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(gy(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(b.empty,!0))}return t}function Aw(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Nw(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new O(b.from(r),0,0))}function Rw(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=yy(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function yy(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class Jr extends Pe{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return ae.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return ae.fromReplace(e,this.pos,this.pos+1,new O(b.from(i),0,n.isLeaf?0:1))}getMap(){return Xe.empty}invert(e){return new Jr(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Jr(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Jr(n.pos,n.attr,n.value)}}Pe.jsonID("attr",Jr);class po extends Pe{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return ae.ok(r)}getMap(){return Xe.empty}invert(e){return new po(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new po(n.attr,n.value)}}Pe.jsonID("docAttr",po);let ii=class extends Error{};ii=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ii.prototype=Object.create(Error.prototype);ii.prototype.constructor=ii;ii.prototype.name="TransformError";class Pw{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Kr}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ii(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=O.empty){let i=Ol(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new O(b.from(r),0,0))}delete(e,n){return this.replace(e,n,O.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Ow(this,e,n,r),this}replaceRangeWith(e,n,r){return Aw(this,e,n,r),this}deleteRange(e,n){return Rw(this,e,n),this}lift(e,n){return mw(this,e,n),this}join(e,n=1){return Cw(this,e,n),this}wrap(e,n){return vw(this,e,n),this}setBlockType(e,n=e,r,i=null){return xw(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return ww(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Jr(e,n,r)),this}setDocAttribute(e,n){return this.step(new po(e,n)),this}addNodeMark(e,n){return this.step(new hn(e,n)),this}removeNodeMark(e,n){if(!(n instanceof q)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new ri(e,n)),this}split(e,n=1,r){return Sw(this,e,n,r),this}addMark(e,n,r){return fw(this,e,n,r),this}removeMark(e,n,r){return hw(this,e,n,r),this}clearIncompatible(e,n,r){return Yc(this,e,n,r),this}}const wa=Object.create(null);class _{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Dw(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=O.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:u}=s[l],c=e.mapping.slice(o);e.replaceRange(c.map(a.pos),c.map(u.pos),l?O.empty:n),l==0&&th(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),u=a.map(s.pos),c=a.map(l.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),th(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new L(e):Sr(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?Sr(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Sr(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new St(e.node(0))}static atStart(e){return Sr(e,e,0,0,1)||new St(e)}static atEnd(e){return Sr(e,e,e.content.size,e.childCount,-1)||new St(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=wa[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in wa)throw new RangeError("Duplicate use of selection JSON ID "+e);return wa[e]=n,n.prototype.jsonID=e,n}getBookmark(){return L.between(this.$anchor,this.$head).getBookmark()}}_.prototype.visible=!0;class Dw{constructor(e,n){this.$from=e,this.$to=n}}let Zf=!1;function eh(t){!Zf&&!t.parent.inlineContent&&(Zf=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class L extends _{constructor(e,n=e){eh(e),eh(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return _.near(r);let i=e.resolve(n.map(this.anchor));return new L(i.parent.inlineContent?i:r,r)}replace(e,n=O.empty){if(super.replace(e,n),n==O.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof L&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Al(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new L(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=_.findFrom(n,r,!0)||_.findFrom(n,-r,!0);if(o)n=o.$head;else return _.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(_.findFrom(e,-r,!0)||_.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new L(e,n)}}_.jsonID("text",L);class Al{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Al(e.map(this.anchor),e.map(this.head))}resolve(e){return L.between(e.resolve(this.anchor),e.resolve(this.head))}}class I extends _{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?_.near(o):new I(o)}content(){return new O(b.from(this.node),0,0)}eq(e){return e instanceof I&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Zc(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new I(e.resolve(n.anchor))}static create(e,n){return new I(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}I.prototype.visible=!1;_.jsonID("node",I);class Zc{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Al(r,r):new Zc(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&I.isSelectable(r)?new I(n):_.near(n)}}class St extends _{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=O.empty){if(n==O.empty){e.delete(0,e.doc.content.size);let r=_.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new St(e)}map(e){return new St(e)}eq(e){return e instanceof St}getBookmark(){return Iw}}_.jsonID("all",St);const Iw={map(){return this},resolve(t){return new St(t)}};function Sr(t,e,n,r,i,o=!1){if(e.inlineContent)return L.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&I.isSelectable(l))return I.create(t,n-(i<0?l.nodeSize:0))}else{let a=Sr(t,l,n+i,i<0?l.childCount:0,i,o);if(a)return a}n+=l.nodeSize*i}return null}function th(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof me||i instanceof ye))return;let o=t.mapping.maps[r],s;o.forEach((l,a,u,c)=>{s==null&&(s=c)}),t.setSelection(_.near(t.doc.resolve(s),n))}const nh=1,Yo=2,rh=4;class zw extends Pw{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|nh)&~Yo,this.storedMarks=null,this}get selectionSet(){return(this.updated&nh)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Yo,this}ensureMarks(e){return q.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Yo)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Yo,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||q.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(_.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=rh,this}get scrolledIntoView(){return(this.updated&rh)>0}}function ih(t,e){return!e||!t?t:t.bind(e)}class Di{constructor(e,n,r){this.name=e,this.init=ih(n.init,r),this.apply=ih(n.apply,r)}}const jw=[new Di("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Di("selection",{init(t,e){return t.selection||_.atStart(e.doc)},apply(t){return t.selection}}),new Di("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Di("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Sa{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=jw.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Di(r.key,r.spec.state,r))})}}class Lr{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,u=i?i[s].state:this,c=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,u,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Lr(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new zw(this)}static create(e){let n=new Sa(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Lr(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Sa(this.schema,e.plugins),r=n.fields,i=new Lr(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Sa(e.schema,e.plugins),o=new Lr(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=Cn.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=_.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],u=a.spec.state;if(a.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){o[s.name]=u.fromJSON.call(a,e,n[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function vy(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=vy(i,e,{})),n[r]=i}return n}class Qe{constructor(e){this.spec=e,this.props={},e.props&&vy(e.props,this,this.props),this.key=e.key?e.key.key:xy("plugin")}getState(e){return e[this.key]}}const ba=Object.create(null);function xy(t){return t in ba?t+"$"+ ++ba[t]:(ba[t]=0,t+"$")}class It{constructor(e="key"){this.key=xy(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Se=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},mo=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Bu=null;const Bt=function(t,e,n){let r=Bu||(Bu=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Lw=function(){Bu=null},fr=function(t,e,n,r){return n&&(oh(t,e,n,r,-1)||oh(t,e,n,r,1))},Bw=/^(img|br|input|textarea|hr)$/i;function oh(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:lt(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Eo(t)||Bw.test(t.nodeName)||t.contentEditable=="false")return!1;e=Se(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?lt(t):0}else return!1}}function lt(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Fw(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=lt(t)}else if(t.parentNode&&!Eo(t))e=Se(t),t=t.parentNode;else return null}}function _w(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Eo(t))e=Se(t)+1,t=t.parentNode;else return null}}function Vw(t,e,n){for(let r=e==0,i=e==lt(t);r||i;){if(t==n)return!0;let o=Se(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==lt(t)}}function Eo(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Rl=function(t){return t.focusNode&&fr(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Wn(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function $w(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Hw(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(lt(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(lt(r.startContainer),r.startOffset)}}}const Pt=typeof navigator<"u"?navigator:null,sh=typeof document<"u"?document:null,Ln=Pt&&Pt.userAgent||"",Fu=/Edge\/(\d+)/.exec(Ln),ky=/MSIE \d/.exec(Ln),_u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ln),qe=!!(ky||_u||Fu),En=ky?document.documentMode:_u?+_u[1]:Fu?+Fu[1]:0,Ct=!qe&&/gecko\/(\d+)/i.test(Ln);Ct&&+(/Firefox\/(\d+)/.exec(Ln)||[0,0])[1];const Vu=!qe&&/Chrome\/(\d+)/.exec(Ln),Ae=!!Vu,wy=Vu?+Vu[1]:0,ze=!qe&&!!Pt&&/Apple Computer/.test(Pt.vendor),oi=ze&&(/Mobile\/\w+/.test(Ln)||!!Pt&&Pt.maxTouchPoints>2),it=oi||(Pt?/Mac/.test(Pt.platform):!1),Ww=Pt?/Win/.test(Pt.platform):!1,vt=/Android \d/.test(Ln),Mo=!!sh&&"webkitFontSmoothing"in sh.documentElement.style,Uw=Mo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Kw(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function jt(t,e){return typeof t=="number"?t:t[e]}function qw(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function lh(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;s=mo(s)){if(s.nodeType!=1)continue;let l=s,a=l==o.body,u=a?Kw(o):qw(l),c=0,d=0;if(e.top<u.top+jt(r,"top")?d=-(u.top-e.top+jt(i,"top")):e.bottom>u.bottom-jt(r,"bottom")&&(d=e.bottom-e.top>u.bottom-u.top?e.top+jt(i,"top")-u.top:e.bottom-u.bottom+jt(i,"bottom")),e.left<u.left+jt(r,"left")?c=-(u.left-e.left+jt(i,"left")):e.right>u.right-jt(r,"right")&&(c=e.right-u.right+jt(i,"right")),c||d)if(a)o.defaultView.scrollBy(c,d);else{let f=l.scrollLeft,p=l.scrollTop;d&&(l.scrollTop+=d),c&&(l.scrollLeft+=c);let h=l.scrollLeft-f,m=l.scrollTop-p;e={left:e.left-h,top:e.top-m,right:e.right-h,bottom:e.bottom-m}}if(a||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function Jw(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=t.root.elementFromPoint(o,s);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:Sy(t.dom)}}function Sy(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=mo(r));return e}function Gw({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;by(n,r==0?0:r-e)}function by(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let kr=null;function Qw(t){if(t.setActive)return t.setActive();if(kr)return t.focus(kr);let e=Sy(t);t.focus(kr==null?{get preventScroll(){return kr={preventScroll:!0},!0}}:void 0),kr||(kr=!1,by(e,0))}function Cy(t,e){let n,r=2e8,i,o=0,s=e.top,l=e.top,a,u;for(let c=t.firstChild,d=0;c;c=c.nextSibling,d++){let f;if(c.nodeType==1)f=c.getClientRects();else if(c.nodeType==3)f=Bt(c).getClientRects();else continue;for(let p=0;p<f.length;p++){let h=f[p];if(h.top<=s&&h.bottom>=l){s=Math.max(h.bottom,s),l=Math.min(h.top,l);let m=h.left>e.left?h.left-e.left:h.right<e.left?e.left-h.right:0;if(m<r){n=c,r=m,i=m&&n.nodeType==3?{left:h.right<e.left?h.right:h.left,top:e.top}:e,c.nodeType==1&&m&&(o=d+(e.left>=(h.left+h.right)/2?1:0));continue}}else h.top>e.top&&!a&&h.left<=e.left&&h.right>=e.left&&(a=c,u={left:Math.max(h.left,Math.min(h.right,e.left)),top:h.top});!n&&(e.left>=h.right&&e.top>=h.top||e.left>=h.left&&e.top>=h.bottom)&&(o=d+1)}}return!n&&a&&(n=a,i=u,r=0),n&&n.nodeType==3?Yw(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:Cy(n,i)}function Yw(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=en(r,1);if(o.top!=o.bottom&&ed(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function ed(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Xw(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Zw(t,e,n){let{node:r,offset:i}=Cy(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function eS(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let l=t.docView.nearestDesc(o,!0);if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)){let a=l.dom.getBoundingClientRect();if(l.node.isBlock&&l.parent&&(!s&&a.left>r.left||a.top>r.top?i=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),s=!0),!l.contentDOM&&i<0&&!l.node.isText)return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter}o=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Ny(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let u=l[a];if(ed(e,u))return Ny(s,e,u)}}if((o=(o+1)%r)==i)break}return t}function tS(t,e){let n=t.dom.ownerDocument,r,i=0,o=Hw(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let u=t.dom.getBoundingClientRect();if(!ed(e,u)||(s=Ny(t.dom,e,u),!s))return null}if(ze)for(let u=s;r&&u;u=mo(u))u.draggable&&(r=void 0);if(s=Xw(s,e),r){if(Ct&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let u;Mo&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=eS(t,r,i,e))}l==null&&(l=Zw(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function ah(t){return t.top<t.bottom||t.left<t.right}function en(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(ah(r))return r}return Array.prototype.find.call(n,ah)||t.getBoundingClientRect()}const nS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ey(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=Mo||Ct;if(r.nodeType==3)if(s&&(nS.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=en(Bt(r,i,i),n);if(Ct&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=en(Bt(r,i-1,i-1),-1);if(u.top==a.top){let c=en(Bt(r,i,i+1),-1);if(c.top!=a.top)return Ni(c,c.left<u.left)}}return a}else{let a=i,u=i,c=n<0?1:-1;return n<0&&!i?(u++,c=-1):n>=0&&i==r.nodeValue.length?(a--,c=1):n<0?a--:u++,Ni(en(Bt(r,a,u),c),c<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==lt(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Ca(a.getBoundingClientRect(),!1)}if(o==null&&i<lt(r)){let a=r.childNodes[i];if(a.nodeType==1)return Ca(a.getBoundingClientRect(),!0)}return Ca(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==lt(r))){let a=r.childNodes[i-1],u=a.nodeType==3?Bt(a,lt(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(u)return Ni(en(u,1),!1)}if(o==null&&i<lt(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let u=a?a.nodeType==3?Bt(a,0,s?0:1):a.nodeType==1?a:null:null;if(u)return Ni(en(u,-1),!0)}return Ni(en(r.nodeType==3?Bt(r):r,-n),n>=0)}function Ni(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Ca(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function My(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function rS(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return My(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.contentDOM||l.dom;break}o=l.dom.parentNode}let s=Ey(t,i.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Bt(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<a.length;u++){let c=a[u];if(c.bottom>c.top+1&&(n=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}const iS=/[\u0590-\u08ac]/;function oS(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,l=t.domSelection();return l?!iS.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?o:s:My(t,e,()=>{let{focusNode:a,focusOffset:u,anchorNode:c,anchorOffset:d}=t.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:h,focusOffset:m}=t.domSelectionRange(),v=h&&!p.contains(h.nodeType==1?h:h.parentNode)||a==h&&u==m;try{l.collapse(c,d),a&&(a!=c||u!=d)&&l.extend&&l.extend(a,u)}catch{}return f!=null&&(l.caretBidiLevel=f),v}):r.pos==r.start()||r.pos==r.end()}let uh=null,ch=null,dh=!1;function sS(t,e,n){return uh==e&&ch==n?dh:(uh=e,ch=n,dh=n=="up"||n=="down"?rS(t,e,n):oS(t,e,n))}const dt=0,fh=1,Gn=2,Dt=3;class To{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=dt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Se(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.size;if(l>e||s instanceof Oy){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof Ty&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Se(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Se(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){let a=this.children[l],u=s+a.size;if(i==-1&&e<=u){let c=s+a.border;if(e>=c&&n<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,c);e=s;for(let d=l;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Se(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(u>n||l==this.children.length-1)){n=u;for(let c=l+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=Se(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let p=0,h=0;p<this.children.length;p++){let m=this.children[p],v=h+m.size;if(o>h&&s<v)return m.setSelection(e-h-m.border,n-h-m.border,r,i);h=v}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((Ct||ze)&&e==n){let{node:p,offset:h}=l;if(p.nodeType==3){if(d=!!(h&&p.nodeValue[h-1]==`
`),d&&h==p.nodeValue.length)for(let m=p,v;m;m=m.parentNode){if(v=m.nextSibling){v.nodeName=="BR"&&(l=a={node:v.parentNode,offset:Se(v)+1});break}let g=m.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let m=p.childNodes[h-1];d=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Ct&&c.focusNode&&c.focusNode!=a.node&&c.focusNode.nodeType==1){let p=c.focusNode.childNodes[c.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||d&&ze)&&fr(l.node,l.offset,c.anchorNode,c.anchorOffset)&&fr(a.node,a.offset,c.focusNode,c.focusOffset))return;let f=!1;if((u.extend||e==n)&&!d){u.collapse(l.node,l.offset);try{e!=n&&u.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>n){let h=l;l=a,a=h}let p=document.createRange();p.setEnd(a.node,a.offset),p.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let l=r+o.border,a=s-o.border;if(e>=l&&n<=a){this.dirty=e==r||n==s?Gn:fh,e==l&&n==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Dt:o.markDirty(e-l,n-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Gn:Dt}r=s}this.dirty=Gn}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Gn:fh;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Ty extends To{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==dt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class lS extends To{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class hr extends To{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=yr.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new hr(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Dt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Dt&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=dt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=dt}}slice(e,n,r){let i=hr.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Hu(o,n,s,r)),e>0&&(o=Hu(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Mn extends To{constructor(e,n,r,i,o,s,l,a,u){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,o,s){let l=o.nodeViews[n.type.name],a,u=l&&l(n,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,i),c=u&&u.dom,d=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=yr.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let f=c;return c=Py(c,r,n),u?a=new aS(e,n,r,i,c,d||null,f,u,o,s+1):n.isText?new Pl(e,n,r,i,c,f,o):new Mn(e,n,r,i,c,d||null,f,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>b.empty)}return e}matchesNode(e,n,r){return this.dirty==dt&&e.eq(this.node)&&Xs(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new cS(this,s&&s.node,e);hS(this.node,this.innerDeco,(u,c,d)=>{u.spec.marks?a.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!d&&a.syncToMarks(c==this.node.childCount?q.none:this.node.child(c).marks,r,e),a.placeWidget(u,e,i)},(u,c,d,f)=>{a.syncToMarks(u.marks,r,e);let p;a.findNodeMatch(u,c,d,f)||l&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(p=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(u,c,d,p,e)||a.updateNextNode(u,c,d,e,f,i)||a.addNode(u,c,d,e,i),i+=u.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Gn)&&(s&&this.protectLocalComposition(e,s),Ay(this.contentDOM,this.children,e),oi&&pS(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof L)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,l=mS(this.node.content,s,r-n,i-n);return l<0?null:{node:o,pos:l,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new lS(this,o,n,i);e.input.compositionNodes.push(s),this.children=Hu(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==Dt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=dt}updateOuterDeco(e){if(Xs(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Ry(this.dom,this.nodeDOM,$u(this.outerDeco,this.node,n),$u(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function hh(t,e,n,r,i){Py(r,e,t);let o=new Mn(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Pl extends Mn{constructor(e,n,r,i,o,s,l){super(e,n,r,i,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Dt||this.dirty!=dt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=dt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=dt,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new Pl(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Dt)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Oy extends To{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==dt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class aS extends Mn{constructor(e,n,r,i,o,s,l,a,u,c){super(e,n,r,i,o,s,l,u,c),this.spec=a}update(e,n,r,i){if(this.dirty==Dt)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Ay(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==t){for(;l!=r;)r=ph(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(s instanceof hr){let a=r?r.previousSibling:t.lastChild;Ay(s.contentDOM,s.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=ph(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Ui=function(t){t&&(this.nodeName=t)};Ui.prototype=Object.create(null);const Qn=[new Ui];function $u(t,e,n){if(t.length==0)return Qn;let r=n?Qn[0]:new Ui,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new Ui(s.nodeName));for(let l in s){let a=s[l];a!=null&&(n&&i.length==1&&i.push(r=new Ui(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function Ry(t,e,n,r){if(n==Qn&&r==Qn)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],l=n[o];if(o){let a;l&&l.nodeName==s.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=Qn[0]),i=a}uS(i,l||Qn[0],s)}return i}function uS(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function Py(t,e,n){return Ry(t,t,Qn,$u(e,n,t.nodeType!=1))}function Xs(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function ph(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class cS{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=dS(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=dt,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let u=this.top.children[a];if(u.matchesMark(e[o])&&!this.isLocked(u.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=hr.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let u=this.top.children[l];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==Dt&&s.dom==s.contentDOM&&(s.dirty=Gn),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Mn){let u=this.preMatch.matched.get(a);if(u!=null&&u!=o)return!1;let c=a.dom,d,f=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Dt&&Xs(n,a.outerDeco));if(!f&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(a,e,n,r,i,s)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Gn,d.updateChildren(i,s+1),d.dirty=dt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Xs(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=Mn.create(this.top,n,r,i,o,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,o){let s=Mn.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new Ty(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof hr;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Pl)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((ze||Ae)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Oy(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function dS(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let l;for(;;)if(r){let u=n.children[r-1];if(u instanceof hr)n=u,r=u.children.length;else{l=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,o.set(l,i),s.push(l)}}return{index:i,matched:o,matches:s.reverse()}}function fS(t,e){return t.type.side-e.type.side}function hS(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,i,e.forChild(o,c),u),o+=c.nodeSize}return}let s=0,l=[],a=null;for(let u=0;;){let c,d;for(;s<i.length&&i[s].to==o;){let v=i[s++];v.widget&&(c?(d||(d=[c])).push(v):c=v)}if(c)if(d){d.sort(fS);for(let v=0;v<d.length;v++)n(d[v],u,!!a)}else n(c,u,!!a);let f,p;if(a)p=-1,f=a,a=null;else if(u<t.childCount)p=u,f=t.child(u++);else break;for(let v=0;v<l.length;v++)l[v].to<=o&&l.splice(v--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let h=o+f.nodeSize;if(f.isText){let v=h;s<i.length&&i[s].from<v&&(v=i[s].from);for(let g=0;g<l.length;g++)l[g].to<v&&(v=l[g].to);v<h&&(a=f.cut(v-o),f=f.cut(0,v-o),h=v,p=-1)}else for(;s<i.length&&i[s].to<h;)s++;let m=f.isInline&&!f.isLeaf?l.filter(v=>!v.inline):l.slice();r(f,m,e.forChild(o,f),p),o=h}}function pS(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function mS(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;i<t.childCount;){let u=t.child(i++);if(o+=u.nodeSize,!u.isText)break;a+=u.text}if(o>=n){if(o>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let u=l<r?a.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=n)return l+u;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Hu(t,e,n,r,i){let o=[];for(let s=0,l=0;s<t.length;s++){let a=t[s],u=l,c=l+=a.size;u>=n||c<=e?o.push(a):(u<e&&o.push(a.slice(0,e-u,r)),i&&(o.push(i),i=void 0),c>n&&o.push(a.slice(n-u,a.size,r)))}return o}function td(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,u;if(Rl(n)){for(a=s;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&I.isSelectable(d)&&i.parent&&!(d.isInline&&Vw(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;u=new I(s==f?l:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=s,f=s;for(let p=0;p<n.rangeCount;p++){let h=n.getRangeAt(p);d=Math.min(d,t.docView.posFromDOM(h.startContainer,h.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(h.endContainer,h.endOffset,-1))}if(d<0)return null;[a,s]=f==t.state.selection.anchor?[f,d]:[d,f],l=r.resolve(s)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let c=r.resolve(a);if(!u){let d=e=="pointer"||t.state.selection.head<l.pos&&!o?1:-1;u=nd(t,c,l,d)}return u}function Dy(t){return t.editable?t.hasFocus():zy(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ht(t,e=!1){let n=t.state.selection;if(Iy(t,n),!!Dy(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ae){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&fr(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)yS(t);else{let{anchor:r,head:i}=n,o,s;mh&&!(n instanceof L)&&(n.$from.parent.inlineContent||(o=gh(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=gh(t,n.to))),t.docView.setSelection(r,i,t,e),mh&&(o&&yh(o),s&&yh(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&gS(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const mh=ze||Ae&&wy<63;function gh(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(ze&&i&&i.contentEditable=="false")return Na(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Na(i);if(o)return Na(o)}}function Na(t){return t.contentEditable="true",ze&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function yh(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function gS(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Dy(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function yS(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Se(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&qe&&En<=11&&(r.disabled=!0,r.disabled=!1)}function Iy(t,e){if(e instanceof I){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(vh(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else vh(t)}function vh(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function nd(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||L.between(e,n,r)}function xh(t){return t.editable&&!t.hasFocus()?!1:zy(t)}function zy(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function vS(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return fr(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Wu(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&_.findFrom(o,e)}function rn(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function kh(t,e,n){let r=t.state.selection;if(r instanceof L)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return rn(t,new L(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Wu(t.state,e);return i&&i instanceof I?rn(t,i):!1}else if(!(it&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM?I.isSelectable(o)?rn(t,new I(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):Mo?rn(t,new L(t.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof I&&r.node.isInline)return rn(t,new L(e>0?r.$to:r.$from));{let i=Wu(t.state,e);return i?rn(t,i):!1}}}function Zs(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ki(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function wr(t,e){return e<0?xS(t):kS(t)}function xS(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(Ct&&n.nodeType==1&&r<Zs(n)&&Ki(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(Ki(l,-1))i=n,o=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(jy(n))break;{let l=n.previousSibling;for(;l&&Ki(l,-1);)i=n.parentNode,o=Se(l),l=l.previousSibling;if(l)n=l,r=Zs(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Uu(t,n,r):i&&Uu(t,i,o)}function kS(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Zs(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(Ki(l,1))o=n,s=++r;else break}else{if(jy(n))break;{let l=n.nextSibling;for(;l&&Ki(l,1);)o=l.parentNode,s=Se(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Zs(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Uu(t,o,s)}function jy(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function wS(t,e){for(;t&&e==t.childNodes.length&&!Eo(t);)e=Se(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function SS(t,e){for(;t&&!e&&!Eo(t);)e=Se(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Uu(t,e,n){if(e.nodeType!=3){let o,s;(s=wS(e,n))?(e=s,n=0):(o=SS(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Rl(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Ht(t)},50)}function wh(t,e){let n=t.state.doc.resolve(e);if(!(Ae||Ww)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Sh(t,e,n){let r=t.state.selection;if(r instanceof L&&!r.empty||n.indexOf("s")>-1||it&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Wu(t.state,e);if(s&&s instanceof I)return rn(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof St?_.near(s,e):_.findFrom(s,e);return l?rn(t,l):!1}return!1}function bh(t,e){if(!(t.state.selection instanceof L))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function Ch(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function bS(t){if(!ze||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Ch(t,r,"true"),setTimeout(()=>Ch(t,r,"false"),20)}return!1}function CS(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function NS(t,e){let n=e.keyCode,r=CS(e);if(n==8||it&&n==72&&r=="c")return bh(t,-1)||wr(t,-1);if(n==46&&!e.shiftKey||it&&n==68&&r=="c")return bh(t,1)||wr(t,1);if(n==13||n==27)return!0;if(n==37||it&&n==66&&r=="c"){let i=n==37?wh(t,t.state.selection.from)=="ltr"?-1:1:-1;return kh(t,i,r)||wr(t,i)}else if(n==39||it&&n==70&&r=="c"){let i=n==39?wh(t,t.state.selection.from)=="ltr"?1:-1:1;return kh(t,i,r)||wr(t,i)}else{if(n==38||it&&n==80&&r=="c")return Sh(t,-1,r)||wr(t,-1);if(n==40||it&&n==78&&r=="c")return bS(t)||Sh(t,1,r)||wr(t,1);if(r==(it?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Ly(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let s=t.someProp("clipboardSerializer")||yr.fromSchema(t.state.schema),l=Hy(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let u=a.firstChild,c,d=0;for(;u&&u.nodeType==1&&(c=$y[u.nodeName.toLowerCase()]);){for(let p=c.length-1;p>=0;p--){let h=l.createElement(c[p]);for(;a.firstChild;)h.appendChild(a.firstChild);a.appendChild(h),d++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function By(t,e,n,r,i){let o=i.parent.type.spec.code,s,l;if(!n&&!e)return null;let a=e&&(r||o||!n);if(a){if(t.someProp("transformPastedText",f=>{e=f(e,o||r,t)}),o)return e?new O(b.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):O.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)l=d;else{let f=i.marks(),{schema:p}=t.state,h=yr.fromSchema(p);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let v=s.appendChild(document.createElement("p"));m&&v.appendChild(h.serializeNode(p.text(m,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=OS(n),Mo&&AS(s);let u=s&&s.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||Nn.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||c),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!ES.test(f.parentNode.nodeName)?{ignore:!0}:null}})),c)l=RS(Nh(l,+c[1],+c[2]),c[4]);else if(l=O.maxOpen(MS(l.content,i),!0),l.openStart||l.openEnd){let d=0,f=0;for(let p=l.content.firstChild;d<l.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=l.content.lastChild;f<l.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);l=Nh(l,d,f)}return t.someProp("transformPasted",d=>{l=d(l,t)}),l}const ES=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function MS(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),u;if(!a)return s=null;if(u=s.length&&o.length&&_y(a,o,l,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=Vy(s[s.length-1],o.length));let c=Fy(l,a);s.push(c),i=i.matchType(c.type),o=a}}),s)return b.from(s)}return t}function Fy(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,b.from(t));return t}function _y(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=_y(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(b.from(Fy(n,t,i+1))))}}function Vy(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Vy(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(b.empty,!0);return t.copy(n.append(r))}function Ku(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,l=s.content;return t.childCount>1&&(o=0),i<r-1&&(l=Ku(l,e,n,r,i+1,o)),i>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(b.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function Nh(t,e,n){return e<t.openStart&&(t=new O(Ku(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new O(Ku(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const $y={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Eh=null;function Hy(){return Eh||(Eh=document.implementation.createHTMLDocument("title"))}let Ea=null;function TS(t){let e=window.trustedTypes;return e?(Ea||(Ea=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Ea.createHTML(t)):t}function OS(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Hy().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&$y[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=TS(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function AS(t){let e=t.querySelectorAll(Ae?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function RS(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=b.from(a.create(r[l+1],i)),o++,s++}return new O(i,o,s)}const je={},Le={},PS={touchstart:!0,touchmove:!0};class DS{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function IS(t){for(let e in je){let n=je[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{jS(t,r)&&!rd(t,r)&&(t.editable||!(r.type in Le))&&n(t,r)},PS[e]?{passive:!0}:void 0)}ze&&t.dom.addEventListener("input",()=>null),qu(t)}function pn(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function zS(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function qu(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>rd(t,r))})}function rd(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function jS(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function LS(t,e){!rd(t,e)&&je[e.type]&&(t.editable||!(e.type in Le))&&je[e.type](t,e)}Le.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Uy(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(vt&&Ae&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),oi&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Wn(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||NS(t,n)?n.preventDefault():pn(t,"key")};Le.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Le.keypress=(t,e)=>{let n=e;if(Uy(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||it&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof L)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Dl(t){return{left:t.clientX,top:t.clientY}}function BS(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function id(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,l=>s>o.depth?l(t,n,o.nodeAfter,o.before(s),i,!0):l(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Gr(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function FS(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&I.isSelectable(r)?(Gr(t,new I(n)),!0):!1}function _S(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof I&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if(I.isSelectable(l)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Gr(t,I.create(t.state.doc,i)),!0):!1}function VS(t,e,n,r,i){return id(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?_S(t,n):FS(t,n))}function $S(t,e,n,r){return id(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function HS(t,e,n,r){return id(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||WS(t,n,r)}function WS(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Gr(t,L.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)Gr(t,L.create(r,l+1,l+1+s.content.size));else if(I.isSelectable(s))Gr(t,I.create(r,l));else continue;return!0}}function od(t){return el(t)}const Wy=it?"metaKey":"ctrlKey";je.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=od(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&BS(n,t.input.lastClick)&&!n[Wy]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(Dl(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new US(t,s,n,!!r)):(o=="doubleClick"?$S:HS)(t,s.pos,s.inside,n)?n.preventDefault():pn(t,"pointer"))};class US{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Wy],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let c=e.state.doc.resolve(n.pos);o=c.parent,s=c.depth?c.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:u}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof I&&u.from<=s&&u.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ct&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),pn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ht(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Dl(e))),this.updateAllowDefault(e),this.allowDefault||!n?pn(this.view,"pointer"):VS(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||ze&&this.mightDrag&&!this.mightDrag.node.isAtom||Ae&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Gr(this.view,_.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):pn(this.view,"pointer")}move(e){this.updateAllowDefault(e),pn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}je.touchstart=t=>{t.input.lastTouch=Date.now(),od(t),pn(t,"pointer")};je.touchmove=t=>{t.input.lastTouch=Date.now(),pn(t,"pointer")};je.contextmenu=t=>od(t);function Uy(t,e){return t.composing?!0:ze&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const KS=vt?5e3:-1;Le.compositionstart=Le.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof L&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),el(t,!0),t.markCursor=null;else if(el(t,!e.selection.empty),Ct&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let l=t.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}Ky(t,KS)};Le.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Ky(t,20))};function Ky(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>el(t),e))}function qy(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=JS());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function qS(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Fw(e.focusNode,e.focusOffset),r=_w(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function JS(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function el(t,e=!1){if(!(vt&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),qy(t),e||t.docView&&t.docView.dirty){let n=td(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function GS(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const go=qe&&En<15||oi&&Uw<604;je.copy=Le.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=go?null:n.clipboardData,s=r.content(),{dom:l,text:a}=Ly(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):GS(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function QS(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function YS(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?yo(t,r.value,null,i,e):yo(t,r.textContent,r.innerHTML,i,e)},50)}function yo(t,e,n,r,i){let o=By(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,o||O.empty)))return!0;if(!o)return!1;let s=QS(o),l=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Jy(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Le.paste=(t,e)=>{let n=e;if(t.composing&&!vt)return;let r=go?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&yo(t,Jy(r),r.getData("text/html"),i,n)?n.preventDefault():YS(t,n)};class Gy{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Qy=it?"altKey":"ctrlKey";je.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(Dl(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof I?i.to-1:i.to))){if(r&&r.mightDrag)s=I.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=I.create(t.state.doc,d.posBefore))}}let l=(s||t.state.selection).content(),{dom:a,text:u,slice:c}=Ly(t,l);(!n.dataTransfer.files.length||!Ae||wy>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(go?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",go||n.dataTransfer.setData("text/plain",u),t.dragging=new Gy(c,!n[Qy],s)};je.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Le.dragover=Le.dragenter=(t,e)=>e.preventDefault();Le.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Dl(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",h=>{s=h(s,t)}):s=By(t,Jy(n.dataTransfer),go?null:n.dataTransfer.getData("text/html"),!1,o);let l=!!(r&&!n[Qy]);if(t.someProp("handleDrop",h=>h(t,n,s||O.empty,l))){n.preventDefault();return}if(!s)return;n.preventDefault();let a=s?hy(t.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let u=t.state.tr;if(l){let{node:h}=r;h?h.replace(u):u.deleteSelection()}let c=u.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=u.doc;if(d?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(f))return;let p=u.doc.resolve(c);if(d&&I.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new I(p));else{let h=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((m,v,g,y)=>h=y),u.setSelection(nd(t,p,u.doc.resolve(h)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};je.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ht(t)},20))};je.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};je.beforeinput=(t,e)=>{if(Ae&&vt&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Wn(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Le)je[t]=Le[t];function vo(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class tl{constructor(e,n){this.toDOM=e,this.spec=n||rr,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new ut(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof tl&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&vo(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Tn{constructor(e,n){this.attrs=e,this.spec=n||rr}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new ut(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Tn&&vo(this.attrs,e.attrs)&&vo(this.spec,e.spec)}static is(e){return e.type instanceof Tn}destroy(){}}class sd{constructor(e,n){this.attrs=e,this.spec=n||rr}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new ut(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof sd&&vo(this.attrs,e.attrs)&&vo(this.spec,e.spec)}destroy(){}}class ut{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new ut(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new ut(e,e,new tl(n,r))}static inline(e,n,r,i){return new ut(e,n,new Tn(r,i))}static node(e,n,r,i){return new ut(e,n,new sd(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Tn}get widget(){return this.type instanceof tl}}const br=[],rr={};class ce{constructor(e,n){this.local=e.length?e:br,this.children=n.length?n:br}static create(e,n){return n.length?nl(n,e,0,rr):Te}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=n&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,n-l,r,i+l,o)}}map(e,n,r){return this==Te||e.maps.length==0?this:this.mapInner(e,n,0,0,r||rr)}mapInner(e,n,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?XS(this.children,s||[],e,n,r,i,o):s?new ce(s.sort(ir),br):Te}add(e,n){return n.length?this==Te?ce.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((l,a)=>{let u=a+r,c;if(c=Xy(n,l,u)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,c,u+1):i.splice(o,0,a,a+l.nodeSize,nl(c,l,u+1,rr)),o+=3}});let s=Yy(o?Zy(n):n,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new ce(s.length?this.local.concat(s).sort(ir):this.local,i||this.children)}remove(e){return e.length==0||this==Te?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+n,a=r[o+1]+n;for(let c=0,d;c<e.length;c++)(d=e[c])&&d.from>l&&d.to<a&&(e[c]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(s,l+1);u!=Te?r[o+2]=u:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new ce(i,r):Te}forChild(e,n){if(this==Te)return this;if(n.isLeaf)return ce.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof Tn){let u=Math.max(o,a.from)-o,c=Math.min(s,a.to)-o;u<c&&(i||(i=[])).push(a.copy(u,c))}}if(i){let l=new ce(i.sort(ir),br);return r?new an([l,r]):l}return r||Te}eq(e){if(this==e)return!0;if(!(e instanceof ce)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return ld(this.localsInner(e))}localsInner(e){if(this==Te)return br;if(e.inlineContent||!this.local.some(Tn.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Tn||n.push(this.local[r]);return n}forEachSet(e){e(this)}}ce.empty=new ce([],[]);ce.removeOverlap=ld;const Te=ce.empty;class an{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,rr));return an.from(r)}forChild(e,n){if(n.isLeaf)return ce.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=Te&&(o instanceof an?r=r.concat(o.members):r.push(o))}return an.from(r)}eq(e){if(!(e instanceof an)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?ld(r?n:n.sort(ir)):br}static from(e){switch(e.length){case 0:return Te;case 1:return e[0];default:return new an(e.every(n=>n instanceof ce)?e:e.reduce((n,r)=>n.concat(r instanceof ce?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function XS(t,e,n,r,i,o,s){let l=t.slice();for(let u=0,c=o;u<n.maps.length;u++){let d=0;n.maps[u].forEach((f,p,h,m)=>{let v=m-h-(p-f);for(let g=0;g<l.length;g+=3){let y=l[g+1];if(y<0||f>y+c-d)continue;let k=l[g]+c-d;p>=k?l[g+1]=f<=k?-2:-1:f>=c&&v&&(l[g]+=v,l[g+1]+=v)}d+=v}),c=n.maps[u].map(c,-1)}let a=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){a=!0,l[u+1]=-1;continue}let c=n.map(t[u]+o),d=c-i;if(d<0||d>=r.content.size){a=!0;continue}let f=n.map(t[u+1]+o,-1),p=f-i,{index:h,offset:m}=r.content.findIndex(d),v=r.maybeChild(h);if(v&&m==d&&m+v.nodeSize==p){let g=l[u+2].mapInner(n,v,c+1,t[u]+o+1,s);g!=Te?(l[u]=d,l[u+1]=p,l[u+2]=g):(l[u+1]=-2,a=!0)}else a=!0}if(a){let u=ZS(l,t,e,n,i,o,s),c=nl(u,r,0,s);e=c.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,f=0;d<c.children.length;d+=3){let p=c.children[d];for(;f<l.length&&l[f]<p;)f+=3;l.splice(f,0,c.children[d],c.children[d+1],c.children[d+2])}}return new ce(e.sort(ir),l)}function Yy(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new ut(i.from+e,i.to+e,i.type))}return n}function ZS(t,e,n,r,i,o,s){function l(a,u){for(let c=0;c<a.local.length;c++){let d=a.local[c].map(r,i,u);d?n.push(d):s.onRemove&&s.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)l(a.children[c+2],a.children[c]+u+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+o+1);return n}function Xy(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function Zy(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function nl(t,e,n,r){let i=[],o=!1;e.forEach((l,a)=>{let u=Xy(t,l,a+n);if(u){o=!0;let c=nl(u,l,n+a+1,r);c!=Te&&i.push(a,a+l.nodeSize,c)}});let s=Yy(o?Zy(t):t,-n).sort(ir);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new ce(s,i):Te}function ir(t,e){return t.from-e.from||t.to-e.to}function ld(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Mh(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Mh(e,i,r.copy(o.from,r.to)));break}}}return e}function Mh(t,e,n){for(;e<t.length&&ir(n,t[e])>0;)e++;t.splice(e,0,n)}function Ma(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Te&&e.push(r)}),t.cursorWrapper&&e.push(ce.create(t.state.doc,[t.cursorWrapper.deco])),an.from(e)}const eb={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},tb=qe&&En<=11;class nb{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class rb{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new nb,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);qe&&En<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),tb&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,eb)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(xh(this.view)){if(this.suppressingSelectionUpdates)return Ht(this.view);if(qe&&En<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&fr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=mo(o))n.add(o);for(let o=e.anchorNode;o;o=mo(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&xh(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,l=!1,a=[];if(e.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],a);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(l=!0))}if(Ct&&a.length){let c=a.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,f]=c;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of c){let p=f.parentNode;p&&p.nodeName=="LI"&&(!d||sb(e,d)!=p)&&f.remove()}}}let u=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Rl(r)&&(u=td(e))&&u.eq(_.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ht(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),ib(e)),this.handleDOMChange(o,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ht(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let d=e.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(qe&&En<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:d,nextSibling:f}=e.addedNodes[c];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f)}let s=i&&i.parentNode==e.target?Se(i)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?Se(o):e.target.childNodes.length,u=r.localPosFromDOM(e.target,a,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Th=new WeakMap,Oh=!1;function ib(t){if(!Th.has(t)&&(Th.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Ct,Oh)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Oh=!0}}function Ah(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return fr(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function ob(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Ah(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Ah(t,n):null}function sb(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function lb(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),u,c=a.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:a.anchorOffset}],Rl(a)||u.push({node:a.focusNode,offset:a.focusOffset})),Ae&&t.input.lastKeyCode===8)for(let v=o;v>i;v--){let g=r.childNodes[v-1],y=g.pmViewDesc;if(g.nodeName=="BR"&&!y){o=v;break}if(!y||y.size)break}let d=t.state.doc,f=t.someProp("domParser")||Nn.fromSchema(t.state.schema),p=d.resolve(s),h=null,m=f.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:o,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:ab,context:p});if(u&&u[0].pos!=null){let v=u[0].pos,g=u[1]&&u[1].pos;g==null&&(g=v),h={anchor:v+s,head:g+s}}return{doc:m,sel:h,from:s,to:l}}function ab(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(ze&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||ze&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const ub=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function cb(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let D=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,z=td(t,D);if(z&&!t.state.selection.eq(z)){if(Ae&&vt&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",W=>W(t,Wn(13,"Enter"))))return;let se=t.state.tr.setSelection(z);D=="pointer"?se.setMeta("pointer",!0):D=="key"&&se.scrollIntoView(),o&&se.setMeta("composition",o),t.dispatch(se)}return}let s=t.state.doc.resolve(e),l=s.sharedDepth(n);e=s.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,u=lb(t,e,n),c=t.state.doc,d=c.slice(u.from,u.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let h=hb(d.content,u.doc.content,u.from,f,p);if(h&&t.input.domChangeCount++,(oi&&t.input.lastIOSEnter>Date.now()-225||vt)&&i.some(D=>D.nodeType==1&&!ub.test(D.nodeName))&&(!h||h.endA>=h.endB)&&t.someProp("handleKeyDown",D=>D(t,Wn(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!h)if(r&&a instanceof L&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))h={start:a.from,endA:a.to,endB:a.to};else{if(u.sel){let D=Rh(t,t.state.doc,u.sel);if(D&&!D.eq(t.state.selection)){let z=t.state.tr.setSelection(D);o&&z.setMeta("composition",o),t.dispatch(z)}}return}t.state.selection.from<t.state.selection.to&&h.start==h.endB&&t.state.selection instanceof L&&(h.start>t.state.selection.from&&h.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?h.start=t.state.selection.from:h.endA<t.state.selection.to&&h.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(h.endB+=t.state.selection.to-h.endA,h.endA=t.state.selection.to)),qe&&En<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>u.from&&u.doc.textBetween(h.start-u.from-1,h.start-u.from+1)=="  "&&(h.start--,h.endA--,h.endB--);let m=u.doc.resolveNoCache(h.start-u.from),v=u.doc.resolveNoCache(h.endB-u.from),g=c.resolve(h.start),y=m.sameParent(v)&&m.parent.inlineContent&&g.end()>=h.endA,k;if((oi&&t.input.lastIOSEnter>Date.now()-225&&(!y||i.some(D=>D.nodeName=="DIV"||D.nodeName=="P"))||!y&&m.pos<u.doc.content.size&&!m.sameParent(v)&&(k=_.findFrom(u.doc.resolve(m.pos+1),1,!0))&&k.head==v.pos)&&t.someProp("handleKeyDown",D=>D(t,Wn(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>h.start&&fb(c,h.start,h.endA,m,v)&&t.someProp("handleKeyDown",D=>D(t,Wn(8,"Backspace")))){vt&&Ae&&t.domObserver.suppressSelectionUpdates();return}Ae&&vt&&h.endB==h.start&&(t.input.lastAndroidDelete=Date.now()),vt&&!y&&m.start()!=v.start()&&v.parentOffset==0&&m.depth==v.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==h.endA&&(h.endB-=2,v=u.doc.resolveNoCache(h.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(D){return D(t,Wn(13,"Enter"))})},20));let w=h.start,S=h.endA,C,E,T;if(y){if(m.pos==v.pos)qe&&En<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ht(t),20)),C=t.state.tr.delete(w,S),E=c.resolve(h.start).marksAcross(c.resolve(h.endA));else if(h.endA==h.endB&&(T=db(m.parent.content.cut(m.parentOffset,v.parentOffset),g.parent.content.cut(g.parentOffset,h.endA-g.start()))))C=t.state.tr,T.type=="add"?C.addMark(w,S,T.mark):C.removeMark(w,S,T.mark);else if(m.parent.child(m.index()).isText&&m.index()==v.index()-(v.textOffset?0:1)){let D=m.parent.textBetween(m.parentOffset,v.parentOffset);if(t.someProp("handleTextInput",z=>z(t,w,S,D)))return;C=t.state.tr.insertText(D,w,S)}}if(C||(C=t.state.tr.replace(w,S,u.doc.slice(h.start-u.from,h.endB-u.from))),u.sel){let D=Rh(t,C.doc,u.sel);D&&!(Ae&&vt&&t.composing&&D.empty&&(h.start!=h.endB||t.input.lastAndroidDelete<Date.now()-100)&&(D.head==w||D.head==C.mapping.map(S)-1)||qe&&D.empty&&D.head==w)&&C.setSelection(D)}E&&C.ensureMarks(E),o&&C.setMeta("composition",o),t.dispatch(C.scrollIntoView())}function Rh(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:nd(t,e.resolve(n.anchor),e.resolve(n.head))}function db(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,l,a;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)o=n[c].removeFromSet(o);if(i.length==1&&o.length==0)l=i[0],s="add",a=c=>c.mark(l.addToSet(c.marks));else if(i.length==0&&o.length==1)l=o[0],s="remove",a=c=>c.mark(l.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(a(e.child(c)));if(b.from(u).eq(t))return{mark:l,type:s}}function fb(t,e,n,r,i){if(n-e<=i.pos-r.pos||Ta(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let l=o.nodeAfter;return l!=null&&n==e+l.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(Ta(o,!0,!0));return!s.parent.isTextblock||s.pos>n||Ta(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Ta(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function hb(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,o-Math.min(s,l));r-=s+a-o}if(s<o&&t.size<e.size){let a=r<=o&&r>=s?o-r:0;o-=a,o&&o<e.size&&Ph(e.textBetween(o-1,o+1))&&(o+=a?1:-1),l=o+(l-s),s=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,o&&o<t.size&&Ph(t.textBetween(o-1,o+1))&&(o+=a?1:-1),s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}function Ph(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class pb{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new DS,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Lh),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=zh(this),Ih(this),this.nodeViews=jh(this),this.docView=hh(this.state.doc,Dh(this),Ma(this),this.dom,this),this.domObserver=new rb(this,(r,i,o,s)=>cb(this,r,i,o,s)),this.domObserver.start(),IS(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&qu(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Lh),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(qy(this),s=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=jh(this);gb(p,this.nodeViews)&&(this.nodeViews=p,o=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&qu(this),this.editable=zh(this),Ih(this);let a=Ma(this),u=Dh(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(e.doc,u,a);(d||!e.selection.eq(i.selection))&&(s=!0);let f=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&Jw(this);if(s){this.domObserver.stop();let p=d&&(qe||Ae)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&mb(i.selection,e.selection);if(d){let h=Ae?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=qS(this)),(o||!this.docView.update(e.doc,u,a,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=hh(e.doc,u,a,this.dom,this)),h&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&vS(this))?Ht(this,p):(Iy(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():f&&Gw(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof I){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&lh(this,n.getBoundingClientRect(),e)}else lh(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new Gy(e.slice,e.move,i<0?void 0:I.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(i=n?n(l):l))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(qe){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Qw(this.dom),Ht(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return tS(this,e)}coordsAtPos(e,n=1){return Ey(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return sS(this,n||this.state,e)}pasteHTML(e,n){return yo(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return yo(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(zS(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ma(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Lw())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return LS(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?ze&&this.root.nodeType===11&&$w(this.dom.ownerDocument)==this.dom&&ob(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Dh(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[ut.node(0,t.state.doc.content.size,e)]}function Ih(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:ut.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function zh(t){return!t.someProp("editable",e=>e(t.state)===!1)}function mb(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function jh(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function gb(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Lh(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Rn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},rl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},yb=typeof navigator<"u"&&/Mac/.test(navigator.platform),vb=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var be=0;be<10;be++)Rn[48+be]=Rn[96+be]=String(be);for(var be=1;be<=24;be++)Rn[be+111]="F"+be;for(var be=65;be<=90;be++)Rn[be]=String.fromCharCode(be+32),rl[be]=String.fromCharCode(be);for(var Oa in Rn)rl.hasOwnProperty(Oa)||(rl[Oa]=Rn[Oa]);function xb(t){var e=yb&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||vb&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?rl:Rn)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const kb=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function wb(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))kb?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function Sb(t){let e=Object.create(null);for(let n in t)e[wb(n)]=t[n];return e}function Aa(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function bb(t){return new Qe({props:{handleKeyDown:e0(t)}})}function e0(t){let e=Sb(t);return function(n,r){let i=xb(r),o,s=e[Aa(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Aa(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Rn[r.keyCode])&&o!=i){let l=e[Aa(o,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const Cb=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function t0(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Nb=(t,e,n)=>{let r=t0(t,n);if(!r)return!1;let i=ad(r);if(!i){let s=r.blockRange(),l=s&&pi(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(o0(t,i,e,-1))return!0;if(r.parent.content.size==0&&(si(o,"end")||I.isSelectable(o)))for(let s=r.depth;;s--){let l=Ol(t.doc,r.before(s),r.after(s),O.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(si(o,"end")?_.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):I.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},Eb=(t,e,n)=>{let r=t0(t,n);if(!r)return!1;let i=ad(r);return i?n0(t,i,e):!1},Mb=(t,e,n)=>{let r=r0(t,n);if(!r)return!1;let i=ud(r);return i?n0(t,i,e):!1};function n0(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let c=l.firstChild;if(!c)return!1;l=c}let u=Ol(t.doc,o,a,O.empty);if(!u||u.from!=o||u instanceof me&&u.slice.size>=a-o)return!1;if(n){let c=t.tr.step(u);c.setSelection(L.create(c.doc,o)),n(c.scrollIntoView())}return!0}function si(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Tb=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=ad(r)}let s=o&&o.nodeBefore;return!s||!I.isSelectable(s)?!1:(e&&e(t.tr.setSelection(I.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function ad(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function r0(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Ob=(t,e,n)=>{let r=r0(t,n);if(!r)return!1;let i=ud(r);if(!i)return!1;let o=i.nodeAfter;if(o0(t,i,e,1))return!0;if(r.parent.content.size==0&&(si(o,"start")||I.isSelectable(o))){let s=Ol(t.doc,r.before(),r.after(),O.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(si(o,"start")?_.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):I.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},Ab=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=ud(r)}let s=o&&o.nodeAfter;return!s||!I.isSelectable(s)?!1:(e&&e(t.tr.setSelection(I.create(t.doc,o.pos)).scrollIntoView()),!0)};function ud(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Rb=(t,e)=>{let n=t.selection,r=n instanceof I,i;if(r){if(n.node.isTextblock||!jn(t.doc,n.from))return!1;i=n.from}else if(i=Tl(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(I.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Pb=(t,e)=>{let n=t.selection,r;if(n instanceof I){if(n.node.isTextblock||!jn(t.doc,n.to))return!1;r=n.to}else if(r=Tl(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Db=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&pi(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},Ib=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function i0(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const zb=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=i0(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,s.createAndFill());a.setSelection(_.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},jb=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof St||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=i0(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(s,o.createAndFill());l.setSelection(L.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},Lb=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(qr(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&pi(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},Bb=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(I.create(t.doc,i))),!0)};function Fb(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||jn(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function o0(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,l,a=i.type.spec.isolating||o.type.spec.isolating;if(!a&&Fb(t,e,n))return!0;let u=!a&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(s=(l=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&l.matchType(s[0]||o.type).validEnd){if(n){let p=e.pos+o.nodeSize,h=b.empty;for(let g=s.length-1;g>=0;g--)h=b.from(s[g].create(null,h));h=b.from(i.copy(h));let m=t.tr.step(new ye(e.pos-1,p,e.pos,p,new O(h,1,0),s.length,!0)),v=m.doc.resolve(p+2*s.length);v.nodeAfter&&v.nodeAfter.type==i.type&&jn(m.doc,v.pos)&&m.join(v.pos),n(m.scrollIntoView())}return!0}let c=o.type.spec.isolating||r>0&&a?null:_.findFrom(e,1),d=c&&c.$from.blockRange(c.$to),f=d&&pi(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(u&&si(o,"start",!0)&&si(i,"end")){let p=i,h=[];for(;h.push(p),!p.isTextblock;)p=p.lastChild;let m=o,v=1;for(;!m.isTextblock;m=m.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,m.content)){if(n){let g=b.empty;for(let k=h.length-1;k>=0;k--)g=b.from(h[k].copy(g));let y=t.tr.step(new ye(e.pos-h.length,e.pos+o.nodeSize,e.pos+v,e.pos+o.nodeSize-v,new O(g,h.length,0),0,!0));n(y.scrollIntoView())}return!0}}return!1}function s0(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(L.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const _b=s0(-1),Vb=s0(1);function $b(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&Xc(s,t,e);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function Bh(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[o];n.doc.nodesBetween(s,l,(a,u)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let c=n.doc.resolve(u),d=c.index();i=c.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[s];o.setBlockType(l,a,t,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Hb(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=!1,a=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(t)&&s.startIndex==0){if(i.index(s.depth-1)==0)return!1;let c=n.doc.resolve(s.start-2);a=new Js(c,c,s.depth),s.endIndex<s.parent.childCount&&(s=new Js(i,n.doc.resolve(o.end(s.depth)),s.depth)),l=!0}let u=Xc(a,t,e,s);return u?(r&&r(Wb(n.tr,s,u,l,t).scrollIntoView()),!0):!1}}function Wb(t,e,n,r,i){let o=b.empty;for(let c=n.length-1;c>=0;c--)o=b.from(n[c].type.create(n[c].attrs,o));t.step(new ye(e.start-(r?2:0),e.end,e.start,e.end,new O(o,0,0),n.length,!0));let s=0;for(let c=0;c<n.length;c++)n[c].type==i&&(s=c+1);let l=n.length-s,a=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,d=e.endIndex,f=!0;c<d;c++,f=!1)!f&&qr(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=u.child(c).nodeSize;return t}function Ub(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?Kb(e,n,t,o):qb(e,n,o):!0:!1}}function Kb(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new ye(o-1,s,o,s,new O(b.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Js(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const l=pi(r);if(l==null)return!1;i.lift(r,l);let a=i.mapping.map(o,-1)-1;return jn(i.doc,a)&&i.join(a),e(i.scrollIntoView()),!0}function qb(t,e,n){let r=t.tr,i=n.parent;for(let p=n.end,h=n.endIndex-1,m=n.startIndex;h>m;h--)p-=i.child(h).nodeSize,r.delete(p-1,p+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(l?0:1),c+1,s.content.append(a?b.empty:b.from(i))))return!1;let d=o.pos,f=d+s.nodeSize;return r.step(new ye(d-(l?1:0),f+(a?1:0),d+1,f-1,new O((l?b.empty:b.from(i.copy(b.empty))).append(a?b.empty:b.from(i.copy(b.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function Jb(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=t)return!1;if(n){let u=a.lastChild&&a.lastChild.type==l.type,c=b.from(u?t.create():null),d=new O(b.from(t.create(null,b.from(l.type.create(null,c)))),u?3:1,0),f=o.start,p=o.end;n(e.tr.step(new ye(f-(u?3:1),p,f,p,d,1,!0)).scrollIntoView())}return!0}}function Il(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class zl{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...c)=>{const d=a(...c)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l=[],a=!!e,u=e||o.tr,c=()=>(!a&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),l.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,p])=>[f,(...m)=>{const v=this.buildProps(u,n),g=p(...m)(v);return l.push(g),d}])),run:c};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([a,u])=>[a,(...c)=>u(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l={tr:e,editor:i,view:s,state:Il({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,u])=>[a,(...c)=>u(...c)(l)]))}};return l}}class Gb{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function P(t,e,n){return t.config[e]===void 0&&t.parent?P(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?P(t.parent,e,n):null}):t.config[e]}function jl(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function l0(t){const e=[],{nodeExtensions:n,markExtensions:r}=jl(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage,extensions:i},a=P(s,"addGlobalAttributes",l);if(!a)return;a().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([f,p])=>{e.push({type:d,name:f,attribute:{...o,...p}})})})})}),i.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=P(s,"addAttributes",l);if(!a)return;const u=a();Object.entries(u).forEach(([c,d])=>{const f={...o,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:s.name,name:c,attribute:f})})}),e}function xe(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Be(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const l=o?o.split(" "):[],a=r[i]?r[i].split(" "):[],u=l.filter(c=>!a.includes(c));r[i]=[...a,...u].join(" ")}else if(i==="style"){const l=o?o.split(";").map(c=>c.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],u=new Map;a.forEach(c=>{const[d,f]=c.split(":").map(p=>p.trim());u.set(d,f)}),l.forEach(c=>{const[d,f]=c.split(":").map(p=>p.trim());u.set(d,f)}),r[i]=Array.from(u.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[i]=o}),r},{})}function Ju(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Be(n,r),{})}function a0(t){return typeof t=="function"}function V(t,e=void 0,...n){return a0(t)?e?t.bind(e)(...n):t(...n):t}function Qb(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Yb(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Fh(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(n):Yb(n.getAttribute(s.name));return l==null?o:{...o,[s.name]:l}},{});return{...r,...i}}}}function _h(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Qb(n)?!1:n!=null))}function Xb(t,e){var n;const r=l0(t),{nodeExtensions:i,markExtensions:o}=jl(t),s=(n=i.find(u=>P(u,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(u=>{const c=r.filter(g=>g.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((g,y)=>{const k=P(y,"extendNodeSchema",d);return{...g,...k?k(u):{}}},{}),p=_h({...f,content:V(P(u,"content",d)),marks:V(P(u,"marks",d)),group:V(P(u,"group",d)),inline:V(P(u,"inline",d)),atom:V(P(u,"atom",d)),selectable:V(P(u,"selectable",d)),draggable:V(P(u,"draggable",d)),code:V(P(u,"code",d)),whitespace:V(P(u,"whitespace",d)),linebreakReplacement:V(P(u,"linebreakReplacement",d)),defining:V(P(u,"defining",d)),isolating:V(P(u,"isolating",d)),attrs:Object.fromEntries(c.map(g=>{var y;return[g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),h=V(P(u,"parseHTML",d));h&&(p.parseDOM=h.map(g=>Fh(g,c)));const m=P(u,"renderHTML",d);m&&(p.toDOM=g=>m({node:g,HTMLAttributes:Ju(g,c)}));const v=P(u,"renderText",d);return v&&(p.toText=v),[u.name,p]})),a=Object.fromEntries(o.map(u=>{const c=r.filter(v=>v.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((v,g)=>{const y=P(g,"extendMarkSchema",d);return{...v,...y?y(u):{}}},{}),p=_h({...f,inclusive:V(P(u,"inclusive",d)),excludes:V(P(u,"excludes",d)),group:V(P(u,"group",d)),spanning:V(P(u,"spanning",d)),code:V(P(u,"code",d)),attrs:Object.fromEntries(c.map(v=>{var g;return[v.name,{default:(g=v==null?void 0:v.attribute)===null||g===void 0?void 0:g.default}]}))}),h=V(P(u,"parseHTML",d));h&&(p.parseDOM=h.map(v=>Fh(v,c)));const m=P(u,"renderHTML",d);return m&&(p.toDOM=v=>m({mark:v,HTMLAttributes:Ju(v,c)})),[u.name,p]}));return new ny({topNode:s,nodes:l,marks:a})}function Ra(t,e){return e.nodes[t]||e.marks[t]||null}function Vh(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function cd(t,e){const n=yr.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const Zb=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,l)=>{var a,u;const c=((u=(a=i.type.spec).toText)===null||u===void 0?void 0:u.call(a,{node:i,pos:o,parent:s,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-o))}),n};function dd(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Ll{constructor(e){this.find=e.find,this.handler=e.handler}}const eC=(t,e)=>{if(dd(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Xo(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const u=a.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let c=!1;const d=Zb(u)+o;return s.forEach(f=>{if(c)return;const p=eC(d,f.find);if(!p)return;const h=a.state.tr,m=Il({state:a.state,transaction:h}),v={from:r-(p[0].length-o.length),to:i},{commands:g,chain:y,can:k}=new zl({editor:n,state:m});f.handler({state:m,range:v,match:p,commands:g,chain:y,can:k})===null||!h.steps.length||(h.setMeta(l,{transform:h,from:r,to:i,text:o}),a.dispatch(h),c=!0)}),c}function tC(t){const{editor:e,rules:n}=t,r=new Qe({state:{init(){return null},apply(i,o,s){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:c}=a;typeof c=="string"?c=c:c=cd(b.from(c),s.schema);const{from:d}=a,f=d+c.length;Xo({editor:e,from:d,to:f,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,l){return Xo({editor:e,from:o,to:s,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Xo({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?Xo({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function nC(t){return Object.prototype.toString.call(t).slice(8,-1)}function Zo(t){return nC(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Bl(t,e){const n={...t};return Zo(t)&&Zo(e)&&Object.keys(e).forEach(r=>{Zo(e[r])&&Zo(t[r])?n[r]=Bl(t[r],e[r]):n[r]=e[r]}),n}class Pn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=V(P(this,"addOptions",{name:this.name}))),this.storage=V(P(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Pn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Bl(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Pn(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=V(P(n,"addOptions",{name:n.name})),n.storage=V(P(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const a=s.find(u=>(u==null?void 0:u.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function rC(t){return typeof t=="number"}class iC{constructor(e){this.find=e.find,this.handler=e.handler}}const oC=(t,e,n)=>{if(dd(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function sC(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:l}=t,{commands:a,chain:u,can:c}=new zl({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(p,h)=>{if(!p.isTextblock||p.type.spec.code)return;const m=Math.max(r,h),v=Math.min(i,h+p.content.size),g=p.textBetween(m-h,v-h,void 0,"￼");oC(g,o.find,s).forEach(k=>{if(k.index===void 0)return;const w=m+k.index+1,S=w+k[0].length,C={from:n.tr.mapping.map(w),to:n.tr.mapping.map(S)},E=o.handler({state:n,range:C,match:k,commands:a,chain:u,can:c,pasteEvent:s,dropEvent:l});d.push(E)})}),d.every(p=>p!==null)}const lC=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function aC(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:c,from:d,to:f,rule:p,pasteEvt:h})=>{const m=c.tr,v=Il({state:c,transaction:m});if(!(!sC({editor:e,state:v,from:Math.max(d-1,0),to:f.b-1,rule:p,pasteEvent:h,dropEvent:l})||!m.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return n.map(c=>new Qe({view(d){const f=p=>{var h;r=!((h=d.dom.parentElement)===null||h===void 0)&&h.contains(p.target)?d.dom.parentElement:null};return window.addEventListener("dragstart",f),{destroy(){window.removeEventListener("dragstart",f)}}},props:{handleDOMEvents:{drop:(d,f)=>(o=r===d.dom.parentElement,l=f,!1),paste:(d,f)=>{var p;const h=(p=f.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return s=f,i=!!(h!=null&&h.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,p)=>{const h=d[0],m=h.getMeta("uiEvent")==="paste"&&!i,v=h.getMeta("uiEvent")==="drop"&&!o,g=h.getMeta("applyPasteRules"),y=!!g;if(!m&&!v&&!y)return;if(y){let{text:S}=g;typeof S=="string"?S=S:S=cd(b.from(S),p.schema);const{from:C}=g,E=C+S.length,T=lC(S);return a({rule:c,state:p,from:C,to:{b:E},pasteEvt:T})}const k=f.doc.content.findDiffStart(p.doc.content),w=f.doc.content.findDiffEnd(p.doc.content);if(!(!rC(k)||!w||k===w.b))return a({rule:c,state:p,from:k,to:w,pasteEvt:s})}}))}function uC(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Br{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Br.resolve(e),this.schema=Xb(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Br.sort(Br.flatten(e)),r=uC(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=P(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=P(r,"priority")||100,s=P(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Ra(n.name,this.schema)},i=P(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Br.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:Ra(s.name,this.schema)},a=[],u=P(s,"addKeyboardShortcuts",l);let c={};if(s.type==="mark"&&P(s,"exitable",l)&&(c.ArrowRight=()=>Pn.handleExit({editor:e,mark:s})),u){const m=Object.fromEntries(Object.entries(u()).map(([v,g])=>[v,()=>g({editor:e})]));c={...c,...m}}const d=bb(c);a.push(d);const f=P(s,"addInputRules",l);Vh(s,e.options.enableInputRules)&&f&&r.push(...f());const p=P(s,"addPasteRules",l);Vh(s,e.options.enablePasteRules)&&p&&i.push(...p());const h=P(s,"addProseMirrorPlugins",l);if(h){const m=h();a.push(...m)}return a}).flat();return[tC({editor:e,rules:r}),...aC({editor:e,rules:i}),...o]}get attributes(){return l0(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=jl(this.extensions);return Object.fromEntries(n.filter(r=>!!P(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:xe(r.name,this.schema)},s=P(r,"addNodeView",o);if(!s)return[];const l=(a,u,c,d,f)=>{const p=Ju(a,i);return s()({node:a,view:u,getPos:c,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:p})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Ra(e.name,this.schema)};e.type==="mark"&&(!((n=V(P(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=P(e,"onBeforeCreate",r),o=P(e,"onCreate",r),s=P(e,"onUpdate",r),l=P(e,"onSelectionUpdate",r),a=P(e,"onTransaction",r),u=P(e,"onFocus",r),c=P(e,"onBlur",r),d=P(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}}class Fe{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=V(P(this,"addOptions",{name:this.name}))),this.storage=V(P(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Fe(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Bl(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Fe({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=V(P(n,"addOptions",{name:n.name})),n.storage=V(P(n,"addStorage",{name:n.name,options:n.options})),n}}function u0(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let l="";return t.nodesBetween(r,i,(a,u,c,d)=>{var f;a.isBlock&&u>r&&(l+=o);const p=s==null?void 0:s[a.type.name];if(p)return c&&(l+=p({node:a,pos:u,parent:c,index:d,range:e})),!1;a.isText&&(l+=(f=a==null?void 0:a.text)===null||f===void 0?void 0:f.slice(Math.max(r,u)-u,i-u))}),l}function c0(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const cC=Fe.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Qe({key:new It("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(c=>c.$from.pos)),l=Math.max(...o.map(c=>c.$to.pos)),a=c0(n);return u0(r,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),dC=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),fC=(t=!1)=>({commands:e})=>e.setContent("",t),hC=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:u,mapping:c}=e,d=u.resolve(c.map(a)),f=u.resolve(c.map(a+l.nodeSize)),p=d.blockRange(f);if(!p)return;const h=pi(p);if(l.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(p.start,m)}(h||h===0)&&e.lift(p,h)})}),!0},pC=t=>e=>t(e),mC=()=>({state:t,dispatch:e})=>jb(t,e),gC=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new L(r.doc.resolve(s-1))),!0},yC=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const l=i.before(o),a=i.after(o);t.delete(l,a).scrollIntoView()}return!0}return!1},vC=t=>({tr:e,state:n,dispatch:r})=>{const i=xe(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const a=o.before(s),u=o.after(s);e.delete(a,u).scrollIntoView()}return!0}return!1},xC=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},kC=()=>({state:t,dispatch:e})=>Cb(t,e),wC=()=>({commands:t})=>t.keyboardShortcut("Enter"),SC=()=>({state:t,dispatch:e})=>zb(t,e);function il(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:dd(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function d0(t,e,n={}){return t.find(r=>r.type===e&&il(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function $h(t,e,n={}){return!!d0(t,e,n)}function fd(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!d0([...i.node.marks],e,n)))return;let s=i.index,l=t.start()+i.offset,a=s+1,u=l+i.node.nodeSize;for(;s>0&&$h([...t.parent.child(s-1).marks],e,n);)s-=1,l-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&$h([...t.parent.child(a).marks],e,n);)u+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:u}}function Bn(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const bC=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Bn(t,r.schema),{doc:s,selection:l}=n,{$from:a,from:u,to:c}=l;if(i){const d=fd(a,o,e);if(d&&d.from<=u&&d.to>=c){const f=L.create(s,d.from,d.to);n.setSelection(f)}}return!0},CC=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function f0(t){return t instanceof L}function Yn(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function h0(t,e=null){if(!e)return null;const n=_.atStart(t),r=_.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?L.create(t,Yn(0,i,o),Yn(t.content.size,i,o)):L.create(t,Yn(e,i,o),Yn(e,i,o))}function hd(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const NC=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{hd()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!f0(n.state.selection))return s(),!0;const l=h0(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return o&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},EC=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),MC=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),p0=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&p0(r)}return t};function es(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return p0(n)}function ol(t,e,n){if(t instanceof Cn||t instanceof b)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return b.fromArray(t.map(l=>e.nodeFromJSON(l)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),ol("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,l="";const a=new ny({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(s=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?Nn.fromSchema(a).parseSlice(es(t),n.parseOptions):Nn.fromSchema(a).parse(es(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const o=Nn.fromSchema(e);return n.slice?o.parseSlice(es(t),n.parseOptions).content:o.parse(es(t),n.parseOptions)}return ol("",e,n)}function TC(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof me||i instanceof ye))return;const o=t.mapping.maps[r];let s=0;o.forEach((l,a,u,c)=>{s===0&&(s=c)}),t.setSelection(_.near(t.doc.resolve(s),n))}const OC=t=>!("type"in t),AC=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;try{l=ol(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(h){return o.emit("contentError",{editor:o,error:h,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}}),!1}let{from:a,to:u}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,d=!0;if((OC(l)?l:[l]).forEach(h=>{h.check(),c=c?h.isText&&h.marks.length===0:!1,d=d?h.isBlock:!1}),a===u&&d){const{parent:h}=r.doc.resolve(a);h.isTextblock&&!h.type.spec.code&&!h.childCount&&(a-=1,u+=1)}let p;if(c){if(Array.isArray(e))p=e.map(h=>h.text||"").join("");else if(e instanceof b){let h="";e.forEach(m=>{m.text&&(h+=m.text)}),p=h}else typeof e=="object"&&e&&e.text?p=e.text:p=e;r.insertText(p,a,u)}else p=l,r.replaceWith(a,u,p);n.updateSelection&&TC(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:p}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:p})}return!0},RC=()=>({state:t,dispatch:e})=>Rb(t,e),PC=()=>({state:t,dispatch:e})=>Pb(t,e),DC=()=>({state:t,dispatch:e})=>Nb(t,e),IC=()=>({state:t,dispatch:e})=>Ob(t,e),zC=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Tl(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},jC=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Tl(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},LC=()=>({state:t,dispatch:e})=>Eb(t,e),BC=()=>({state:t,dispatch:e})=>Mb(t,e);function m0(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function FC(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))hd()||m0()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const _C=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=FC(t).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,l))});return a==null||a.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function xo(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?xe(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const p=Math.max(r,f),h=Math.min(i,f+d.nodeSize);l.push({node:d,from:p,to:h})});const a=i-r,u=l.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>il(d.node.attrs,n,{strict:!1}));return o?!!u.length:u.reduce((d,f)=>d+f.to-f.from,0)>=a}const VC=(t,e={})=>({state:n,dispatch:r})=>{const i=xe(t,n.schema);return xo(n,i,e)?Db(n,r):!1},$C=()=>({state:t,dispatch:e})=>Lb(t,e),HC=t=>({state:e,dispatch:n})=>{const r=xe(t,e.schema);return Ub(r)(e,n)},WC=()=>({state:t,dispatch:e})=>Ib(t,e);function Fl(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Hh(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const UC=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Fl(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=xe(t,r.schema)),l==="mark"&&(s=Bn(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(u,c)=>{o&&o===u.type&&n.setNodeMarkup(c,void 0,Hh(u.attrs,e)),s&&u.marks.length&&u.marks.forEach(d=>{s===d.type&&n.addMark(c,c+u.nodeSize,s.create(Hh(d.attrs,e)))})})}),!0):!1},KC=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),qC=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),JC=()=>({state:t,dispatch:e})=>Tb(t,e),GC=()=>({state:t,dispatch:e})=>Ab(t,e),QC=()=>({state:t,dispatch:e})=>Bb(t,e),YC=()=>({state:t,dispatch:e})=>Vb(t,e),XC=()=>({state:t,dispatch:e})=>_b(t,e);function Gu(t,e,n={},r={}){return ol(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const ZC=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:l})=>{var a,u;const{doc:c}=o;if(n.preserveWhitespace!=="full"){const d=Gu(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return s&&o.replaceWith(0,c.content.size,d).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:c.content.size},t,{parseOptions:n,errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:i.options.enableContentCheck})};function g0(t,e){const n=Bn(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function eN(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function tN(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function pd(t){return e=>tN(e.$from,t)}function nN(t,e){const n={from:0,to:t.content.size};return u0(t,n,e)}function rN(t,e){const n=xe(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,l=>{o.push(l)});const s=o.reverse().find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function iN(t,e){const n=Fl(typeof e=="string"?e:e.name,t.schema);return n==="node"?rN(t,e):n==="mark"?g0(t,e):{}}function y0(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),s=fd(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function ys(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function Qu(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Bn(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>il(d.attrs,n,{strict:!1}));let s=0;const l=[];if(i.forEach(({$from:d,$to:f})=>{const p=d.pos,h=f.pos;t.doc.nodesBetween(p,h,(m,v)=>{if(!m.isText&&!m.marks.length)return;const g=Math.max(p,v),y=Math.min(h,v+m.nodeSize),k=y-g;s+=k,l.push(...m.marks.map(w=>({mark:w,from:g,to:y})))})}),s===0)return!1;const a=l.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>il(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),u=l.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,f)=>d+f.to-f.from,0);return(a>0?a+u:a)>=s}function oN(t,e,n={}){if(!e)return xo(t,null,n)||Qu(t,null,n);const r=Fl(e,t.schema);return r==="node"?xo(t,e,n):r==="mark"?Qu(t,e,n):!1}function Wh(t,e){const{nodeExtensions:n}=jl(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=V(P(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function md(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(md(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function sN(t){return t instanceof I}function lN(t,e,n){var r;const{selection:i}=e;let o=null;if(f0(i)&&(o=i.$cursor),o){const l=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:l,$to:a})=>{let u=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(c,d,f)=>{if(u)return!1;if(c.isInline){const p=!f||f.type.allowsMarkType(n),h=!!n.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(n));u=p&&h}return!u}),u})}const aN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:l}=o,a=Bn(t,r.schema);if(i)if(s){const u=g0(r,a);n.addStoredMark(a.create({...u,...e}))}else l.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;r.doc.nodesBetween(c,d,(f,p)=>{const h=Math.max(p,c),m=Math.min(p+f.nodeSize,d);f.marks.find(g=>g.type===a)?f.marks.forEach(g=>{a===g.type&&n.addMark(h,m,a.create({...g.attrs,...e}))}):n.addMark(h,m,a.create(e))})});return lN(r,n,a)},uN=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),cN=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=xe(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:l})=>Bh(o,{...s,...e})(n)?!0:l.clearNodes()).command(({state:l})=>Bh(o,{...s,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},dN=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Yn(t,0,r.content.size),o=I.create(r,i);e.setSelection(o)}return!0},fN=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=L.atStart(r).from,l=L.atEnd(r).to,a=Yn(i,s,l),u=Yn(o,s,l),c=L.create(r,a,u);e.setSelection(c)}return!0},hN=t=>({state:e,dispatch:n})=>{const r=xe(t,e.schema);return Jb(r)(e,n)};function Uh(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const pN=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:l,$to:a}=o,u=i.extensionManager.attributes,c=ys(u,l.node().type.name,l.node().attrs);if(o instanceof I&&o.node.isBlock)return!l.parentOffset||!qr(s,l.pos)?!1:(r&&(t&&Uh(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,f=l.depth===0?void 0:eN(l.node(-1).contentMatchAt(l.indexAfter(-1)));let p=d&&f?[{type:f,attrs:c}]:void 0,h=qr(e.doc,e.mapping.map(l.pos),1,p);if(!p&&!h&&qr(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(h=!0,p=f?[{type:f,attrs:c}]:void 0),r){if(h&&(o instanceof L&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,p),f&&!d&&!l.parentOffset&&l.parent.type!==f)){const m=e.mapping.map(l.before()),v=e.doc.resolve(m);l.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}t&&Uh(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return h},mN=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const l=xe(t,r.schema),{$from:a,$to:u}=r.selection,c=r.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(u))return!1;const d=a.node(-1);if(d.type!==l)return!1;const f=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let g=b.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let T=a.depth-y;T>=a.depth-3;T-=1)g=b.from(a.node(T).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,w={...ys(f,a.node().type.name,a.node().attrs),...e},S=((s=l.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(w))||void 0;g=g.append(b.from(l.createAndFill(null,S)||void 0));const C=a.before(a.depth-(y-1));n.replace(C,a.after(-k),new O(g,4-y,0));let E=-1;n.doc.nodesBetween(C,n.doc.content.size,(T,D)=>{if(E>-1)return!1;T.isTextblock&&T.content.size===0&&(E=D+1)}),E>-1&&n.setSelection(L.near(n.doc.resolve(E))),n.scrollIntoView()}return!0}const p=u.pos===a.end()?d.contentMatchAt(0).defaultType:null,h={...ys(f,d.type.name,d.attrs),...e},m={...ys(f,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,u.pos);const v=p?[{type:l,attrs:h},{type:p,attrs:m}]:[{type:l,attrs:h}];if(!qr(n.doc,a.pos,2))return!1;if(i){const{selection:g,storedMarks:y}=r,{splittableMarks:k}=o.extensionManager,w=y||g.$to.parentOffset&&g.$from.marks();if(n.split(a.pos,2,v).scrollIntoView(),!w||!i)return!0;const S=w.filter(C=>k.includes(C.type.name));n.ensureMarks(S)}return!0},Pa=(t,e)=>{const n=pd(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&jn(t.doc,n.pos)&&t.join(n.pos),!0},Da=(t,e)=>{const n=pd(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&jn(t.doc,r)&&t.join(r),!0},gN=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:l,chain:a,commands:u,can:c})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,p=xe(t,s.schema),h=xe(e,s.schema),{selection:m,storedMarks:v}=s,{$from:g,$to:y}=m,k=g.blockRange(y),w=v||m.$to.parentOffset&&m.$from.marks();if(!k)return!1;const S=pd(C=>Wh(C.type.name,d))(m);if(k.depth>=1&&S&&k.depth-S.depth<=1){if(S.node.type===p)return u.liftListItem(h);if(Wh(S.node.type.name,d)&&p.validContent(S.node.content)&&l)return a().command(()=>(o.setNodeMarkup(S.pos,p),!0)).command(()=>Pa(o,p)).command(()=>Da(o,p)).run()}return!n||!w||!l?a().command(()=>c().wrapInList(p,r)?!0:u.clearNodes()).wrapInList(p,r).command(()=>Pa(o,p)).command(()=>Da(o,p)).run():a().command(()=>{const C=c().wrapInList(p,r),E=w.filter(T=>f.includes(T.type.name));return o.ensureMarks(E),C?!0:u.clearNodes()}).wrapInList(p,r).command(()=>Pa(o,p)).command(()=>Da(o,p)).run()},yN=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Bn(t,r.schema);return Qu(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},vN=(t,e,n={})=>({state:r,commands:i})=>{const o=xe(t,r.schema),s=xe(e,r.schema),l=xo(r,o,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(s,a):i.setNode(o,{...a,...n})},xN=(t,e={})=>({state:n,commands:r})=>{const i=xe(t,n.schema);return xo(n,i,e)?r.lift(i):r.wrapIn(i,e)},kN=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,a))}else s.delete(o.from,o.to)}return!0}}return!1},wN=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},SN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=n,a=Bn(t,r.schema),{$from:u,empty:c,ranges:d}=l;if(!i)return!0;if(c&&s){let{from:f,to:p}=l;const h=(o=u.marks().find(v=>v.type===a))===null||o===void 0?void 0:o.attrs,m=fd(u,a,h);m&&(f=m.from,p=m.to),n.removeMark(f,p,a)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,a)});return n.removeStoredMark(a),!0},bN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Fl(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=xe(t,r.schema)),l==="mark"&&(s=Bn(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const u=a.$from.pos,c=a.$to.pos;let d,f,p,h;n.selection.empty?r.doc.nodesBetween(u,c,(m,v)=>{o&&o===m.type&&(p=Math.max(v,u),h=Math.min(v+m.nodeSize,c),d=v,f=m)}):r.doc.nodesBetween(u,c,(m,v)=>{v<u&&o&&o===m.type&&(p=Math.max(v,u),h=Math.min(v+m.nodeSize,c),d=v,f=m),v>=u&&v<=c&&(o&&o===m.type&&n.setNodeMarkup(v,void 0,{...m.attrs,...e}),s&&m.marks.length&&m.marks.forEach(g=>{if(s===g.type){const y=Math.max(v,u),k=Math.min(v+m.nodeSize,c);n.addMark(y,k,s.create({...g.attrs,...e}))}}))}),f&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),s&&f.marks.length&&f.marks.forEach(m=>{s===m.type&&n.addMark(p,h,s.create({...m.attrs,...e}))}))}),!0):!1},CN=(t,e={})=>({state:n,dispatch:r})=>{const i=xe(t,n.schema);return $b(i,e)(n,r)},NN=(t,e={})=>({state:n,dispatch:r})=>{const i=xe(t,n.schema);return Hb(i,e)(n,r)};var EN=Object.freeze({__proto__:null,blur:dC,clearContent:fC,clearNodes:hC,command:pC,createParagraphNear:mC,cut:gC,deleteCurrentNode:yC,deleteNode:vC,deleteRange:xC,deleteSelection:kC,enter:wC,exitCode:SC,extendMarkRange:bC,first:CC,focus:NC,forEach:EC,insertContent:MC,insertContentAt:AC,joinBackward:DC,joinDown:PC,joinForward:IC,joinItemBackward:zC,joinItemForward:jC,joinTextblockBackward:LC,joinTextblockForward:BC,joinUp:RC,keyboardShortcut:_C,lift:VC,liftEmptyBlock:$C,liftListItem:HC,newlineInCode:WC,resetAttributes:UC,scrollIntoView:KC,selectAll:qC,selectNodeBackward:JC,selectNodeForward:GC,selectParentNode:QC,selectTextblockEnd:YC,selectTextblockStart:XC,setContent:ZC,setMark:aN,setMeta:uN,setNode:cN,setNodeSelection:dN,setTextSelection:fN,sinkListItem:hN,splitBlock:pN,splitListItem:mN,toggleList:gN,toggleMark:yN,toggleNode:vN,toggleWrap:xN,undoInputRule:kN,unsetAllMarks:wN,unsetMark:SN,updateAttributes:bN,wrapIn:CN,wrapInList:NN});const MN=Fe.create({name:"commands",addCommands(){return{...EN}}}),TN=Fe.create({name:"drop",addProseMirrorPlugins(){return[new Qe({key:new It("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),ON=Fe.create({name:"editable",addProseMirrorPlugins(){return[new Qe({key:new It("editable"),props:{editable:()=>this.editor.options.editable}})]}}),AN=Fe.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Qe({key:new It("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),RN=Fe.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:u}=l,{empty:c,$anchor:d}=a,{pos:f,parent:p}=d,h=d.parent.isTextblock&&f>0?l.doc.resolve(f-1):d,m=h.parent.type.spec.isolating,v=d.pos-d.parentOffset,g=m&&h.parent.childCount===1?v===d.pos:_.atStart(u).from===f;return!c||!p.type.isTextblock||p.textContent.length||!g||g&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return hd()||m0()?o:i},addProseMirrorPlugins(){return[new Qe({key:new It("clearDocument"),appendTransaction:(t,e,n)=>{const r=t.some(m=>m.docChanged)&&!e.doc.eq(n.doc),i=t.some(m=>m.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:l}=e.selection,a=_.atStart(e.doc).from,u=_.atEnd(e.doc).to;if(o||!(s===a&&l===u)||!md(n.doc))return;const f=n.tr,p=Il({state:n,transaction:f}),{commands:h}=new zl({editor:this.editor,state:p});if(h.clearNodes(),!!f.steps.length)return f}})]}}),PN=Fe.create({name:"paste",addProseMirrorPlugins(){return[new Qe({key:new It("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),DN=Fe.create({name:"tabindex",addProseMirrorPlugins(){return[new Qe({key:new It("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Un{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Un(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Un(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Un(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1),l=this.resolvedPos.doc.resolve(s);if(!i&&l.depth<=this.depth)return;const a=new Un(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new Un(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let l=0;l<s.length;l+=1){const a=s[l];if(o[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(a=>n[a]===s.node.attrs[a])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const IN=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function zN(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class jN extends Gb{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=zN(IN,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=a0(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;r=n.filter(l=>!l.key.startsWith(s))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[ON,cC.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),MN,AN,RN,DN,TN,PN].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Br(i,this)}createCommandManager(){this.commandManager=new zl({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Gu(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=Gu(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=h0(n,this.options.autofocus);this.view=new pb(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Lr.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return iN(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return oN(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return cd(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return nN(this.state.doc,{blockSeparator:n,textSerializers:{...c0(this.schema),...r}})}get isEmpty(){return md(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Un(n,this)}get $doc(){return this.$pos(0)}}function li(t){return new Ll({find:t.find,handler:({state:e,range:n,match:r})=>{const i=V(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],l=r[0];if(s){const a=l.search(/\S/),u=n.from+l.indexOf(s),c=u+s.length;if(y0(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(m=>m===t.type&&m!==p.mark.type)).filter(p=>p.to>u).length)return null;c<n.to&&o.delete(c,n.to),u>n.from&&o.delete(n.from+a,u);const f=n.from+a+s.length;o.addMark(n.from+a,f,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function LN(t){return new Ll({find:t.find,handler:({state:e,range:n,match:r})=>{const i=V(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let c=s+u;c>l?c=l:l=c+r[1].length;const d=r[0][r[0].length-1];o.insertText(d,s+r[0].length-1),o.replaceWith(c,l,a)}else if(r[0]){const u=t.type.isInline?s:s-1;o.insert(u,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(l))}o.scrollIntoView()}})}function Yu(t){return new Ll({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=V(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function ko(t){return new Ll({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=V(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),u=a&&Xc(a,t.type,o);if(!u)return null;if(s.wrap(a,u),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,h=f||d.$to.parentOffset&&d.$from.marks();if(h){const m=h.filter(v=>p.includes(v.type.name));s.ensureMarks(m)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,o).run()}const c=s.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&jn(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&s.join(n.from-1)}})}class Je{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=V(P(this,"addOptions",{name:this.name}))),this.storage=V(P(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Je(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Bl(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Je(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=V(P(n,"addOptions",{name:n.name})),n.storage=V(P(n,"addStorage",{name:n.name,options:n.options})),n}}function ai(t){return new iC({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=V(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,l=r[r.length-1],a=r[0];let u=n.to;if(l){const c=a.search(/\S/),d=n.from+a.indexOf(l),f=d+l.length;if(y0(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(v=>v===t.type&&v!==h.mark.type)).filter(h=>h.to>d).length)return null;f<n.to&&s.delete(f,n.to),d>n.from&&s.delete(n.from+c,d),u=n.from+c+l.length,s.addMark(n.from+c,u,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function BN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var v0={exports:{}},Ia={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kh;function FN(){if(Kh)return Ia;Kh=1;var t=J;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function l(d,f){var p=f(),h=r({inst:{value:p,getSnapshot:f}}),m=h[0].inst,v=h[1];return o(function(){m.value=p,m.getSnapshot=f,a(m)&&v({inst:m})},[d,p,f]),i(function(){return a(m)&&v({inst:m}),d(function(){a(m)&&v({inst:m})})},[d]),s(p),p}function a(d){var f=d.getSnapshot;d=d.value;try{var p=f();return!n(d,p)}catch{return!0}}function u(d,f){return f()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return Ia.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:c,Ia}v0.exports=FN();var gd=v0.exports;const _N=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},VN=({contentComponent:t})=>{const e=gd.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return J.createElement(J.Fragment,null,Object.values(e))};function $N(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Yv.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class HN extends J.Component{constructor(e){var n;super(e),this.editorContentRef=J.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=$N(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return J.createElement(J.Fragment,null,J.createElement("div",{ref:_N(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&J.createElement(VN,{contentComponent:e.contentComponent}))}}const WN=M.forwardRef((t,e)=>{const n=J.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return J.createElement(HN,{key:n,innerRef:e,...t})}),UN=J.memo(WN);var KN=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!(s==="_owner"&&e.$$typeof)&&!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n},qN=BN(KN),x0={exports:{}},za={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qh;function JN(){if(qh)return za;qh=1;var t=J,e=gd;function n(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,l=t.useMemo,a=t.useDebugValue;return za.useSyncExternalStoreWithSelector=function(u,c,d,f,p){var h=o(null);if(h.current===null){var m={hasValue:!1,value:null};h.current=m}else m=h.current;h=l(function(){function g(C){if(!y){if(y=!0,k=C,C=f(C),p!==void 0&&m.hasValue){var E=m.value;if(p(E,C))return w=E}return w=C}if(E=w,r(k,C))return E;var T=f(C);return p!==void 0&&p(E,T)?E:(k=C,w=T)}var y=!1,k,w,S=d===void 0?null:d;return[function(){return g(c())},S===null?void 0:function(){return g(S())}]},[c,d,f,p]);var v=i(u,h[0],h[1]);return s(function(){m.hasValue=!0,m.value=v},[v]),a(v),v},za}x0.exports=JN();var GN=x0.exports;class QN{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function YN(t){var e;const[n]=M.useState(()=>new QN(t.editor)),r=GN.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:qN);return M.useLayoutEffect(()=>n.watch(t.editor),[t.editor,n]),M.useDebugValue(r),r}const XN=!1,Xu=typeof window>"u",ZN=Xu||!!(typeof window<"u"&&window.next);class eE{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return Xu||ZN?null:this.createEditor();if(this.options.current.immediatelyRender&&Xu&&XN)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)===null||o===void 0?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)===null||o===void 0?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)===null||o===void 0?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)===null||o===void 0?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)===null||o===void 0?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)===null||o===void 0?void 0:o.call(i,...r)}};return new jN(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function tE(t={},e=[]){const n=M.useRef(t);n.current=t;const[r]=M.useState(()=>new eE(n)),i=gd.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return M.useDebugValue(i),M.useEffect(r.onRender(e)),YN({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&o===0?0:o+1}),i}const nE=M.createContext({editor:null});nE.Consumer;const rE=M.createContext({onDragStart:void 0}),iE=()=>M.useContext(rE);J.forwardRef((t,e)=>{const{onDragStart:n}=iE(),r=t.as||"div";return J.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const oE=/^\s*>\s$/,sE=Je.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Be(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ko({find:oE,type:this.type})]}}),lE=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,aE=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,uE=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,cE=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,dE=Pn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Be(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[li({find:lE,type:this.type}),li({find:uE,type:this.type})]},addPasteRules(){return[ai({find:aE,type:this.type}),ai({find:cE,type:this.type})]}}),fE="listItem",Jh="textStyle",Gh=/^\s*([-+*])\s$/,hE=Je.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Be(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(fE,this.editor.getAttributes(Jh)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=ko({find:Gh,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ko({find:Gh,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Jh),editor:this.editor})),[t]}}),pE=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,mE=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,gE=Pn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Be(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[li({find:pE,type:this.type})]},addPasteRules(){return[ai({find:mE,type:this.type})]}}),yE=/^```([a-z]+)?[\s\n]$/,vE=/^~~~([a-z]+)?[\s\n]$/,xE=Je.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Be(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:u})=>(u.setSelection(_.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[Yu({find:yE,type:this.type,getAttributes:t=>({language:t[1]})}),Yu({find:vE,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Qe({key:new It("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},a)),s.selection.$from.parent.type!==this.type&&s.setSelection(L.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),kE=Je.create({name:"doc",topNode:!0,content:"block+"});function wE(t={}){return new Qe({view(e){return new SE(e,t)}})}class SE{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let u=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(u){let c=u.getBoundingClientRect(),d=l?c.bottom:c.top;l&&a&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:c.left,right:c.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let l=i.getBoundingClientRect();o=l.left-i.scrollLeft,s=l.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=hy(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const bE=Fe.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[wE(this.options)]}});class ie extends _{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return ie.valid(r)?new ie(r):_.near(r)}content(){return O.empty}eq(e){return e instanceof ie&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ie(e.resolve(n.pos))}getBookmark(){return new yd(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!CE(e)||!NE(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&ie.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(n>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let a=e.doc.resolve(i);if(ie.valid(a))return a}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!I.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let l=e.doc.resolve(i);if(ie.valid(l))return l}return null}}}ie.prototype.visible=!1;ie.findFrom=ie.findGapCursorFrom;_.jsonID("gapcursor",ie);class yd{constructor(e){this.pos=e}map(e){return new yd(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return ie.valid(n)?new ie(n):_.near(n)}}function CE(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function NE(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function EE(){return new Qe({props:{decorations:AE,createSelectionBetween(t,e,n){return e.pos==n.pos&&ie.valid(n)?new ie(n):null},handleClick:TE,handleKeyDown:ME,handleDOMEvents:{beforeinput:OE}}})}const ME=e0({ArrowLeft:ts("horiz",-1),ArrowRight:ts("horiz",1),ArrowUp:ts("vert",-1),ArrowDown:ts("vert",1)});function ts(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof L){if(!o.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=ie.findGapCursorFrom(l,e,a);return u?(i&&i(r.tr.setSelection(new ie(u))),!0):!1}}function TE(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!ie.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&I.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ie(r))),!0)}function OE(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ie))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=b.empty;for(let s=r.length-1;s>=0;s--)i=b.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new O(i,0,0));return o.setSelection(L.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function AE(t){if(!(t.selection instanceof ie))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ce.create(t.doc,[ut.widget(t.selection.head,e,{key:"gapcursor"})])}const RE=Fe.create({name:"gapCursor",addProseMirrorPlugins(){return[EE()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=V(P(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),PE=Je.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Be(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&a&&s){const d=a.filter(f=>l.includes(f.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),DE=Je.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Be(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Yu({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var sl=200,ve=function(){};ve.prototype.append=function(e){return e.length?(e=ve.from(e),!this.length&&e||e.length<sl&&this.leafAppend(e)||this.length<sl&&e.leafPrepend(this)||this.appendInner(e)):this};ve.prototype.prepend=function(e){return e.length?ve.from(e).append(this):this};ve.prototype.appendInner=function(e){return new IE(this,e)};ve.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?ve.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};ve.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ve.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};ve.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};ve.from=function(e){return e instanceof ve?e:e&&e.length?new k0(e):ve.empty};var k0=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,l){for(var a=o;a<s;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,l){for(var a=o-1;a>=s;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=sl)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=sl)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(ve);ve.empty=new k0([]);var IE=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(r,Math.min(i,l),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(ve);const zE=500;class xt{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,l,a,u=[],c=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),o=i.maps.length),o--,c.push(d);return}if(i){c.push(new Mt(d.map));let p=d.step.map(i.slice(o)),h;p&&s.maybeStep(p).doc&&(h=s.mapping.maps[s.mapping.maps.length-1],u.push(new Mt(h,void 0,void 0,u.length+c.length))),o--,h&&i.appendMap(h,o)}else s.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(o)):d.selection,a=new xt(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,n,r,i){let o=[],s=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let c=0;c<e.steps.length;c++){let d=e.steps[c].invert(e.docs[c]),f=new Mt(e.mapping.maps[c],d,n),p;(p=a&&a.merge(f))&&(f=p,c?o.pop():l=l.slice(0,l.length-1)),o.push(f),n&&(s++,n=void 0),i||(a=f)}let u=s-r.depth;return u>LE&&(l=jE(l,u),s-=u),new xt(l.append(o),s)}remapping(e,n){let r=new Kr;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new xt(this.items.append(e.map(n=>new Mt(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},i);let a=n;this.items.forEach(f=>{let p=o.getMirror(--a);if(p==null)return;s=Math.min(s,p);let h=o.maps[p];if(f.step){let m=e.steps[p].invert(e.docs[p]),v=f.selection&&f.selection.map(o.slice(a+1,p));v&&l++,r.push(new Mt(h,m,v))}else r.push(new Mt(h))},i);let u=[];for(let f=n;f<s;f++)u.push(new Mt(o.maps[f]));let c=this.items.slice(0,i).append(u).append(r),d=new xt(c,l);return d.emptyItemCount()>zE&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,l)=>{if(l>=e)i.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(n.slice(r)),u=a&&a.getMap();if(r--,u&&n.appendMap(u,r),a){let c=s.selection&&s.selection.map(n.slice(r));c&&o++;let d=new Mt(u.invert(),a,c),f,p=i.length-1;(f=i.length&&i[p].merge(d))?i[p]=f:i.push(d)}}else s.map&&r--},this.items.length,0),new xt(ve.from(i.reverse()),o)}}xt.empty=new xt(ve.empty,0);function jE(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Mt{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Mt(n.getMap().invert(),n,this.selection)}}}class on{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const LE=20;function BE(t,e,n,r){let i=n.getMeta(or),o;if(i)return i.historyState;n.getMeta(VE)&&(t=new on(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(or))return s.getMeta(or).redo?new on(t.done.addTransform(n,void 0,r,vs(e)),t.undone,Qh(n.mapping.maps),t.prevTime,t.prevComposition):new on(t.done,t.undone.addTransform(n,void 0,r,vs(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!s&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!FE(n,t.prevRanges)),u=s?ja(t.prevRanges,n.mapping):Qh(n.mapping.maps);return new on(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,vs(e)),xt.empty,u,n.time,l??t.prevComposition)}else return(o=n.getMeta("rebased"))?new on(t.done.rebased(n,o),t.undone.rebased(n,o),ja(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new on(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),ja(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function FE(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function Qh(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function ja(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function _E(t,e,n){let r=vs(e),i=or.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),a=new on(n?l:o.remaining,n?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(or,{redo:n,historyState:a})}let La=!1,Yh=null;function vs(t){let e=t.plugins;if(Yh!=e){La=!1,Yh=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){La=!0;break}}return La}const or=new It("history"),VE=new It("closeHistory");function $E(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Qe({key:or,state:{init(){return new on(xt.empty,xt.empty,null,0,-1)},apply(e,n,r){return BE(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?S0:r=="historyRedo"?b0:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function w0(t,e){return(n,r)=>{let i=or.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=_E(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const S0=w0(!1,!0),b0=w0(!0,!0),HE=Fe.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>S0(t,e),redo:()=>({state:t,dispatch:e})=>b0(t,e)}},addProseMirrorPlugins(){return[$E(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),WE=Je.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Be(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):sN(n)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:l})=>{var a;if(l){const{$to:u}=s.selection,c=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(L.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(I.create(s.doc,u.pos)):s.setSelection(L.create(s.doc,u.pos));else{const d=(a=u.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(s.insert(c,d),s.setSelection(L.create(s.doc,c+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[LN({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),UE=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,KE=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,qE=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,JE=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,GE=Pn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Be(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[li({find:UE,type:this.type}),li({find:qE,type:this.type})]},addPasteRules(){return[ai({find:KE,type:this.type}),ai({find:JE,type:this.type})]}}),QE=Je.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Be(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),YE="listItem",Xh="textStyle",Zh=/^(\d+)\.\s$/,XE=Je.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Be(this.options.HTMLAttributes,n),0]:["ol",Be(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(YE,this.editor.getAttributes(Xh)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=ko({find:Zh,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ko({find:Zh,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Xh)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),ZE=Je.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Be(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),eM=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,tM=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,nM=Pn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Be(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[li({find:eM,type:this.type})]},addPasteRules(){return[ai({find:tM,type:this.type})]}}),rM=Je.create({name:"text",group:"inline"}),iM=Fe.create({name:"starterKit",addExtensions(){var t,e,n,r,i,o,s,l,a,u,c,d,f,p,h,m,v,g;const y=[];return this.options.bold!==!1&&y.push(dE.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&y.push(sE.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&y.push(hE.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&y.push(gE.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&y.push(xE.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&y.push(kE.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&y.push(bE.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&y.push(RE.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&y.push(PE.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&y.push(DE.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&y.push(HE.configure((c=this.options)===null||c===void 0?void 0:c.history)),this.options.horizontalRule!==!1&&y.push(WE.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&y.push(GE.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&y.push(QE.configure((p=this.options)===null||p===void 0?void 0:p.listItem)),this.options.orderedList!==!1&&y.push(XE.configure((h=this.options)===null||h===void 0?void 0:h.orderedList)),this.options.paragraph!==!1&&y.push(ZE.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&y.push(nM.configure((v=this.options)===null||v===void 0?void 0:v.strike)),this.options.text!==!1&&y.push(rM.configure((g=this.options)===null||g===void 0?void 0:g.text)),y}});function oM({content:t,onChange:e}){const n=tE({extensions:[iM],content:t,onUpdate:({editor:r})=>{e(r.getHTML())},editorProps:{attributes:{class:"prose prose-invert max-w-none focus:outline-none p-4"}}});return x.jsx(UN,{editor:n})}function sM(){const{id:t}=Cg(),e=El(),[n,r]=J.useState(!1),[i,o]=J.useState(!1),[s,l]=J.useState(""),[a,u]=J.useState(0),[c,d]=J.useState("recent"),[f,p]=J.useState(!1),h=jr.find(v=>v.id===t);M.useEffect(()=>{window.scrollTo(0,0);const v=setTimeout(()=>p(!0),100);return()=>clearTimeout(v)},[]);const m=[...h.reviews].sort((v,g)=>c==="recent"?new Date(g.date).getTime()-new Date(v.date).getTime():g.helpful-v.helpful);return h?x.jsxs("div",{className:bn("opacity-0 transition-opacity duration-500",f&&"opacity-100"),children:[x.jsx("button",{onClick:()=>e(-1),className:"fixed top-24 left-4 z-50 bg-primary/90 backdrop-blur-sm p-2 rounded-full hover:bg-primary-hover transition-colors group",children:x.jsx(Mg,{className:"w-6 h-6 group-hover:transform group-hover:-translate-x-1 transition-transform"})}),x.jsxs("div",{className:"relative h-[70vh]",children:[x.jsx("img",{src:h.backdrop,alt:h.title,className:"w-full h-full object-cover"}),x.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/80 to-transparent"}),x.jsx("div",{className:"absolute inset-0 flex items-end",children:x.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:x.jsxs("div",{className:"flex gap-8 animate-fade-up",children:[x.jsx("img",{src:h.poster,alt:h.title,className:"w-64 rounded-lg shadow-xl"}),x.jsxs("div",{className:"flex flex-col justify-end",children:[x.jsx("h1",{className:"text-5xl font-bold mb-4",children:h.title}),x.jsxs("div",{className:"flex items-center space-x-6 text-text-secondary",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(Jx,{className:"w-5 h-5 mr-2"}),x.jsx("span",{children:h.year})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx(Gx,{className:"w-5 h-5 mr-2"}),x.jsxs("span",{children:[h.runtime," min"]})]}),x.jsx(ma,{rating:h.rating,size:"lg"})]}),x.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:h.genres.map(v=>x.jsx("span",{className:"bg-accent/10 text-accent px-3 py-1 rounded-full text-sm",children:v},v))}),x.jsxs("div",{className:"flex space-x-4 mt-8",children:[x.jsxs("button",{className:"btn-accent flex items-center",onClick:()=>r(!0),children:[x.jsx(Ag,{className:"w-5 h-5 mr-2"}),"Watch Trailer"]}),x.jsx("button",{className:"btn-primary",children:"Add to Watchlist"})]})]})]})})})]}),x.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-16",children:[x.jsxs("section",{className:"animate-fade-up delay-100",children:[x.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Plot"}),x.jsx("p",{className:"text-text-secondary leading-relaxed",children:h.plot})]}),x.jsxs("section",{className:"animate-fade-up delay-200",children:[x.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Cast & Crew"}),x.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:h.cast.map(v=>x.jsxs("div",{className:"text-center group",children:[x.jsx("div",{className:"relative overflow-hidden rounded-lg mb-2",children:x.jsx("img",{src:v.photo,alt:v.name,className:"w-full aspect-square object-cover transform group-hover:scale-110 transition-transform duration-300"})}),x.jsx("h3",{className:"font-semibold",children:v.name}),x.jsx("p",{className:"text-sm text-text-secondary",children:v.role})]},v.id))})]}),x.jsxs("section",{className:"animate-fade-up delay-300",children:[x.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Write a Review"}),x.jsxs("div",{className:"bg-primary rounded-lg p-6 mb-12",children:[x.jsxs("div",{className:"mb-6",children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Your Rating"}),x.jsx(ma,{rating:a,onChange:u,size:"lg"})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Your Review"}),x.jsx("div",{className:"min-h-[200px] bg-background/50 rounded-lg overflow-hidden transition-all focus-within:ring-2 focus-within:ring-accent/50",children:x.jsx(oM,{content:s,onChange:l})})]}),x.jsx("button",{className:"btn-accent",onClick:()=>o(!0),children:"Submit Review"})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsx("h2",{className:"text-2xl font-bold",children:"User Reviews"}),x.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"bg-primary border border-white/10 rounded-lg px-4 py-2",children:[x.jsx("option",{value:"recent",children:"Most Recent"}),x.jsx("option",{value:"helpful",children:"Most Helpful"})]})]}),x.jsx("div",{className:"space-y-6",children:m.map(v=>x.jsxs("div",{className:"bg-primary rounded-lg p-6 animate-fade-up",children:[x.jsxs("div",{className:"flex items-start justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsx("img",{src:v.userAvatar,alt:v.userName,className:"w-12 h-12 rounded-full object-cover"}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold",children:v.userName}),x.jsx("p",{className:"text-sm text-text-secondary",children:new Date(v.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),x.jsx(ma,{rating:v.rating,size:"sm"})]}),x.jsx("p",{className:"text-text-secondary mb-4",children:v.content}),x.jsxs("div",{className:"flex items-center space-x-6 text-text-secondary",children:[x.jsxs("button",{className:"flex items-center space-x-2 hover:text-text transition-colors",children:[x.jsx(Yx,{className:"w-5 h-5"}),x.jsx("span",{children:v.likes})]}),x.jsxs("button",{className:"flex items-center space-x-2 hover:text-text transition-colors",children:[x.jsx(Zx,{className:"w-5 h-5"}),x.jsxs("span",{children:[v.helpful," found this helpful"]})]})]})]},v.id))})]})]})]}),n&&x.jsx("div",{className:"fixed inset-0 bg-background/95 flex items-center justify-center z-50 animate-fade",children:x.jsxs("div",{className:"relative max-w-4xl w-full aspect-video",children:[x.jsx("iframe",{src:h.trailer,className:"w-full h-full rounded-lg",allowFullScreen:!0}),x.jsxs("button",{className:"absolute -top-12 right-0 text-text-secondary hover:text-text flex items-center group",onClick:()=>r(!1),children:[x.jsx("span",{className:"mr-2",children:"Close"}),x.jsx(Dg,{className:"w-5 h-5 group-hover:rotate-90 transition-transform"})]})]})}),x.jsx(Ig,{isOpen:i,onClose:()=>o(!1)})]}):x.jsx("div",{className:"min-h-screen flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Movie Not Found"}),x.jsx("button",{className:"btn-primary",onClick:()=>e("/"),children:"Return Home"})]})})}const lM=["Action","Adventure","Animation","Comedy","Crime","Documentary","Drama","Family","Fantasy","Horror","Mystery","Romance","Sci-Fi","Thriller","War","Western"],aM={trending:"Trending Movies","top-rated":"Top Rated Movies",recent:"Recently Reviewed Movies"};function uM(){const{category:t}=Cg(),e=El(),[n,r]=M.useState(!1),[i,o]=M.useState("grid"),[s,l]=M.useState([]),[a,u]=M.useState(!1),[c,d]=M.useState("rating");M.useEffect(()=>{window.scrollTo(0,0);const h=setTimeout(()=>r(!0),100);return()=>clearTimeout(h)},[]);const f=h=>{l(m=>m.includes(h)?m.filter(v=>v!==h):[...m,h])};let p=[...jr];switch(t){case"top-rated":p.sort((h,m)=>m.rating-h.rating);break;case"recent":p.sort((h,m)=>{var v,g;return new Date((v=m.reviews[0])==null?void 0:v.date).getTime()-new Date((g=h.reviews[0])==null?void 0:g.date).getTime()});break}return s.length>0&&(p=p.filter(h=>h.genres.some(m=>s.includes(m)))),c==="rating"?p.sort((h,m)=>m.rating-h.rating):p.sort((h,m)=>m.year-h.year),x.jsxs("div",{className:bn("opacity-0 transition-opacity duration-500",n&&"opacity-100"),children:[x.jsx("button",{onClick:()=>e(-1),className:"fixed top-24 left-4 z-50 bg-primary/90 backdrop-blur-sm p-2 rounded-full hover:bg-primary-hover transition-colors group",children:x.jsx(Mg,{className:"w-6 h-6 group-hover:transform group-hover:-translate-x-1 transition-transform"})}),x.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[x.jsxs("div",{className:"flex items-center justify-between mb-8",children:[x.jsx("h1",{className:"text-3xl font-bold",children:aM[t]||"All Movies"}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("button",{onClick:()=>u(!a),className:"btn-primary flex items-center",children:[x.jsx(Rg,{className:"w-5 h-5 mr-2"}),"Filters"]}),x.jsxs("div",{className:"flex bg-primary rounded-lg",children:[x.jsx("button",{onClick:()=>o("grid"),className:bn("p-2 rounded-l-lg",i==="grid"?"bg-accent":"hover:bg-primary-hover"),children:x.jsx(Tg,{className:"w-5 h-5"})}),x.jsx("button",{onClick:()=>o("list"),className:bn("p-2 rounded-r-lg",i==="list"?"bg-accent":"hover:bg-primary-hover"),children:x.jsx(Og,{className:"w-5 h-5"})})]})]})]}),a&&x.jsxs("div",{className:"bg-primary rounded-lg p-6 mb-8 animate-fade",children:[x.jsxs("div",{className:"mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Genres"}),x.jsx(Gc,{genres:lM,selectedGenres:s,onGenreSelect:f})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Sort By"}),x.jsxs("select",{value:c,onChange:h=>d(h.target.value),className:"bg-background/50 border border-white/10 rounded-lg px-4 py-2 w-full",children:[x.jsx("option",{value:"rating",children:"Rating"}),x.jsx("option",{value:"date",children:"Release Date"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rating"}),x.jsxs("select",{className:"bg-background/50 border border-white/10 rounded-lg px-4 py-2 w-full",children:[x.jsx("option",{value:"",children:"All Ratings"}),x.jsx("option",{value:"7",children:"7+ Stars"}),x.jsx("option",{value:"8",children:"8+ Stars"}),x.jsx("option",{value:"9",children:"9+ Stars"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-2",children:"Runtime"}),x.jsxs("select",{className:"bg-background/50 border border-white/10 rounded-lg px-4 py-2 w-full",children:[x.jsx("option",{value:"",children:"Any Length"}),x.jsx("option",{value:"short",children:"Under 90 mins"}),x.jsx("option",{value:"medium",children:"90-120 mins"}),x.jsx("option",{value:"long",children:"Over 120 mins"})]})]})]})]}),x.jsx(Ws,{movies:p,view:i})]})]})}function cM(){return x.jsx(Ux,{children:x.jsxs("div",{className:"min-h-screen bg-background",children:[x.jsx(tk,{}),x.jsxs($x,{children:[x.jsx(Ai,{path:"/",element:x.jsx(Bk,{})}),x.jsx(Ai,{path:"/browse",element:x.jsx(_k,{})}),x.jsx(Ai,{path:"/movie/:id",element:x.jsx(sM,{})}),x.jsx(Ai,{path:"/movies/:category",element:x.jsx(uM,{})})]})]})})}pg(document.getElementById("root")).render(x.jsx(M.StrictMode,{children:x.jsx(cM,{})}));
